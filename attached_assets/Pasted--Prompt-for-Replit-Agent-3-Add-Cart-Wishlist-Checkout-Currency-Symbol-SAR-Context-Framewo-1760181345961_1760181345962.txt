üîß Prompt for Replit Agent 3 ‚Äî Add Cart, Wishlist, Checkout & Currency Symbol (SAR)
Context

Framework: React + TypeScript + Vite + TailwindCSS + React Router + Zustand + i18next

Root folder: frontend/src

Design system: charcoal / gold / sand / ivory color palette, rounded-luxury corners, RTL when lang = 'ar'

Goal: Upgrade current perfume store website to include Shopping Cart, Wishlist, Checkout Flow, Advanced Filters, Quick Search, and SAR currency symbol (using provided SVG).

üß± Task Overview

Implement the following new features while keeping the existing design and layout intact:

1. Zustand State Management

Create file: src/store/cartStore.ts

import { create } from "zustand";
import { persist } from "zustand/middleware";

export type CartItem = {
  id: string;
  name: string;
  price: number;
  image?: string | null;
  brand?: string | null;
  qty: number;
  variantId?: string;
  variantLabel?: string;
};

type ShippingMethod = "standard" | "express";

type CartState = {
  items: CartItem[];
  coupon?: { code: string; amount: number } | null;
  shipping: ShippingMethod;
  add: (p: Omit<CartItem, "qty">, qty?: number) => void;
  remove: (id: string, variantId?: string) => void;
  setQty: (id: string, qty: number, variantId?: string) => void;
  clear: () => void;
  setCoupon: (c: CartState["coupon"]) => void;
  setShipping: (m: ShippingMethod) => void;
  totals: () => { sub: number; discount: number; shipping: number; total: number };
  count: () => number;
};

export const useCartStore = create<CartState>()(persist((set, get) => ({
  items: [],
  coupon: null,
  shipping: "standard",
  add: (p, qty = 1) => {
    const items = [...get().items];
    const idx = items.findIndex(i => i.id === p.id && i.variantId === p.variantId);
    if (idx >= 0) items[idx].qty += qty;
    else items.push({ ...p, qty });
    set({ items });
  },
  remove: (id, variantId) =>
    set({ items: get().items.filter(i => !(i.id === id && i.variantId === variantId)) }),
  setQty: (id, qty, variantId) =>
    set({ items: get().items.map(i => (i.id === id && i.variantId === variantId ? { ...i, qty: Math.max(1, qty) } : i)) }),
  clear: () => set({ items: [], coupon: null }),
  setCoupon: (c) => set({ coupon: c }),
  setShipping: (m) => set({ shipping: m }),
  totals: () => {
    const sub = get().items.reduce((s, i) => s + i.price * i.qty, 0);
    const discount = get().coupon?.amount ?? 0;
    const ship = get().shipping === "express" ? 35 : 0;
    const total = Math.max(0, sub - discount) + ship;
    return { sub, discount, shipping: ship, total };
  },
  count: () => get().items.reduce((c, i) => c + i.qty, 0),
}), { name: "cart" }));


Create file: src/store/wishlistStore.ts

import { create } from "zustand";
import { persist } from "zustand/middleware";

export type WishItem = { id: string; name: string; price: number; image?: string | null; brand?: string | null };

type WishlistState = {
  items: WishItem[];
  add: (p: WishItem) => void;
  remove: (id: string) => void;
  has: (id: string) => boolean;
  count: () => number;
};

export const useWishlistStore = create<WishlistState>()(persist((set, get) => ({
  items: [],
  add: (p) => { if (!get().items.some(i => i.id === p.id)) set({ items: [...get().items, p] }); },
  remove: (id) => set({ items: get().items.filter(i => i.id !== id) }),
  has: (id) => get().items.some(i => i.id === id),
  count: () => get().items.length,
}), { name: "wishlist" }));

2. SAR Currency Icon

Save the provided SVG file as
üìÅ src/assets/icons/sar-symbol.svg

Create file: src/components/common/SARIcon.tsx

import sarSymbol from "../../assets/icons/sar-symbol.svg";

export default function SARIcon({ size=16, className="" }: {size?:number; className?:string}) {
  return <img src={sarSymbol} width={size} height={size} alt="SAR" className={`inline-block align-middle ${className}`} loading="lazy" />;
}


Create file: src/utils/currency.ts

export const formatSAR = (n: number, locale: "ar-SA"|"en-US"="ar-SA") =>
  n.toLocaleString(locale, { minimumFractionDigits: 2, maximumFractionDigits: 2 });

3. Cart & Wishlist Buttons in Navbar

Create file: src/components/cart/CartIconButton.tsx

import { useState } from "react";
import { useCartStore } from "../../store/cartStore";
import MiniCartDrawer from "./MiniCartDrawer";

export default function CartIconButton() {
  const count = useCartStore(s => s.count());
  const [open, setOpen] = useState(false);
  return (
    <>
      <button onClick={() => setOpen(true)} className="relative p-2.5 rounded-lg hover:bg-charcoal-light transition min-w-[44px] min-h-[44px]" aria-label="Cart">
        <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" d="M6 6h15l-1.5 9H7.5L6 6zM7 6V4a3 3 0 016 0v2"/></svg>
        {count > 0 && <span className="absolute -top-1 -end-1 bg-gold text-charcoal text-[11px] px-1.5 rounded-full">{count}</span>}
      </button>
      <MiniCartDrawer open={open} onClose={() => setOpen(false)} />
    </>
  );
}


Create file: src/components/wishlist/WishlistIconButton.tsx

import { Link } from "react-router-dom";
import { useWishlistStore } from "../../store/wishlistStore";

export default function WishlistIconButton() {
  const count = useWishlistStore(s=>s.count());
  return (
    <Link to="/wishlist" className="relative p-2.5 rounded-lg hover:bg-charcoal-light transition min-w-[44px] min-h-[44px]" aria-label="Wishlist">
      <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" d="M20.8 4.6a5 5 0 0 0-7.1 0L12 6.3l-1.7-1.7a5 5 0 0 0-7.1 7.1L12 22l8.8-10.3a5 5 0 0 0 0-7.1z"/></svg>
      {count>0 && <span className="absolute -top-1 -end-1 bg-gold text-charcoal text-[11px] px-1.5 rounded-full">{count}</span>}
    </Link>
  );
}

4. Mini Cart Drawer

Create file: src/components/cart/MiniCartDrawer.tsx
(keep same structure as earlier version ‚Äî responsive and RTL safe)

5. New Pages

Create these pages inside src/pages/:

CartPage.tsx

WishlistPage.tsx

CheckoutPage.tsx

OrderSuccessPage.tsx

Each should use Zustand stores and Tailwind classes for responsive layout.

6. Routing

Add these new routes:

<Route path="/cart" element={<CartPage/>} />
<Route path="/wishlist" element={<WishlistPage/>} />
<Route path="/checkout" element={<CheckoutPage/>} />
<Route path="/order/success" element={<OrderSuccessPage/>} />

7. Replace all occurrences of ‚Äúÿ±ŸäÿßŸÑ‚Äù or ‚ÄúSAR‚Äù text

Replace every price display with:

import { formatSAR } from "@/utils/currency";
import SARIcon from "@/components/common/SARIcon";

<span className="inline-flex items-center gap-1 text-gold font-extrabold">
  {formatSAR(price)} <SARIcon />
</span>

8. Search & Filters Enhancement

Convert the existing filter sidebar into a dropdown modal on mobile.

Add filter ‚Äúchips‚Äù (active filters) on top of the product grid with a ‚ÄúClear all‚Äù button.

Implement a live search autocomplete that shows product names, brands, and thumbnail images.

‚úÖ Acceptance Criteria

Fully functional Cart (add, remove, update quantity).

MiniCartDrawer opens & closes properly and shows correct totals.

Wishlist works with persistence.

Checkout flow (mock version) with shipping, coupon, and total calculation.

All price labels display the SAR SVG icon next to formatted numbers.

Fully responsive and RTL-friendly.

No console errors.

All new files follow project conventions.

Execute the full implementation above exactly as described, ensuring consistency with existing project styling and file structure.