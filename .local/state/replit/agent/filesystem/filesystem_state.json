{"file_contents":{"backend/app/models/__init__.py":{"content":"from .user import User\nfrom .product import Product, ProductImage\nfrom .auction import Auction, Bid\nfrom .order import Order\nfrom .auth_request import AuthRequest\nfrom .ad import Ad\nfrom .ticket import Ticket\nfrom .notification import Notification\nfrom .audit_log import AuditLog\n\n__all__ = [\n    \"User\",\n    \"Product\",\n    \"ProductImage\",\n    \"Auction\",\n    \"Bid\",\n    \"Order\",\n    \"AuthRequest\",\n    \"Ad\",\n    \"Ticket\",\n    \"Notification\",\n    \"AuditLog\",\n]\n","size_bytes":460},"backend/app/schemas/order.py":{"content":"from pydantic import BaseModel\nfrom typing import Optional, Dict, Any\nfrom datetime import datetime\n\n\nclass OrderCreate(BaseModel):\n    product_id: int\n    shipping_address_json: Dict[str, Any]\n    payment_method: str\n    notes: Optional[str] = None\n\n\nclass OrderUpdate(BaseModel):\n    status: str\n    internal_notes: Optional[str] = None\n    dispute_flag: Optional[bool] = None\n\n\nclass OrderResponse(BaseModel):\n    id: int\n    buyer_id: int\n    product_id: int\n    amount: float\n    payment_method: str\n    status: str\n    shipping_address_json: Optional[Dict[str, Any]]\n    notes: Optional[str]\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n","size_bytes":673},"backend/app/routers/uploads.py":{"content":"from fastapi import APIRouter, UploadFile, File, HTTPException, Depends\nfrom PIL import Image\nimport os\nimport secrets\nfrom ..core.config import settings\nfrom ..core.dependencies import get_current_user\n\nrouter = APIRouter(prefix=\"/uploads\", tags=[\"uploads\"])\n\n\n@router.post(\"\")\nasync def upload_file(\n    file: UploadFile = File(...),\n    current_user = Depends(get_current_user)\n):\n    if not file.content_type or not file.content_type.startswith(\"image/\"):\n        raise HTTPException(status_code=400, detail=\"Only image files are allowed\")\n    \n    ext = file.filename.split(\".\")[-1].lower()\n    if ext not in settings.allowed_extensions_list:\n        raise HTTPException(\n            status_code=400,\n            detail=f\"File type not allowed. Allowed: {', '.join(settings.allowed_extensions_list)}\"\n        )\n    \n    filename = f\"{secrets.token_urlsafe(16)}.{ext}\"\n    filepath = os.path.join(settings.UPLOAD_DIR, filename)\n    \n    content = await file.read()\n    \n    if len(content) > settings.MAX_UPLOAD_SIZE:\n        raise HTTPException(status_code=400, detail=\"File too large\")\n    \n    with open(filepath, \"wb\") as f:\n        f.write(content)\n    \n    try:\n        img = Image.open(filepath)\n        img.thumbnail((800, 800))\n        img.save(filepath, optimize=True, quality=85)\n    except Exception as e:\n        os.remove(filepath)\n        raise HTTPException(status_code=400, detail=\"Invalid image file\")\n    \n    return {\"url\": f\"/uploads/{filename}\"}\n","size_bytes":1472},"frontend/src/pages/Register.tsx":{"content":"import { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuthStore } from '../store/authStore';\nimport { useState } from 'react';\n\n// نُبقي فقط البريد وكلمة المرور\nconst registerSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n});\n\ntype RegisterForm = z.infer<typeof registerSchema>;\n\nexport default function Register() {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { register: registerUser } = useAuthStore();\n  const [error, setError] = useState('');\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isSubmitting },\n  } = useForm<RegisterForm>({\n    resolver: zodResolver(registerSchema),\n  });\n\n  const onSubmit = async (data: RegisterForm) => {\n    try {\n      setError('');\n      // نرسل فقط الحقول المطلوبة\n      await registerUser({ email: data.email, password: data.password });\n      navigate('/login');\n    } catch (err: any) {\n      const detail = err?.response?.data?.detail;\n      if (Array.isArray(detail)) {\n        setError(detail.map((e: any) => e.msg).join(', '));\n      } else if (typeof detail === 'string') {\n        setError(detail);\n      } else {\n        setError(t('common.error'));\n      }\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto mt-16\">\n      <div className=\"bg-white p-8 rounded-luxury shadow-luxury-lg\">\n        <h2 className=\"text-3xl font-bold text-charcoal mb-6 text-center\">\n          {t('auth.registerTitle')}\n        </h2>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-luxury mb-4\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\n          {/* البريد الإلكتروني */}\n          <div>\n            <label className=\"block text-charcoal font-medium mb-2\">\n              {t('auth.email')}\n            </label>\n            <input\n              {...register('email')}\n              type=\"email\"\n              autoComplete=\"email\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-luxury focus:ring-2 focus:ring-gold focus:border-transparent\"\n            />\n            {errors.email && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.email.message}</p>\n            )}\n          </div>\n\n          {/* كلمة المرور */}\n          <div>\n            <label className=\"block text-charcoal font-medium mb-2\">\n              {t('auth.password')}\n            </label>\n            <input\n              {...register('password')}\n              type=\"password\"\n              autoComplete=\"new-password\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-luxury focus:ring-2 focus:ring-gold focus:border-transparent\"\n            />\n            {errors.password && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.password.message}</p>\n            )}\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"w-full bg-gold text-charcoal font-semibold py-3 rounded-luxury hover:bg-gold-light transition disabled:opacity-50\"\n          >\n            {isSubmitting ? t('common.loading') : t('common.register')}\n          </button>\n        </form>\n\n        <p className=\"text-center mt-6 text-charcoal-light\">\n          {t('auth.hasAccount')}{' '}\n          <Link to=\"/login\" className=\"text-gold hover:underline\">\n            {t('common.login')}\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3747},"backend/app/core/dependencies.py":{"content":"from fastapi import Depends, HTTPException, status\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom sqlalchemy.orm import Session\nfrom typing import List\nfrom .database import get_db\nfrom .security import decode_access_token\nfrom ..models.user import User\n\nsecurity = HTTPBearer()\n\n\ndef get_current_user(\n    credentials: HTTPAuthorizationCredentials = Depends(security),\n    db: Session = Depends(get_db)\n) -> User:\n    token = credentials.credentials\n    payload = decode_access_token(token)\n    \n    if not payload:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"Invalid authentication credentials\"\n        )\n    \n    user_id = payload.get(\"sub\")\n    if not user_id:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"Invalid token payload\"\n        )\n    \n    try:\n        user_id = int(user_id)\n    except (ValueError, TypeError):\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"Invalid user ID in token\"\n        )\n    \n    user = db.query(User).filter(User.id == user_id).first()\n    if not user:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"User not found\"\n        )\n    \n    if user.status != \"active\":\n        raise HTTPException(\n            status_code=status.HTTP_403_FORBIDDEN,\n            detail=\"User account is suspended\"\n        )\n    \n    return user\n\n\ndef require_roles(required_roles: List[str]):\n    def role_checker(current_user: User = Depends(get_current_user)):\n        user_roles = current_user.roles or []\n        if not any(role in user_roles for role in required_roles):\n            raise HTTPException(\n                status_code=status.HTTP_403_FORBIDDEN,\n                detail=\"Insufficient permissions\"\n            )\n        return current_user\n    return role_checker\n","size_bytes":1950},"replit.md":{"content":"# Aalam Al-Otoor - عالم العطور\n\n## Overview\nAalam Al-Otoor is a production-ready, bilingual (Arabic/English) perfume marketplace and auction platform. It features real-time bidding, authenticity verification, multi-role user management, and a luxury brand aesthetic. The platform aims to provide a comprehensive solution for buying and selling perfumes, with a strong focus on user experience and security.\n\n## User Preferences\n- Language: Bilingual (Arabic primary, English secondary)\n- Design: Luxury aesthetic with premium feel\n- UX: Smooth transitions, intuitive navigation\n- Accessibility: RTL support for Arabic users\n\n## System Architecture\n**UI/UX Decisions:** The platform adopts a luxury brand theme with a Charcoal, Gold, and Ivory color palette. Typography uses Cairo for Arabic and Inter for English, with automatic RTL support. UI components feature a `12px` border-radius for a \"rounded-luxury\" feel and gold-tinted luxury shadows. A mobile-first design approach is implemented using Tailwind breakpoints.\n\n**Technical Implementations:**\n*   **Backend:** Developed with FastAPI (Python 3.11), SQLAlchemy, and PostgreSQL. It includes a robust security module with JWT authentication and bcrypt password hashing, and a role-based access control (RBAC) system supporting six distinct user roles (super_admin, admin, moderator, support, seller, buyer). Real-time auction bidding is handled via WebSockets.\n*   **Frontend:** Built using React 18, TypeScript, Vite, and Tailwind CSS. State management is handled by Zustand, and internationalization is managed with `react-i18next` for seamless Arabic and English language switching, including RTL layout support.\n*   **Feature Specifications:**\n    *   **Authentication & Authorization:** JWT-based authentication, bcrypt hashing, and RBAC with token interceptors.\n    *   **Product Management:** CRUD operations for products with role-based access for sellers and administrators.\n    *   **Live Auctions:** Real-time bidding interface with countdown timers, current bid display, bid validation, and bid history. Utilizes WebSockets for live updates with a polling fallback.\n    *   **Order Management:** Role-based order status workflows for buyers, sellers, and administrators.\n    *   **Buyer Dashboard:** Complete account management with AccountLayout (collapsible sidebar), AccountOverviewPage (profile stats), OrdersPage (order history with filtering), BidsPage (bid history), FavoritesPage (saved products grid), and SupportPage (ticket creation and list). All pages feature bilingual support with locale-sensitive date formatting.\n    *   **Seller Dashboard:** Complete seller management with SellerLayout (collapsible sidebar), SellerDashboardPage (KPI cards and earnings summary), SellerProductsPage (DataTable with search/filter, inline editing, CRUD operations, Add Product modal with image upload, CSV import), SellerAuctionsPage (auction list with filtering), SellerOrdersPage (order management with status updates), SellerEarningsPage (earnings table and chart visualization), and SellerSupportPage (ticket management). All pages feature bilingual support with locale-sensitive formatting.\n    *   **Admin Dashboard:** Complete admin management with AdminLayout (sidebar navigation), AdminDashboardPage (KPI cards and moderation queue), AdminProductsPage (product moderation with approve/reject/hide and bulk actions), AdminAuctionsPage (auction management with extend/end actions and bid logs), AdminOrdersPage (order status management with CSV export), AdminUsersPage (user management with role assignment and verified seller marking), AdminAuthRequestsPage (seller verification workflow with validator assignment), AdminAdsPage (ad banner CRUD for hero/sidebar/strip placements), AdminSupportPage (ticket management with canned replies), AdminReportsPage (sales/commission/auction reports with charts and CSV export), AdminSettingsPage (commission rates, fees, notifications, RBAC matrix), and AdminAuditPage (sensitive actions log with filters). All pages feature bilingual support with locale-sensitive formatting.\n    *   **Internationalization:** Full bilingual support with Arabic as default (RTL) and a language toggle in the navigation bar. All UI strings are externalized into translation keys. All account, seller, and admin pages properly switch between Arabic and English with locale-sensitive date formatting.\n    *   **Currency Display:** All prices display in Saudi Riyal (SAR) with automatic conversion from USD using a 3.75 exchange rate. The `formatPrice()` utility uses \"﷼\" symbol for Arabic and \"SAR\" for English. Admin and seller dashboard pages use explicit \"ريال\" text for enhanced clarity. All dollar symbols ($) have been removed from user-facing displays across all pages including AdminReportsPage, AdminSettingsPage, AdminAuctionsPage, AdminOrdersPage, and SellerAuctionsPage.\n    *   **Brand Identity:** Professional logo system with BrandLogo component supporting multiple variants (monogram, wordmark-en, wordmark-ar, lockup-bilingual) and automatic language-based selection. Navbar uses responsive logo sizing (wordmark on mobile, lockup on desktop). Footer displays language-aware wordmark with quick links to /new, /used, /auctions. PWA-ready with favicon set (32, 180, 192, 512px) and manifest configuration with theme color #C8A24A. Dark mode support via .brand-on-dark CSS utility.\n    *   **Image Uploads:** Secure image upload and optimization.\n    *   **Home Page:** Premium content-rich landing page with 10 sections: Hero carousel (3 slides with autoplay, pause on hover, dots navigation), Promo tiles (3 clickable tiles for New/Used/Auctions), Featured New Products grid (8 items), Live Auctions strip (horizontal carousel with countdown timers), Featured Pre-Owned grid (8 items with discount display), Categories chips (scrollable), Trust badges (4 icons with text), Top Brands carousel (logo slider), Editorial guides (2 cards), Newsletter signup. All sections use mock data from HomeService, feature bilingual support, RTL-safe CSS, loading states, and error handling. Mobile-optimized with 1-column grids and swipeable carousels.\n    *   **Shopping Cart & Checkout:** Complete e-commerce flow with Zustand state management and localStorage persistence. CartStore and WishlistStore handle add/remove/update operations with real-time badge counts. Navbar includes CartIconButton and WishlistIconButton with item counts in both mobile and desktop views. MiniCartDrawer provides quick cart preview with subtotal, total, and checkout CTA. Full pages include: CartPage (quantity controls, item removal, order summary), WishlistPage (product grid with add-to-cart), CheckoutPage (delivery form validation, shipping method selection [standard free/express 35 SAR], payment methods [COD active, card/mada coming soon], coupon system with mock validation [SAVE10/WELCOME20/VIP30], order summary with totals), OrderSuccessPage (order confirmation with next steps). All cart/wishlist features use SAR currency with custom SARIcon component, full RTL support, and complete AR/EN translations. Cart clears on successful checkout.\n    *   **Product Cards UX:** Professional product card design with wishlist heart button (top-left, RTL-safe positioning), clickable image and product name (navigate to detail page), single \"Add to Cart\" CTA button, SAR currency icon display using SVG asset (no text). ProductCard component integrates with useCartStore and useWishlistStore for real-time functionality. Cards feature 4:5 aspect ratio images with hover scale effect, white background with rounded-2xl corners, shadow transitions, and full RTL/LTR support. Applied globally across FeaturedGrid (home), Products, CatalogPage, and FavoritesPage. Currency formatting uses formatSAR() utility for locale-aware display (ar-SA/en-US) with proper decimal formatting.\n    *   **Blog Module:** Professional multilingual blog system (AR/EN) with markdown-based content management. Features include: BlogIndex (pagination 12/page, category/tag filters, text search), BlogPost (full post view with TOC, reading time, breadcrumbs, related posts, share buttons), CategoryPage, TagPage, and AuthorPage. Content stored as markdown files with front-matter metadata. Blog service (blogService.ts) handles parsing with gray-matter, markdown-to-HTML conversion with marked, and HTML sanitization with DOMPurify. Full SEO implementation with react-helmet-async (meta tags, OG/Twitter cards, canonical URLs, hreflang, JSON-LD Article/BreadcrumbList schemas). Navigation integrated in navbar (desktop/mobile) and footer. RTL-aware prose rendering for Arabic content. Buffer polyfill configured in Vite for gray-matter compatibility. Sample blog posts created covering niche perfumes, perfume care, and seasonal fragrances.\n\n**System Design Choices:** The architecture separates backend and frontend into distinct services, communicating via RESTful APIs and WebSockets. Database migrations are managed with Alembic. The frontend uses Vite's proxy capabilities to simplify development and API interaction.\n\n## External Dependencies\n*   **Database:** PostgreSQL (for persistent data storage)\n*   **ORM:** SQLAlchemy (Python ORM for database interaction)\n*   **Database Migrations:** Alembic\n*   **Real-time Communication:** WebSocket protocol\n*   **Internationalization:** `react-i18next` library\n*   **Styling Framework:** Tailwind CSS\n*   **State Management:** Zustand\n*   **HTTP Client:** Axios (for frontend API calls)\n*   **Authentication Tokens:** JSON Web Tokens (JWT)\n*   **Password Hashing:** Bcrypt","size_bytes":9605},"frontend/src/pages/Admin.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../lib/api';\nimport { Product, User } from '../types';\nimport { useUIStore } from '../store/uiStore';\nimport { useAuthStore } from '../store/authStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface DashboardStats {\n  total_products: number;\n  pending_products: number;\n  total_orders: number;\n  pending_orders: number;\n  running_auctions: number;\n}\n\nexport default function Admin() {\n  const { t } = useTranslation();\n  const { language } = useUIStore();\n  const { isAuthenticated } = useAuthStore();\n  const navigate = useNavigate();\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [pendingProducts, setPendingProducts] = useState<Product[]>([]);\n  const [users, setUsers] = useState<User[]>([]);\n  const [activeTab, setActiveTab] = useState<'dashboard' | 'products' | 'users'>('dashboard');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n    fetchDashboardData();\n  }, [activeTab, isAuthenticated]);\n\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      \n      if (activeTab === 'dashboard') {\n        const statsRes = await api.get('/admin/dashboard');\n        setStats(statsRes.data);\n      } else if (activeTab === 'products') {\n        const productsRes = await api.get('/products', { \n          params: { status: 'pending' } \n        });\n        setPendingProducts(productsRes.data);\n      } else if (activeTab === 'users') {\n        const usersRes = await api.get('/admin/users');\n        setUsers(usersRes.data);\n      }\n    } catch (error: any) {\n      if (error.response?.status === 403 || error.response?.status === 401) {\n        alert(t('admin.accessRequired'));\n        navigate('/login');\n      } else {\n        console.error('Failed to fetch admin data:', error);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const moderateProduct = async (productId: number, action: 'approve' | 'reject') => {\n    try {\n      await api.patch(`/products/${productId}/moderate`, { \n        action,\n        status: action === 'approve' ? 'approved' : 'rejected'\n      });\n      fetchDashboardData();\n    } catch (error: any) {\n      alert(error.response?.data?.detail || t('admin.moderateFailed'));\n    }\n  };\n\n  const updateUserStatus = async (userId: number, status: string) => {\n    try {\n      await api.patch(`/admin/users/${userId}`, { status });\n      fetchDashboardData();\n    } catch (error: any) {\n      alert(error.response?.data?.detail || t('admin.updateUserFailed'));\n    }\n  };\n\n  return (\n    <div>\n      <h1 className=\"text-3xl font-bold text-charcoal mb-6\">{t('admin.title')}</h1>\n\n      <div className=\"bg-white rounded-luxury shadow-luxury p-4 mb-6\">\n        <div className=\"flex gap-2 border-b border-gray-200\">\n          <button\n            onClick={() => setActiveTab('dashboard')}\n            className={`px-4 py-2 font-semibold transition ${\n              activeTab === 'dashboard'\n                ? 'text-gold border-b-2 border-gold'\n                : 'text-charcoal-light hover:text-charcoal'\n            }`}\n          >\n            {t('admin.dashboard')}\n          </button>\n          <button\n            onClick={() => setActiveTab('products')}\n            className={`px-4 py-2 font-semibold transition ${\n              activeTab === 'products'\n                ? 'text-gold border-b-2 border-gold'\n                : 'text-charcoal-light hover:text-charcoal'\n            }`}\n          >\n            {t('admin.productModeration')}\n          </button>\n          <button\n            onClick={() => setActiveTab('users')}\n            className={`px-4 py-2 font-semibold transition ${\n              activeTab === 'users'\n                ? 'text-gold border-b-2 border-gold'\n                : 'text-charcoal-light hover:text-charcoal'\n            }`}\n          >\n            {t('admin.userManagement')}\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-charcoal-light\">{t('common.loading')}</p>\n        </div>\n      ) : (\n        <>\n          {activeTab === 'dashboard' && stats && (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <div className=\"bg-white p-6 rounded-luxury shadow-luxury\">\n                <h3 className=\"text-sm font-medium text-charcoal-light mb-2\">{t('admin.totalProducts')}</h3>\n                <p className=\"text-3xl font-bold text-charcoal\">{stats.total_products}</p>\n                <p className=\"text-sm text-gold mt-2\">{stats.pending_products} {t('admin.pendingProducts')}</p>\n              </div>\n\n              <div className=\"bg-white p-6 rounded-luxury shadow-luxury\">\n                <h3 className=\"text-sm font-medium text-charcoal-light mb-2\">{t('admin.totalOrders')}</h3>\n                <p className=\"text-3xl font-bold text-charcoal\">{stats.total_orders}</p>\n                <p className=\"text-sm text-gold mt-2\">{stats.pending_orders} {t('admin.pendingOrders')}</p>\n              </div>\n\n              <div className=\"bg-white p-6 rounded-luxury shadow-luxury\">\n                <h3 className=\"text-sm font-medium text-charcoal-light mb-2\">{t('admin.runningAuctions')}</h3>\n                <p className=\"text-3xl font-bold text-charcoal\">{stats.running_auctions}</p>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'products' && (\n            <div className=\"space-y-4\">\n              {pendingProducts.length === 0 ? (\n                <div className=\"bg-white p-12 rounded-luxury shadow-luxury text-center\">\n                  <p className=\"text-charcoal-light\">{t('admin.noPendingProducts')}</p>\n                </div>\n              ) : (\n                pendingProducts.map(product => {\n                  const name = language === 'ar' ? product.name_ar : product.name_en;\n                  const description = language === 'ar' ? product.description_ar : product.description_en;\n                  const imageUrl = product.image_urls?.[0] || '/placeholder-perfume.jpg';\n\n                  return (\n                    <div key={product.id} className=\"bg-white rounded-luxury shadow-luxury p-6\">\n                      <div className=\"flex items-start gap-4\">\n                        <img\n                          src={imageUrl}\n                          alt={name}\n                          className=\"w-24 h-24 object-cover rounded-luxury\"\n                          onError={(e) => {\n                            e.currentTarget.src = '/placeholder-perfume.jpg';\n                          }}\n                        />\n                        \n                        <div className=\"flex-1\">\n                          <h3 className=\"text-lg font-semibold text-charcoal mb-1\">{name}</h3>\n                          <p className=\"text-sm text-charcoal-light mb-3 line-clamp-2\">{description}</p>\n                          \n                          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n                            <div>\n                              <p className=\"text-xs text-charcoal-light\">{t('common.brand')}</p>\n                              <p className=\"font-semibold text-charcoal\">{product.brand}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-charcoal-light\">{t('common.price')}</p>\n                              <p className=\"font-semibold text-gold\">{formatPrice(product.base_price, language)}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-charcoal-light\">{t('products.type')}</p>\n                              <p className=\"font-semibold text-charcoal\">{product.product_type}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-charcoal-light\">{t('admin.stock')}</p>\n                              <p className=\"font-semibold text-charcoal\">{product.stock_quantity}</p>\n                            </div>\n                          </div>\n\n                          <div className=\"flex gap-2\">\n                            <button\n                              onClick={() => moderateProduct(product.id, 'approve')}\n                              className=\"bg-green-500 text-white px-4 py-2 rounded-luxury text-sm font-semibold hover:bg-green-600 transition\"\n                            >\n                              {t('admin.approve')}\n                            </button>\n                            <button\n                              onClick={() => moderateProduct(product.id, 'reject')}\n                              className=\"bg-red-500 text-white px-4 py-2 rounded-luxury text-sm font-semibold hover:bg-red-600 transition\"\n                            >\n                              {t('admin.reject')}\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n          )}\n\n          {activeTab === 'users' && (\n            <div className=\"bg-white rounded-luxury shadow-luxury overflow-hidden\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-charcoal-light uppercase tracking-wider\">\n                        {t('admin.user')}\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-charcoal-light uppercase tracking-wider\">\n                        {t('auth.email')}\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-charcoal-light uppercase tracking-wider\">\n                        {t('admin.roles')}\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-charcoal-light uppercase tracking-wider\">\n                        {t('orders.status')}\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-charcoal-light uppercase tracking-wider\">\n                        {t('admin.actions')}\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200\">\n                    {users.map(user => (\n                      <tr key={user.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm font-medium text-charcoal\">{user.full_name}</div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm text-charcoal-light\">{user.email}</div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex gap-1\">\n                            {user.roles.map(role => (\n                              <span key={role} className=\"px-2 py-1 text-xs bg-gold-light text-charcoal rounded\">\n                                {role}\n                              </span>\n                            ))}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`px-2 py-1 text-xs rounded-full ${\n                            user.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'\n                          }`}>\n                            {user.status}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                          {user.status === 'active' ? (\n                            <button\n                              onClick={() => updateUserStatus(user.id, 'suspended')}\n                              className=\"text-red-600 hover:text-red-900\"\n                            >\n                              {t('admin.suspend')}\n                            </button>\n                          ) : (\n                            <button\n                              onClick={() => updateUserStatus(user.id, 'active')}\n                              className=\"text-green-600 hover:text-green-900\"\n                            >\n                              {t('admin.activate')}\n                            </button>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","size_bytes":13065},"frontend/src/pages/SellerSupportPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface SupportTicket {\n  id: number;\n  subject: string;\n  subjectAr: string;\n  message: string;\n  messageAr: string;\n  status: 'open' | 'in_progress' | 'closed';\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport default function SellerSupportPage() {\n  const { t, i18n } = useTranslation();\n  const [tickets, setTickets] = useState<SupportTicket[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showNewTicketForm, setShowNewTicketForm] = useState(false);\n  const [newTicket, setNewTicket] = useState({ subject: '', message: '', image: null as File | null });\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    fetchTickets();\n  }, []);\n\n  const fetchTickets = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const mockTickets: SupportTicket[] = [\n      {\n        id: 1,\n        subject: 'Payment Settlement Delay',\n        subjectAr: 'تأخير في تسوية الدفع',\n        message: 'My payment for order 1004 has not been settled yet',\n        messageAr: 'لم يتم تسوية دفعتي للطلب رقم 1004 بعد',\n        status: 'in_progress',\n        createdAt: '2024-10-03T10:00:00Z',\n        updatedAt: '2024-10-04T14:00:00Z',\n      },\n      {\n        id: 2,\n        subject: 'Product Listing Rejected',\n        subjectAr: 'رفض قائمة المنتج',\n        message: 'Why was my product listing rejected?',\n        messageAr: 'لماذا تم رفض قائمة منتجي؟',\n        status: 'closed',\n        createdAt: '2024-09-28T15:30:00Z',\n        updatedAt: '2024-09-29T09:00:00Z',\n      },\n      {\n        id: 3,\n        subject: 'Question about Commission Rates',\n        subjectAr: 'سؤال حول أسعار العمولة',\n        message: 'Can you clarify the commission structure for auctions?',\n        messageAr: 'هل يمكنك توضيح هيكل العمولة للمزادات؟',\n        status: 'open',\n        createdAt: '2024-10-05T12:00:00Z',\n        updatedAt: '2024-10-05T12:00:00Z',\n      },\n    ];\n\n    setTickets(mockTickets);\n    setLoading(false);\n  };\n\n  const handleSubmitTicket = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!newTicket.subject.trim() || !newTicket.message.trim()) {\n      alert(t('support.fillAllFields'));\n      return;\n    }\n\n    setSubmitting(true);\n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    const ticket: SupportTicket = {\n      id: tickets.length + 1,\n      subject: newTicket.subject,\n      subjectAr: newTicket.subject,\n      message: newTicket.message,\n      messageAr: newTicket.message,\n      status: 'open',\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    setTickets([ticket, ...tickets]);\n    setNewTicket({ subject: '', message: '', image: null });\n    setShowNewTicketForm(false);\n    setSubmitting(false);\n  };\n\n  const getStatusColor = (status: SupportTicket['status']) => {\n    switch (status) {\n      case 'open': return 'text-gold bg-gold bg-opacity-10';\n      case 'in_progress': return 'text-blue-600 bg-blue-100';\n      case 'closed': return 'text-gray-600 bg-gray-200';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('seller.support')}</h1>\n          <button\n            onClick={() => setShowNewTicketForm(!showNewTicketForm)}\n            className=\"bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n          >\n            {showNewTicketForm ? t('common.cancel') : t('support.newTicket')}\n          </button>\n        </div>\n\n        {showNewTicketForm && (\n          <form onSubmit={handleSubmitTicket} className=\"mb-6 p-6 bg-sand rounded-luxury\">\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('support.createTicket')}</h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('support.subject')}</label>\n                <input\n                  type=\"text\"\n                  value={newTicket.subject}\n                  onChange={(e) => setNewTicket({ ...newTicket, subject: e.target.value })}\n                  className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n                  placeholder={t('support.subjectPlaceholder')}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('support.message')}</label>\n                <textarea\n                  value={newTicket.message}\n                  onChange={(e) => setNewTicket({ ...newTicket, message: e.target.value })}\n                  rows={6}\n                  className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none resize-none\"\n                  placeholder={t('support.messagePlaceholder')}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">\n                  {t('support.attachment')} ({t('support.optional')})\n                </label>\n                <input\n                  type=\"file\"\n                  onChange={(e) => setNewTicket({ ...newTicket, image: e.target.files?.[0] || null })}\n                  className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n                  accept=\"image/*\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={submitting}\n                className=\"w-full bg-charcoal text-ivory px-6 py-3 rounded-luxury font-semibold hover:bg-charcoal-light transition disabled:opacity-50\"\n              >\n                {submitting ? t('support.submitting') : t('support.submit')}\n              </button>\n            </div>\n          </form>\n        )}\n\n        {tickets.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-taupe\">{t('support.noTickets')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {tickets.map((ticket) => (\n              <div\n                key={ticket.id}\n                className=\"border border-gray-200 rounded-luxury p-4 hover:border-gold transition\"\n              >\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h3 className=\"text-lg font-semibold text-charcoal\">\n                    {i18n.language === 'ar' ? ticket.subjectAr : ticket.subject}\n                  </h3>\n                  <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(ticket.status)}`}>\n                    {t(`support.${ticket.status}`)}\n                  </span>\n                </div>\n                <p className=\"text-charcoal-light mb-3\">\n                  {i18n.language === 'ar' ? ticket.messageAr : ticket.message}\n                </p>\n                <div className=\"flex justify-between items-center text-sm text-taupe\">\n                  <span>{t('support.ticketId')}: {ticket.id}</span>\n                  <span>\n                    {new Date(ticket.createdAt).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                    })}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":8015},"backend/app/models/auction.py":{"content":"from sqlalchemy import Column, Integer, Float, DateTime, ForeignKey, Enum as SQLEnum\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nimport enum\nfrom ..core.database import Base\n\n\nclass AuctionStatus(str, enum.Enum):\n    scheduled = \"scheduled\"\n    running = \"running\"\n    ended = \"ended\"\n\n\nclass Auction(Base):\n    __tablename__ = \"auctions\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    product_id = Column(Integer, ForeignKey(\"products.id\"), nullable=False, unique=True)\n    start_price = Column(Float, nullable=False)\n    min_increment = Column(Float, nullable=False)\n    start_at = Column(DateTime(timezone=True), nullable=False)\n    end_at = Column(DateTime(timezone=True), nullable=False, index=True)\n    current_price = Column(Float, nullable=False)\n    status = Column(SQLEnum(AuctionStatus), default=AuctionStatus.scheduled, index=True)\n    end_extended_count = Column(Integer, default=0)\n    \n    product = relationship(\"Product\", back_populates=\"auction\")\n    bids = relationship(\"Bid\", back_populates=\"auction\", cascade=\"all, delete-orphan\")\n\n\nclass Bid(Base):\n    __tablename__ = \"bids\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    auction_id = Column(Integer, ForeignKey(\"auctions.id\"), nullable=False, index=True)\n    user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    amount = Column(Float, nullable=False)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    auction = relationship(\"Auction\", back_populates=\"bids\")\n    user = relationship(\"User\", back_populates=\"bids\")\n","size_bytes":1625},"frontend/postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"frontend/src/pages/CheckoutPage.tsx":{"content":"import { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCartStore } from \"../store/cartStore\";\nimport { formatPrice } from \"../utils/currency\";\n\nexport default function CheckoutPage() {\n  const { t, i18n } = useTranslation();\n  const navigate = useNavigate();\n  const { items, shipping, setShipping, coupon, setCoupon, totals, clear } = useCartStore();\n  const { sub, discount, shipping: shippingCost, total } = totals();\n  const lang = i18n.language as 'ar' | 'en';\n\n  const [couponCode, setCouponCode] = useState(\"\");\n  const [couponError, setCouponError] = useState(\"\");\n  const [couponLoading, setCouponLoading] = useState(false);\n\n  const [formData, setFormData] = useState({\n    name: \"\",\n    phone: \"\",\n    city: \"\",\n    address: \"\",\n    paymentMethod: \"cod\" as \"card\" | \"applepay\" | \"mada\" | \"cod\",\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const handleApplyCoupon = async () => {\n    if (!couponCode.trim()) {\n      setCouponError(t('checkout.couponRequired'));\n      return;\n    }\n\n    setCouponLoading(true);\n    setCouponError(\"\");\n\n    setTimeout(() => {\n      const validCoupons = [\"SAVE10\", \"WELCOME20\", \"VIP30\"];\n      const amounts = { SAVE10: 10, WELCOME20: 20, VIP30: 30 };\n\n      if (validCoupons.includes(couponCode.toUpperCase())) {\n        setCoupon({\n          code: couponCode.toUpperCase(),\n          amount: amounts[couponCode.toUpperCase() as keyof typeof amounts],\n        });\n        setCouponError(\"\");\n      } else {\n        setCouponError(t('checkout.invalidCoupon'));\n      }\n      setCouponLoading(false);\n    }, 1000);\n  };\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.name.trim()) newErrors.name = t('checkout.nameRequired');\n    if (!formData.phone.trim()) newErrors.phone = t('checkout.phoneRequired');\n    if (!formData.city.trim()) newErrors.city = t('checkout.cityRequired');\n    if (!formData.address.trim()) newErrors.address = t('checkout.addressRequired');\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handlePlaceOrder = async () => {\n    if (!validateForm()) return;\n\n    const orderId = `ORD-${Date.now()}`;\n    clear();\n    navigate(`/order/success?orderId=${orderId}`);\n  };\n\n  if (items.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-sand py-16\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-2xl mx-auto text-center\">\n            <p className=\"text-xl text-taupe mb-8\">{t('checkout.emptyCart')}</p>\n            <button\n              onClick={() => navigate('/new')}\n              className=\"bg-gold text-charcoal px-8 py-4 rounded-luxury hover:bg-gold-hover transition font-semibold\"\n            >\n              {t('cart.continueShopping')}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-sand py-16\">\n      <div className=\"container mx-auto px-4\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-charcoal mb-8\">{t('checkout.title')}</h1>\n\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Delivery Information */}\n            <div className=\"bg-ivory rounded-luxury p-6 shadow-sm\">\n              <h2 className=\"text-2xl font-bold text-charcoal mb-6\">{t('checkout.delivery')}</h2>\n              <div className=\"grid sm:grid-cols-2 gap-4\">\n                <div className=\"sm:col-span-2\">\n                  <label className=\"block text-charcoal font-semibold mb-2\">{t('checkout.fullName')}</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className={`w-full px-4 py-3 rounded-lg border ${\n                      errors.name ? 'border-red-500' : 'border-charcoal-light'\n                    } focus:outline-none focus:ring-2 focus:ring-gold min-h-[44px]`}\n                    placeholder={t('checkout.fullNamePlaceholder')}\n                  />\n                  {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\n                </div>\n\n                <div className=\"sm:col-span-2\">\n                  <label className=\"block text-charcoal font-semibold mb-2\">{t('checkout.phone')}</label>\n                  <input\n                    type=\"tel\"\n                    value={formData.phone}\n                    onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                    className={`w-full px-4 py-3 rounded-lg border ${\n                      errors.phone ? 'border-red-500' : 'border-charcoal-light'\n                    } focus:outline-none focus:ring-2 focus:ring-gold min-h-[44px]`}\n                    placeholder={t('checkout.phonePlaceholder')}\n                  />\n                  {errors.phone && <p className=\"text-red-500 text-sm mt-1\">{errors.phone}</p>}\n                </div>\n\n                <div>\n                  <label className=\"block text-charcoal font-semibold mb-2\">{t('checkout.city')}</label>\n                  <input\n                    type=\"text\"\n                    value={formData.city}\n                    onChange={(e) => setFormData({ ...formData, city: e.target.value })}\n                    className={`w-full px-4 py-3 rounded-lg border ${\n                      errors.city ? 'border-red-500' : 'border-charcoal-light'\n                    } focus:outline-none focus:ring-2 focus:ring-gold min-h-[44px]`}\n                    placeholder={t('checkout.cityPlaceholder')}\n                  />\n                  {errors.city && <p className=\"text-red-500 text-sm mt-1\">{errors.city}</p>}\n                </div>\n\n                <div>\n                  <label className=\"block text-charcoal font-semibold mb-2\">{t('checkout.address')}</label>\n                  <input\n                    type=\"text\"\n                    value={formData.address}\n                    onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n                    className={`w-full px-4 py-3 rounded-lg border ${\n                      errors.address ? 'border-red-500' : 'border-charcoal-light'\n                    } focus:outline-none focus:ring-2 focus:ring-gold min-h-[44px]`}\n                    placeholder={t('checkout.addressPlaceholder')}\n                  />\n                  {errors.address && <p className=\"text-red-500 text-sm mt-1\">{errors.address}</p>}\n                </div>\n              </div>\n            </div>\n\n            {/* Shipping Method */}\n            <div className=\"bg-ivory rounded-luxury p-6 shadow-sm\">\n              <h2 className=\"text-2xl font-bold text-charcoal mb-6\">{t('checkout.shipping')}</h2>\n              <div className=\"space-y-3\">\n                <label className=\"flex items-center gap-4 p-4 border border-charcoal-light rounded-lg cursor-pointer hover:bg-sand transition\">\n                  <input\n                    type=\"radio\"\n                    name=\"shipping\"\n                    checked={shipping === \"standard\"}\n                    onChange={() => setShipping(\"standard\")}\n                    className=\"w-5 h-5 text-gold\"\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-charcoal\">{t('checkout.standardShipping')}</p>\n                    <p className=\"text-sm text-taupe\">{t('checkout.standardShippingDesc')}</p>\n                  </div>\n                  <p className=\"font-bold text-gold\">{t('checkout.free')}</p>\n                </label>\n\n                <label className=\"flex items-center gap-4 p-4 border border-charcoal-light rounded-lg cursor-pointer hover:bg-sand transition\">\n                  <input\n                    type=\"radio\"\n                    name=\"shipping\"\n                    checked={shipping === \"express\"}\n                    onChange={() => setShipping(\"express\")}\n                    className=\"w-5 h-5 text-gold\"\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-charcoal\">{t('checkout.expressShipping')}</p>\n                    <p className=\"text-sm text-taupe\">{t('checkout.expressShippingDesc')}</p>\n                  </div>\n                  <p className=\"font-bold text-gold\">{formatPrice(35, lang)}</p>\n                </label>\n              </div>\n            </div>\n\n            {/* Payment Method */}\n            <div className=\"bg-ivory rounded-luxury p-6 shadow-sm\">\n              <h2 className=\"text-2xl font-bold text-charcoal mb-6\">{t('checkout.payment')}</h2>\n              <div className=\"space-y-3\">\n                <label className=\"flex items-center gap-4 p-4 border border-charcoal-light rounded-lg cursor-pointer hover:bg-sand transition\">\n                  <input\n                    type=\"radio\"\n                    name=\"payment\"\n                    checked={formData.paymentMethod === \"cod\"}\n                    onChange={() => setFormData({ ...formData, paymentMethod: \"cod\" })}\n                    className=\"w-5 h-5 text-gold\"\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-charcoal\">{t('checkout.cashOnDelivery')}</p>\n                  </div>\n                </label>\n\n                <label className=\"flex items-center gap-4 p-4 border border-charcoal-light rounded-lg cursor-pointer hover:bg-sand transition opacity-50\">\n                  <input\n                    type=\"radio\"\n                    name=\"payment\"\n                    checked={formData.paymentMethod === \"card\"}\n                    onChange={() => setFormData({ ...formData, paymentMethod: \"card\" })}\n                    className=\"w-5 h-5 text-gold\"\n                    disabled\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-charcoal\">{t('checkout.creditCard')}</p>\n                    <p className=\"text-sm text-taupe\">{t('checkout.comingSoon')}</p>\n                  </div>\n                </label>\n\n                <label className=\"flex items-center gap-4 p-4 border border-charcoal-light rounded-lg cursor-pointer hover:bg-sand transition opacity-50\">\n                  <input\n                    type=\"radio\"\n                    name=\"payment\"\n                    checked={formData.paymentMethod === \"mada\"}\n                    onChange={() => setFormData({ ...formData, paymentMethod: \"mada\" })}\n                    className=\"w-5 h-5 text-gold\"\n                    disabled\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-charcoal\">{t('checkout.mada')}</p>\n                    <p className=\"text-sm text-taupe\">{t('checkout.comingSoon')}</p>\n                  </div>\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* Order Summary */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-ivory rounded-luxury p-6 shadow-sm sticky top-24\">\n              <h2 className=\"text-2xl font-bold text-charcoal mb-6\">{t('checkout.orderSummary')}</h2>\n\n              <div className=\"space-y-3 mb-6 max-h-60 overflow-y-auto\">\n                {items.map((item) => (\n                  <div key={`${item.id}-${item.variantId || 'default'}`} className=\"flex gap-3\">\n                    <div className=\"w-16 h-16 bg-sand rounded-lg flex-shrink-0 overflow-hidden\">\n                      {item.image ? (\n                        <img src={item.image} alt={item.name} className=\"w-full h-full object-cover\" />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center\">\n                          <svg className=\"w-8 h-8 text-taupe\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path d=\"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6z\" />\n                          </svg>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-semibold text-charcoal truncate\">{item.name}</p>\n                      <p className=\"text-xs text-taupe\">{t('cart.qty')}: {item.qty}</p>\n                      <p className=\"text-sm font-bold text-gold\">{formatPrice(item.price * item.qty, lang)}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Coupon */}\n              <div className=\"mb-6 pb-6 border-b border-charcoal-light\">\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('checkout.coupon')}</label>\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"text\"\n                    value={couponCode}\n                    onChange={(e) => setCouponCode(e.target.value.toUpperCase())}\n                    className=\"flex-1 px-4 py-2 rounded-lg border border-charcoal-light focus:outline-none focus:ring-2 focus:ring-gold min-h-[44px]\"\n                    placeholder={t('checkout.couponPlaceholder')}\n                    disabled={!!coupon}\n                  />\n                  {coupon ? (\n                    <button\n                      onClick={() => {\n                        setCoupon(null);\n                        setCouponCode(\"\");\n                      }}\n                      className=\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition font-semibold min-h-[44px]\"\n                    >\n                      {t('checkout.remove')}\n                    </button>\n                  ) : (\n                    <button\n                      onClick={handleApplyCoupon}\n                      disabled={couponLoading}\n                      className=\"px-4 py-2 bg-charcoal text-ivory rounded-lg hover:bg-charcoal-light transition font-semibold min-h-[44px] disabled:opacity-50\"\n                    >\n                      {couponLoading ? \"...\" : t('checkout.apply')}\n                    </button>\n                  )}\n                </div>\n                {couponError && <p className=\"text-red-500 text-sm mt-2\">{couponError}</p>}\n                {coupon && (\n                  <p className=\"text-green-600 text-sm mt-2\">\n                    {t('checkout.couponApplied')}: {coupon.code} (-{formatPrice(coupon.amount, lang)})\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-3 mb-6\">\n                <div className=\"flex justify-between text-charcoal\">\n                  <span>{t('cart.subtotal')}:</span>\n                  <span className=\"font-semibold\">{formatPrice(sub, lang)}</span>\n                </div>\n                {discount > 0 && (\n                  <div className=\"flex justify-between text-green-600\">\n                    <span>{t('checkout.discount')}:</span>\n                    <span className=\"font-semibold\">-{formatPrice(discount, lang)}</span>\n                  </div>\n                )}\n                <div className=\"flex justify-between text-charcoal\">\n                  <span>{t('cart.shipping')}:</span>\n                  <span className=\"font-semibold\">\n                    {shippingCost > 0 ? formatPrice(shippingCost, lang) : t('checkout.free')}\n                  </span>\n                </div>\n                <div className=\"border-t border-charcoal-light pt-3\">\n                  <div className=\"flex justify-between text-charcoal text-xl font-bold\">\n                    <span>{t('cart.total')}:</span>\n                    <span className=\"text-gold\">{formatPrice(total, lang)}</span>\n                  </div>\n                </div>\n              </div>\n\n              <button\n                onClick={handlePlaceOrder}\n                className=\"w-full bg-gold text-charcoal py-4 rounded-luxury hover:bg-gold-hover transition font-bold text-lg\"\n              >\n                {t('checkout.placeOrder')}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":16217},"frontend/src/pages/ProductDetailPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { useUIStore } from '../store/uiStore';\nimport { fetchProductById, fetchRelatedProducts } from '../services/productService';\nimport { fetchAuctionByProductId } from '../services/auctionService';\nimport ProductCard from '../components/products/ProductCard';\nimport { Product, Auction } from '../types';\nimport { formatPrice } from '../utils/currency';\nimport Countdown from '../components/common/Countdown';\n\nexport default function ProductDetailPage() {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const { language } = useUIStore();\n  \n  const [product, setProduct] = useState<Product | null>(null);\n  const [relatedProducts, setRelatedProducts] = useState<Product[]>([]);\n  const [activeAuction, setActiveAuction] = useState<Auction | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedImage, setSelectedImage] = useState(0);\n\n  useEffect(() => {\n    const loadProduct = async () => {\n      if (!id || isNaN(parseInt(id))) {\n        setLoading(false);\n        setProduct(null);\n        return;\n      }\n      \n      setLoading(true);\n      try {\n        const productData = await fetchProductById(parseInt(id));\n        setProduct(productData);\n        \n        const related = await fetchRelatedProducts(parseInt(id), 4);\n        setRelatedProducts(related);\n        \n        try {\n          const auction = await fetchAuctionByProductId(parseInt(id));\n          if (auction && auction.status === 'active' && new Date(auction.end_time) > new Date()) {\n            setActiveAuction(auction);\n          } else {\n            setActiveAuction(null);\n          }\n        } catch (auctionError) {\n          setActiveAuction(null);\n        }\n      } catch (error) {\n        console.error('Error loading product:', error);\n        setProduct(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    loadProduct();\n  }, [id]);\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('productDetail.notFound')}</p>\n        <button\n          onClick={() => navigate('/new')}\n          className=\"mt-4 bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n        >\n          {t('productDetail.backToShop')}\n        </button>\n      </div>\n    );\n  }\n\n  const name = language === 'ar' ? product.name_ar : product.name_en;\n  const description = language === 'ar' ? product.description_ar : product.description_en;\n  const images = product.image_urls || [];\n  const isInStock = product.stock_quantity > 0;\n\n  return (\n    <div className=\"space-y-12\">\n      {/* Active Auction Banner */}\n      {activeAuction && (\n        <div className=\"bg-gradient-to-r from-gold to-gold-light rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4\">\n            <div className=\"flex-1\">\n              <h3 className=\"text-2xl font-bold text-charcoal mb-2\">{t('auction.activeAuction')}</h3>\n              <div className=\"flex items-center gap-6 text-charcoal\">\n                <div>\n                  <p className=\"text-sm opacity-80\">{t('auction.currentBid')}</p>\n                  <p className=\"text-2xl font-bold\">{formatPrice(activeAuction.current_price, language)}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm opacity-80\">{t('auction.totalBids')}</p>\n                  <p className=\"text-xl font-bold\">{activeAuction.total_bids || 0}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm opacity-80\">{t('auction.timeRemaining')}</p>\n                  <Countdown \n                    endAt={activeAuction.end_time} \n                    compact \n                    className=\"text-xl font-bold text-charcoal\"\n                  />\n                </div>\n              </div>\n            </div>\n            <Link\n              to={`/auction/${activeAuction.id}`}\n              className=\"bg-charcoal text-ivory px-8 py-3 rounded-luxury font-semibold hover:bg-charcoal-light transition whitespace-nowrap\"\n            >\n              {t('auction.goToAuction')}\n            </Link>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* Image Gallery */}\n        <div className=\"space-y-4\">\n          <div className=\"bg-ivory rounded-luxury overflow-hidden aspect-square\">\n            <img\n              src={images[selectedImage] || 'https://via.placeholder.com/600x600?text=Perfume'}\n              alt={name}\n              className=\"w-full h-full object-cover\"\n              onError={(e) => {\n                e.currentTarget.src = 'https://via.placeholder.com/600x600?text=Perfume';\n              }}\n            />\n          </div>\n          \n          {images.length > 1 && (\n            <div className=\"grid grid-cols-4 gap-2\">\n              {images.map((img, index) => (\n                <button\n                  key={index}\n                  onClick={() => setSelectedImage(index)}\n                  className={`aspect-square rounded-luxury overflow-hidden border-2 transition ${\n                    selectedImage === index ? 'border-gold' : 'border-transparent'\n                  }`}\n                >\n                  <img\n                    src={img}\n                    alt={`${name} ${index + 1}`}\n                    className=\"w-full h-full object-cover\"\n                    onError={(e) => {\n                      e.currentTarget.src = 'https://via.placeholder.com/150x150?text=Perfume';\n                    }}\n                  />\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Product Info */}\n        <div className=\"space-y-6\">\n          <div>\n            <p className=\"text-taupe text-sm mb-2\">{product.brand}</p>\n            <h1 className=\"text-h1 text-charcoal mb-4\">{name}</h1>\n            <p className=\"text-charcoal-light leading-relaxed\">{description}</p>\n          </div>\n\n          <div className=\"border-t border-b border-gray-200 py-6 space-y-3\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('productDetail.size')}</span>\n              <span className=\"text-charcoal font-semibold\">{product.size_ml}ml</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('productDetail.concentration')}</span>\n              <span className=\"text-charcoal font-semibold\">{product.concentration}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('productDetail.category')}</span>\n              <span className=\"text-charcoal font-semibold\">{product.category}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('productDetail.stock')}</span>\n              <span className={`font-semibold ${isInStock ? 'text-success' : 'text-alert'}`}>\n                {isInStock ? `${product.stock_quantity} ${t('productDetail.available')}` : t('products.outOfStock')}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"bg-sand rounded-luxury p-6\">\n            <div className=\"flex items-baseline gap-2 mb-4\">\n              <span className=\"text-4xl font-bold text-gold\">{formatPrice(product.base_price, language)}</span>\n            </div>\n\n            <div className=\"space-y-3\">\n              <button\n                disabled={!isInStock}\n                className=\"w-full bg-gold text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-gold-hover transition disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isInStock ? t('productDetail.buyNow') : t('products.outOfStock')}\n              </button>\n              \n              <div className=\"grid grid-cols-2 gap-3\">\n                <button className=\"bg-charcoal text-ivory px-4 py-2 rounded-luxury font-semibold hover:bg-charcoal-light transition\">\n                  {t('productDetail.requestAuth')}\n                </button>\n                <button className=\"bg-white border-2 border-charcoal text-charcoal px-4 py-2 rounded-luxury font-semibold hover:bg-ivory transition\">\n                  {t('productDetail.addFavorite')}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Related Products */}\n      {relatedProducts.length > 0 && (\n        <div className=\"border-t border-gray-200 pt-12\">\n          <h2 className=\"text-h2 text-charcoal mb-6\">{t('productDetail.relatedProducts')}</h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {relatedProducts.map((relatedProduct) => (\n              <ProductCard key={relatedProduct.id} product={relatedProduct} type=\"new\" />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":9336},"frontend/src/pages/SupportPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface SupportTicket {\n  id: number;\n  subject: string;\n  subjectAr: string;\n  message: string;\n  messageAr: string;\n  status: 'open' | 'in_progress' | 'closed';\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport default function SupportPage() {\n  const { t, i18n } = useTranslation();\n  const [tickets, setTickets] = useState<SupportTicket[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showNewTicketForm, setShowNewTicketForm] = useState(false);\n  const [newTicket, setNewTicket] = useState({ subject: '', message: '', file: null as File | null });\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    const fetchTickets = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      const mockTickets: SupportTicket[] = [\n        {\n          id: 1,\n          subject: 'Order Status Inquiry 1001',\n          subjectAr: 'استفسار عن حالة الطلب 1001',\n          message: 'I want to know the status of my order 1001',\n          messageAr: 'أريد معرفة حالة طلبي رقم 1001',\n          status: 'closed',\n          createdAt: '2024-09-20T10:00:00Z',\n          updatedAt: '2024-09-21T14:00:00Z',\n        },\n        {\n          id: 2,\n          subject: 'Payment Issue',\n          subjectAr: 'مشكلة في الدفع',\n          message: 'I encountered a problem during the payment process',\n          messageAr: 'واجهت مشكلة أثناء عملية الدفع',\n          status: 'in_progress',\n          createdAt: '2024-09-28T15:30:00Z',\n          updatedAt: '2024-09-29T09:00:00Z',\n        },\n        {\n          id: 3,\n          subject: 'Product Return Request',\n          subjectAr: 'طلب إرجاع منتج',\n          message: 'I would like to return the product I received',\n          messageAr: 'أرغب في إرجاع المنتج الذي استلمته',\n          status: 'open',\n          createdAt: '2024-10-02T12:00:00Z',\n          updatedAt: '2024-10-02T12:00:00Z',\n        },\n      ];\n\n      setTickets(mockTickets);\n      setLoading(false);\n    };\n\n    fetchTickets();\n  }, []);\n\n  const getStatusColor = (status: SupportTicket['status']) => {\n    switch (status) {\n      case 'open':\n        return 'text-gold bg-gold bg-opacity-10';\n      case 'in_progress':\n        return 'text-blue-600 bg-blue-100';\n      case 'closed':\n        return 'text-gray-600 bg-gray-200';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const handleSubmitTicket = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!newTicket.subject.trim() || !newTicket.message.trim()) {\n      alert(t('support.fillAllFields'));\n      return;\n    }\n\n    setSubmitting(true);\n    \n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    const ticket: SupportTicket = {\n      id: tickets.length + 1,\n      subject: newTicket.subject,\n      subjectAr: newTicket.subject,\n      message: newTicket.message,\n      messageAr: newTicket.message,\n      status: 'open',\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    setTickets([ticket, ...tickets]);\n    setNewTicket({ subject: '', message: '', file: null });\n    setShowNewTicketForm(false);\n    setSubmitting(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('account.support')}</h1>\n          <button\n            onClick={() => setShowNewTicketForm(!showNewTicketForm)}\n            className=\"bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n          >\n            {showNewTicketForm ? t('common.cancel') : t('support.newTicket')}\n          </button>\n        </div>\n\n        {showNewTicketForm && (\n          <form onSubmit={handleSubmitTicket} className=\"mb-6 p-6 bg-sand rounded-luxury\">\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('support.createTicket')}</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">\n                  {t('support.subject')}\n                </label>\n                <input\n                  type=\"text\"\n                  value={newTicket.subject}\n                  onChange={(e) => setNewTicket({ ...newTicket, subject: e.target.value })}\n                  className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n                  placeholder={t('support.subjectPlaceholder')}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">\n                  {t('support.message')}\n                </label>\n                <textarea\n                  value={newTicket.message}\n                  onChange={(e) => setNewTicket({ ...newTicket, message: e.target.value })}\n                  rows={6}\n                  className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none resize-none\"\n                  placeholder={t('support.messagePlaceholder')}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">\n                  {t('support.attachment')} ({t('support.optional')})\n                </label>\n                <input\n                  type=\"file\"\n                  onChange={(e) => setNewTicket({ ...newTicket, file: e.target.files?.[0] || null })}\n                  className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n                  accept=\"image/*,.pdf\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={submitting}\n                className=\"w-full bg-charcoal text-ivory px-6 py-3 rounded-luxury font-semibold hover:bg-charcoal-light transition disabled:opacity-50\"\n              >\n                {submitting ? t('support.submitting') : t('support.submit')}\n              </button>\n            </div>\n          </form>\n        )}\n\n        {tickets.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-taupe\">{t('support.noTickets')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {tickets.map((ticket) => (\n              <div\n                key={ticket.id}\n                className=\"border border-gray-200 rounded-luxury p-4 hover:border-gold transition\"\n              >\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h3 className=\"text-lg font-semibold text-charcoal\">\n                    {i18n.language === 'ar' ? ticket.subjectAr : ticket.subject}\n                  </h3>\n                  <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(ticket.status)}`}>\n                    {t(`support.${ticket.status}`)}\n                  </span>\n                </div>\n                <p className=\"text-charcoal-light mb-3\">\n                  {i18n.language === 'ar' ? ticket.messageAr : ticket.message}\n                </p>\n                <div className=\"flex justify-between items-center text-sm text-taupe\">\n                  <span>\n                    {t('support.ticketId')}: {ticket.id}\n                  </span>\n                  <span>\n                    {new Date(ticket.createdAt).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                    })}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":8209},"frontend/src/store/cartStore.ts":{"content":"import { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\nexport type CartItem = {\n  id: string;\n  name: string;\n  price: number;\n  image?: string | null;\n  brand?: string | null;\n  qty: number;\n  variantId?: string;\n  variantLabel?: string;\n};\n\ntype ShippingMethod = \"standard\" | \"express\";\n\ntype CartState = {\n  items: CartItem[];\n  coupon?: { code: string; amount: number } | null;\n  shipping: ShippingMethod;\n  add: (p: Omit<CartItem, \"qty\">, qty?: number) => void;\n  remove: (id: string, variantId?: string) => void;\n  setQty: (id: string, qty: number, variantId?: string) => void;\n  clear: () => void;\n  setCoupon: (c: CartState[\"coupon\"]) => void;\n  setShipping: (m: ShippingMethod) => void;\n  totals: () => { sub: number; discount: number; shipping: number; total: number };\n  count: () => number;\n};\n\nexport const useCartStore = create<CartState>()(\n  persist(\n    (set, get) => ({\n      items: [],\n      coupon: null,\n      shipping: \"standard\",\n      add: (p, qty = 1) => {\n        const items = [...get().items];\n        const idx = items.findIndex((i) => i.id === p.id && i.variantId === p.variantId);\n        if (idx >= 0) {\n          items[idx].qty += qty;\n        } else {\n          items.push({ ...p, qty });\n        }\n        set({ items });\n      },\n      remove: (id, variantId) =>\n        set({\n          items: get().items.filter((i) => !(i.id === id && i.variantId === variantId)),\n        }),\n      setQty: (id, qty, variantId) =>\n        set({\n          items: get().items.map((i) =>\n            i.id === id && i.variantId === variantId ? { ...i, qty: Math.max(1, qty) } : i\n          ),\n        }),\n      clear: () => set({ items: [], coupon: null }),\n      setCoupon: (c) => set({ coupon: c }),\n      setShipping: (m) => set({ shipping: m }),\n      totals: () => {\n        const sub = get().items.reduce((s, i) => s + i.price * i.qty, 0);\n        const discount = get().coupon?.amount ?? 0;\n        const ship = get().shipping === \"express\" ? 35 : 0;\n        const total = Math.max(0, sub - discount) + ship;\n        return { sub, discount, shipping: ship, total };\n      },\n      count: () => get().items.reduce((c, i) => c + i.qty, 0),\n    }),\n    { name: \"cart\" }\n  )\n);\n","size_bytes":2224},"frontend/src/pages/AdminUsersPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n  role: 'buyer' | 'seller' | 'moderator' | 'admin';\n  status: 'active' | 'suspended';\n  verifiedSeller: boolean;\n  joined: string;\n}\n\nexport default function AdminUsersPage() {\n  const { t, i18n } = useTranslation();\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setUsers([\n      { id: 1, name: 'Ahmed Mohamed', email: 'ahmed@example.com', role: 'seller', status: 'active', verifiedSeller: true, joined: '2024-08-15' },\n      { id: 2, name: 'Fatima Ali', email: 'fatima@example.com', role: 'buyer', status: 'active', verifiedSeller: false, joined: '2024-09-01' },\n      { id: 3, name: 'Omar Hassan', email: 'omar@example.com', role: 'seller', status: 'active', verifiedSeller: false, joined: '2024-09-10' },\n      { id: 4, name: 'Sara Ibrahim', email: 'sara@example.com', role: 'buyer', status: 'suspended', verifiedSeller: false, joined: '2024-07-20' },\n      { id: 5, name: 'Khalid Ahmed', email: 'khalid@example.com', role: 'moderator', status: 'active', verifiedSeller: false, joined: '2024-06-01' },\n    ]);\n    setLoading(false);\n  };\n\n  const handleStatusToggle = (id: number) => {\n    setUsers(users.map(u => u.id === id ? { ...u, status: u.status === 'active' ? 'suspended' : 'active' } : u));\n  };\n\n  const handleRoleChange = (id: number, newRole: User['role']) => {\n    setUsers(users.map(u => u.id === id ? { ...u, role: newRole } : u));\n  };\n\n  const handleVerifyToggle = (id: number) => {\n    setUsers(users.map(u => u.id === id ? { ...u, verifiedSeller: !u.verifiedSeller } : u));\n  };\n\n  const getStatusColor = (status: string) => {\n    return status === 'active' ? 'text-green-600 bg-green-100' : 'text-red-600 bg-red-100';\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h1 className=\"text-h2 text-charcoal mb-6\">{t('admin.users')}</h1>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.name')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.email')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.role')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.verified')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.joined')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((u) => (\n                <tr key={u.id} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{u.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{u.name}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{u.email}</td>\n                  <td className=\"px-4 py-4\">\n                    <select value={u.role} onChange={(e) => handleRoleChange(u.id, e.target.value as User['role'])} className=\"px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-600 border-none\">\n                      <option value=\"buyer\">{t('admin.buyer')}</option>\n                      <option value=\"seller\">{t('admin.seller')}</option>\n                      <option value=\"moderator\">{t('admin.moderator')}</option>\n                      <option value=\"admin\">{t('admin.admin')}</option>\n                    </select>\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(u.status)}`}>{t(`admin.${u.status}`)}</span>\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    {u.role === 'seller' && (\n                      <button onClick={() => handleVerifyToggle(u.id)} className={`px-3 py-1 rounded-full text-sm font-semibold ${u.verifiedSeller ? 'bg-gold text-charcoal' : 'bg-gray-200 text-gray-600'}`}>\n                        {u.verifiedSeller ? '✓ ' : ''}\n                        {t('admin.verifiedSeller')}\n                      </button>\n                    )}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{new Date(u.joined).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', { year: 'numeric', month: 'short' })}</td>\n                  <td className=\"px-4 py-4\">\n                    <button onClick={() => handleStatusToggle(u.id)} className={`text-sm font-semibold ${u.status === 'active' ? 'text-red-600 hover:text-red-700' : 'text-green-600 hover:text-green-700'}`}>\n                      {u.status === 'active' ? t('admin.suspend') : t('admin.activate')}\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5752},"frontend/src/pages/AccountOverviewPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\ninterface AccountStats {\n  totalOrders: number;\n  activeBids: number;\n  favoritesCount: number;\n}\n\ninterface UserProfile {\n  name: string;\n  email: string;\n  joinDate: string;\n}\n\nexport default function AccountOverviewPage() {\n  const { t, i18n } = useTranslation();\n  const [stats, setStats] = useState<AccountStats>({ totalOrders: 0, activeBids: 0, favoritesCount: 0 });\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [showEditModal, setShowEditModal] = useState(false);\n\n  useEffect(() => {\n    const mockProfile: UserProfile = {\n      name: 'Ahmed Mohamed',\n      email: 'ahmed@example.com',\n      joinDate: '2024-01-15',\n    };\n\n    const mockStats: AccountStats = {\n      totalOrders: 12,\n      activeBids: 3,\n      favoritesCount: 8,\n    };\n\n    setProfile(mockProfile);\n    setStats(mockStats);\n  }, []);\n\n  if (!profile) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Profile Card */}\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex justify-between items-start mb-6\">\n          <div>\n            <h1 className=\"text-h2 text-charcoal mb-2\">{t('account.overview')}</h1>\n            <p className=\"text-taupe\">{t('account.welcomeBack')}, {profile.name}</p>\n          </div>\n          <button\n            onClick={() => setShowEditModal(true)}\n            className=\"bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n          >\n            {t('account.editProfile')}\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 pt-6 border-t border-gray-200\">\n          <div>\n            <p className=\"text-taupe text-sm mb-1\">{t('account.fullName')}</p>\n            <p className=\"text-charcoal font-semibold\">{profile.name}</p>\n          </div>\n          <div>\n            <p className=\"text-taupe text-sm mb-1\">{t('account.email')}</p>\n            <p className=\"text-charcoal font-semibold\">{profile.email}</p>\n          </div>\n          <div>\n            <p className=\"text-taupe text-sm mb-1\">{t('account.memberSince')}</p>\n            <p className=\"text-charcoal font-semibold\">\n              {new Date(profile.joinDate).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              })}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <Link\n          to=\"/account/orders\"\n          className=\"bg-white rounded-luxury p-6 shadow-luxury hover:shadow-luxury-hover transition\"\n        >\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 bg-gold bg-opacity-20 rounded-luxury flex items-center justify-center\">\n              <span className=\"text-2xl\">📦</span>\n            </div>\n            <div>\n              <p className=\"text-3xl font-bold text-charcoal\">{stats.totalOrders}</p>\n              <p className=\"text-taupe\">{t('account.totalOrders')}</p>\n            </div>\n          </div>\n        </Link>\n\n        <Link\n          to=\"/account/bids\"\n          className=\"bg-white rounded-luxury p-6 shadow-luxury hover:shadow-luxury-hover transition\"\n        >\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 bg-gold bg-opacity-20 rounded-luxury flex items-center justify-center\">\n              <span className=\"text-2xl\">🔨</span>\n            </div>\n            <div>\n              <p className=\"text-3xl font-bold text-charcoal\">{stats.activeBids}</p>\n              <p className=\"text-taupe\">{t('account.activeBids')}</p>\n            </div>\n          </div>\n        </Link>\n\n        <Link\n          to=\"/account/favorites\"\n          className=\"bg-white rounded-luxury p-6 shadow-luxury hover:shadow-luxury-hover transition\"\n        >\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 bg-gold bg-opacity-20 rounded-luxury flex items-center justify-center\">\n              <span className=\"text-2xl\">❤️</span>\n            </div>\n            <div>\n              <p className=\"text-3xl font-bold text-charcoal\">{stats.favoritesCount}</p>\n              <p className=\"text-taupe\">{t('account.favorites')}</p>\n            </div>\n          </div>\n        </Link>\n      </div>\n\n      {/* Edit Profile Modal (Placeholder) */}\n      {showEditModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-luxury p-6 max-w-md w-full\">\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('account.editProfile')}</h3>\n            <p className=\"text-taupe mb-6\">{t('account.editProfileComingSoon')}</p>\n            <button\n              onClick={() => setShowEditModal(false)}\n              className=\"w-full bg-charcoal text-ivory px-6 py-3 rounded-luxury font-semibold hover:bg-charcoal-light transition\"\n            >\n              {t('common.close')}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":5421},"frontend/src/services/testimonialsService.ts":{"content":"export interface Testimonial {\n  id: number;\n  name: string;\n  avatar?: string;\n  rating: number;\n  text_ar: string;\n  text_en: string;\n  date: string;\n  location_ar?: string;\n  location_en?: string;\n}\n\nexport const listTopTestimonials = async (): Promise<Testimonial[]> => {\n  await new Promise(resolve => setTimeout(resolve, 300));\n\n  return [\n    {\n      id: 1,\n      name: 'أحمد السعيد',\n      rating: 5,\n      text_ar: 'تجربة رائعة! حصلت على عطر أصلي بسعر ممتاز من خلال المزاد. الشحن كان سريع والتغليف احترافي جداً. بالتأكيد سأشتري مرة أخرى.',\n      text_en: 'Amazing experience! Got an authentic perfume at a great price through the auction. Shipping was fast and packaging was very professional. Will definitely buy again.',\n      date: '2024-09-15',\n      location_ar: 'الرياض، السعودية',\n      location_en: 'Riyadh, Saudi Arabia',\n    },\n    {\n      id: 2,\n      name: 'Fatima Al-Harbi',\n      rating: 5,\n      text_ar: 'منصة موثوقة ومميزة. أعجبني نظام التوثيق للبائعين وجودة المنتجات المعروضة. العطور الفاخرة متوفرة بأسعار منافسة.',\n      text_en: 'Trustworthy and excellent platform. I loved the seller verification system and the quality of products offered. Luxury perfumes available at competitive prices.',\n      date: '2024-09-28',\n      location_ar: 'جدة، السعودية',\n      location_en: 'Jeddah, Saudi Arabia',\n    },\n    {\n      id: 3,\n      name: 'Mohammed Al-Qahtani',\n      rating: 5,\n      text_ar: 'أفضل موقع لشراء العطور الفاخرة في المملكة. فزت بمزاد على عطر كريد أفينتوس بسعر رائع. خدمة العملاء ممتازة وسريعة الرد.',\n      text_en: 'Best website for buying luxury perfumes in the Kingdom. Won an auction for Creed Aventus at an amazing price. Customer service is excellent and very responsive.',\n      date: '2024-10-02',\n      location_ar: 'الدمام، السعودية',\n      location_en: 'Dammam, Saudi Arabia',\n    },\n    {\n      id: 4,\n      name: 'Sara Abdullah',\n      rating: 4,\n      text_ar: 'تجربة جيدة بشكل عام. المنتجات أصلية ومضمونة. تمنيت لو كانت هناك خيارات توصيل أسرع، لكن بشكل عام أنا راضية عن الخدمة.',\n      text_en: 'Overall good experience. Products are authentic and guaranteed. I wish there were faster delivery options, but overall I am satisfied with the service.',\n      date: '2024-09-20',\n      location_ar: 'الخبر، السعودية',\n      location_en: 'Khobar, Saudi Arabia',\n    },\n    {\n      id: 5,\n      name: 'Khalid Al-Dosari',\n      rating: 5,\n      text_ar: 'المزادات الحية مثيرة جداً! ربحت عطر توم فورد بسعر أقل من السوق بكثير. النظام واضح وسهل الاستخدام.',\n      text_en: 'Live auctions are very exciting! Won a Tom Ford perfume at a much lower price than the market. The system is clear and easy to use.',\n      date: '2024-10-05',\n      location_ar: 'مكة، السعودية',\n      location_en: 'Makkah, Saudi Arabia',\n    },\n    {\n      id: 6,\n      name: 'Noura Al-Mutairi',\n      rating: 5,\n      text_ar: 'أحب التشكيلة الواسعة من العطور الفاخرة المستعملة بحالة ممتازة. وفرت الكثير مع الحفاظ على الجودة. شكراً عالم العطور!',\n      text_en: 'I love the wide selection of pre-owned luxury perfumes in excellent condition. Saved a lot while maintaining quality. Thank you Aalam Al-Otoor!',\n      date: '2024-09-18',\n      location_ar: 'المدينة المنورة، السعودية',\n      location_en: 'Madinah, Saudi Arabia',\n    },\n    {\n      id: 7,\n      name: 'Abdulrahman Saleh',\n      rating: 4,\n      text_ar: 'خدمة ممتازة ومنتجات أصلية. الموقع سهل الاستخدام باللغتين. أنصح به لمحبي العطور الفاخرة.',\n      text_en: 'Excellent service and authentic products. The website is easy to use in both languages. I recommend it to luxury perfume lovers.',\n      date: '2024-09-25',\n      location_ar: 'أبها، السعودية',\n      location_en: 'Abha, Saudi Arabia',\n    },\n    {\n      id: 8,\n      name: 'Layla Al-Zahrani',\n      rating: 5,\n      text_ar: 'عطوري المفضلة من ديور وشانيل متوفرة هنا بأسعار معقولة. التطبيق سلس والدفع آمن. تجربة تسوق رائعة!',\n      text_en: 'My favorite perfumes from Dior and Chanel are available here at reasonable prices. The app is smooth and payment is secure. Great shopping experience!',\n      date: '2024-10-01',\n      location_ar: 'الطائف، السعودية',\n      location_en: 'Taif, Saudi Arabia',\n    },\n  ];\n};\n","size_bytes":4990},"frontend/src/pages/BidsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface Bid {\n  id: number;\n  auctionId: number;\n  auctionName: string;\n  auctionNameAr: string;\n  yourMaxBid: number;\n  currentPrice: number;\n  status: 'winning' | 'outbid' | 'ended_won' | 'ended_lost';\n  endTime: string;\n}\n\nexport default function BidsPage() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const [bids, setBids] = useState<Bid[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchBids = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      const mockBids: Bid[] = [\n        {\n          id: 1,\n          auctionId: 1,\n          auctionName: 'Chanel No 5',\n          auctionNameAr: 'شانيل رقم 5',\n          yourMaxBid: 147.00,\n          currentPrice: 142.00,\n          status: 'winning',\n          endTime: '2024-10-10T18:00:00Z',\n        },\n        {\n          id: 2,\n          auctionId: 2,\n          auctionName: 'Dior Sauvage Limited Edition',\n          auctionNameAr: 'ديور سوفاج إصدار محدود',\n          yourMaxBid: 180.00,\n          currentPrice: 195.00,\n          status: 'outbid',\n          endTime: '2024-10-11T20:00:00Z',\n        },\n        {\n          id: 3,\n          auctionId: 3,\n          auctionName: 'Tom Ford Oud Wood',\n          auctionNameAr: 'توم فورد أود وود',\n          yourMaxBid: 320.00,\n          currentPrice: 310.00,\n          status: 'ended_won',\n          endTime: '2024-09-30T16:00:00Z',\n        },\n        {\n          id: 4,\n          auctionId: 4,\n          auctionName: 'Creed Aventus Vintage',\n          auctionNameAr: 'كريد أفينتوس فينتاج',\n          yourMaxBid: 400.00,\n          currentPrice: 425.00,\n          status: 'ended_lost',\n          endTime: '2024-09-28T14:00:00Z',\n        },\n      ];\n\n      setBids(mockBids);\n      setLoading(false);\n    };\n\n    fetchBids();\n  }, []);\n\n  const getStatusBadge = (status: Bid['status']) => {\n    switch (status) {\n      case 'winning':\n        return (\n          <span className=\"px-3 py-1 rounded-full text-sm font-semibold text-green-600 bg-green-100\">\n            {t('bids.winning')}\n          </span>\n        );\n      case 'outbid':\n        return (\n          <span className=\"px-3 py-1 rounded-full text-sm font-semibold text-red-600 bg-red-100\">\n            {t('bids.outbid')}\n          </span>\n        );\n      case 'ended_won':\n        return (\n          <span className=\"px-3 py-1 rounded-full text-sm font-semibold text-green-700 bg-green-200\">\n            {t('bids.won')}\n          </span>\n        );\n      case 'ended_lost':\n        return (\n          <span className=\"px-3 py-1 rounded-full text-sm font-semibold text-gray-600 bg-gray-200\">\n            {t('bids.lost')}\n          </span>\n        );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n      <h1 className=\"text-h2 text-charcoal mb-6\">{t('account.bids')}</h1>\n\n      {bids.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-taupe\">{t('account.noBids')}</p>\n          <Link\n            to=\"/auctions\"\n            className=\"inline-block mt-4 bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n          >\n            {t('bids.browseAuctions')}\n          </Link>\n        </div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('bids.auction')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('bids.yourMaxBid')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('bids.currentPrice')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('bids.status')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('bids.endTime')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('bids.actions')}\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {bids.map((bid) => (\n                <tr key={bid.id} className=\"border-b border-gray-100 hover:bg-sand transition\">\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">\n                    {t('lang') === 'ar' ? bid.auctionNameAr : bid.auctionName}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">\n                    {formatPrice(bid.yourMaxBid, language)}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {formatPrice(bid.currentPrice, language)}\n                  </td>\n                  <td className=\"px-4 py-4\">{getStatusBadge(bid.status)}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(bid.endTime).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit',\n                    })}\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <Link\n                      to={`/auction/${bid.auctionId}`}\n                      className=\"text-gold hover:text-gold-hover text-sm font-semibold\"\n                    >\n                      {t('bids.viewAuction')}\n                    </Link>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":6375},"frontend/src/pages/home/HomeSections/FeaturedGrid.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport ProductCard from '../../../components/products/ProductCard';\nimport { Product } from '../../../types';\n\ninterface FeaturedGridProps {\n  title: { ar: string; en: string };\n  products: any[];\n  ctaText: { ar: string; en: string };\n  ctaLink: string;\n  type?: 'new' | 'used';\n}\n\nexport default function FeaturedGrid({\n  title,\n  products,\n  ctaText,\n  ctaLink,\n  type = 'new',\n}: FeaturedGridProps) {\n  const { i18n } = useTranslation();\n  const lang = i18n.language as 'ar' | 'en';\n\n  if (!products.length) return null;\n\n  const transformProduct = (mockProduct: any): Product => ({\n    id: mockProduct.id,\n    seller_id: 1,\n    name_ar: mockProduct.name.ar,\n    name_en: mockProduct.name.en,\n    description_ar: '',\n    description_en: '',\n    product_type: 'perfume',\n    brand: mockProduct.brand,\n    category: 'fragrance',\n    base_price: mockProduct.price_usd,\n    size_ml: 100,\n    concentration: 'EDP',\n    condition: type === 'used' ? 'used' : 'new',\n    stock_quantity: 10,\n    image_urls: [mockProduct.image],\n    status: 'active',\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  });\n\n  return (\n    <section className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-8 md:py-12\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl md:text-3xl font-bold text-charcoal\">{title[lang]}</h2>\n        <Link to={ctaLink} className=\"text-gold hover:text-gold-dark font-semibold flex items-center gap-2\">\n          {ctaText[lang]}\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d={i18n.language === 'ar' ? 'M15 19l-7-7 7-7' : 'M9 5l7 7-7 7'}\n            />\n          </svg>\n        </Link>\n      </div>\n\n      {/* 👇 الشبكة: 2 (موبايل) / 3 (تابلت) / 6 (لابتوب+) */}\n      <div className=\"grid grid-cols-2 gap-3 sm:gap-4 md:grid-cols-3 lg:grid-cols-6\">\n        {products.map((product) => (\n          <ProductCard key={product.id} product={transformProduct(product)} type={type} />\n        ))}\n      </div>\n    </section>\n  );\n}\n","size_bytes":2310},"frontend/src/pages/CatalogPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSearchParams } from 'react-router-dom';\nimport ProductCard from '../components/products/ProductCard';\nimport ProductFilters from '../components/products/ProductFilters';\nimport Pagination from '../components/common/Pagination';\nimport { fetchProducts } from '../services/productService';\nimport { Product } from '../types';\n\ninterface CatalogPageProps {\n  catalogType: 'new' | 'used' | 'auctions';\n}\n\nexport default function CatalogPage({ catalogType }: CatalogPageProps) {\n  const { t } = useTranslation();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [totalPages, setTotalPages] = useState(1);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const [filters, setFilters] = useState({\n    search: searchParams.get('search') || '',\n    brand: searchParams.get('brand') || '',\n    category: searchParams.get('category') || '',\n    condition: catalogType === 'new' ? 'new' : catalogType === 'used' ? 'used' : '',\n    min_price: searchParams.get('min_price') ? parseFloat(searchParams.get('min_price')!) : undefined,\n    max_price: searchParams.get('max_price') ? parseFloat(searchParams.get('max_price')!) : undefined,\n    sort: searchParams.get('sort') || '',\n  });\n\n  useEffect(() => {\n    loadProducts();\n  }, [filters, currentPage, catalogType]);\n\n  const loadProducts = async () => {\n    setLoading(true);\n    try {\n      const result = await fetchProducts({\n        ...filters,\n        condition: filters.condition,\n        page: currentPage,\n        page_size: 12,\n      });\n      setProducts(result.products);\n      setTotalPages(result.total_pages);\n    } catch (error) {\n      console.error('Error loading products:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFilterChange = (newFilters: any) => {\n    setFilters(newFilters);\n    setCurrentPage(1);\n    \n    // Update URL params\n    const params = new URLSearchParams();\n    Object.entries(newFilters).forEach(([key, value]) => {\n      if (value) params.set(key, String(value));\n    });\n    setSearchParams(params);\n  };\n\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const getTitle = () => {\n    if (catalogType === 'new') return t('catalog.newPerfumes');\n    if (catalogType === 'used') return t('catalog.usedPerfumes');\n    return t('catalog.auctionPerfumes');\n  };\n\n  return (\n    <div className=\"space-y-4 sm:space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold text-charcoal\">{getTitle()}</h1>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-4 sm:gap-6\">\n        <div className=\"lg:col-span-1\">\n          <ProductFilters filters={filters} onFilterChange={handleFilterChange} />\n        </div>\n\n        <div className=\"lg:col-span-3\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-taupe\">{t('common.loading')}</p>\n            </div>\n          ) : products.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-taupe\">{t('catalog.noProducts')}</p>\n            </div>\n          ) : (\n            <>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-2 xl:grid-cols-4 gap-3 sm:gap-4 md:gap-6\">\n                {products.map((product) => (\n                  <ProductCard\n                    key={product.id}\n                    product={product}\n                    type={catalogType === 'auctions' ? 'auction' : catalogType}\n                    currentBid={catalogType === 'auctions' ? product.base_price * 1.2 : undefined}\n                  />\n                ))}\n              </div>\n\n              <div className=\"mt-6 sm:mt-8\">\n                <Pagination\n                  currentPage={currentPage}\n                  totalPages={totalPages}\n                  onPageChange={handlePageChange}\n                />\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4268},"frontend/src/pages/home/HomeSections/Testimonials.tsx":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { listTopTestimonials } from \"../../../services/testimonialsService\"; // نفس الخدمة التي أنشأتها/يها\nimport { useTranslation } from \"react-i18next\";\n\nfunction Star({ filled }: { filled: boolean }) {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"\n      className={filled ? \"fill-[#C8A24A]\" : \"fill-[#E0E0E0]\"} aria-hidden>\n      <path d=\"M12 .587l3.668 7.431L24 9.748l-6 5.848 1.417 8.268L12 19.771l-7.417 4.093L6 15.596 0 9.748l8.332-1.73z\"/>\n    </svg>\n  );\n}\n\nexport default function Testimonials() {\n  const { i18n } = useTranslation();\n  const dir = i18n.language === \"ar\" ? \"rtl\" : \"ltr\";\n\n  const [items, setItems] = useState<any[]>([]);\n  const [paused, setPaused] = useState(false);\n  const scrollerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => { listTopTestimonials().then(setItems); }, []);\n\n  // تحريك تلقائي كل 3 ثوانٍ (يوقف عند الوقوف بالماوس أو اللمس)\n  useEffect(() => {\n    const id = setInterval(() => {\n      if (paused || !scrollerRef.current) return;\n      const step = 320; // عرض البطاقة تقريبًا\n      scrollerRef.current.scrollBy({ left: dir === \"rtl\" ? -step : step, behavior: \"smooth\" });\n\n      const el = scrollerRef.current;\n      const atEnd = el.scrollLeft + el.clientWidth + 4 >= el.scrollWidth;\n      const atStart = el.scrollLeft <= 0;\n\n      // لفّة لا نهائية بسيطة\n      if (dir === \"ltr\" && atEnd) el.scrollTo({ left: 0, behavior: \"auto\" });\n      if (dir === \"rtl\" && atStart) el.scrollTo({ left: el.scrollWidth, behavior: \"auto\" });\n    }, 3000);\n    return () => clearInterval(id);\n  }, [paused, dir]);\n\n  if (!items.length) return null;\n\n  return (\n    <section className=\"max-w-6xl mx-auto px-4 pt-12 md:pt-18\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className=\"text-2xl font-bold\">آراء العملاء</h3>\n        <div className=\"text-sm opacity-70\">⭐⭐⭐⭐⭐ 4.8 / 5</div>\n      </div>\n\n      <div\n        ref={scrollerRef}\n        dir={dir}\n        className=\"no-scrollbar flex gap-4 overflow-x-auto snap-x snap-mandatory py-1\"\n        onMouseEnter={() => setPaused(true)}\n        onMouseLeave={() => setPaused(false)}\n        onTouchStart={() => setPaused(true)}\n        onTouchEnd={() => setPaused(false)}\n      >\n        {items.map((t) => (\n          <article\n            key={t.id}\n            className=\"snap-start min-w-[280px] md:min-w-[360px] bg-white rounded-xl shadow p-4 flex flex-col justify-between\"\n            aria-label=\"testimonial\"\n          >\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"w-10 h-10 rounded-full bg-[#EAE4D9] grid place-items-center font-semibold\">\n                {t.name?.slice(0,2)}\n              </div>\n              <div>\n                <div className=\"font-semibold\">{t.name}</div>\n                {t.location_ar && <div className=\"text-xs opacity-70\">{dir === \"rtl\" ? t.location_ar : t.location_en}</div>}\n              </div>\n            </div>\n\n            <p className=\"text-sm leading-6 line-clamp-4 opacity-90\">\n              {dir === \"rtl\" ? t.text_ar : t.text_en}\n            </p>\n\n            <div className=\"mt-3 flex items-center justify-between\">\n              <div className=\"flex gap-1\" aria-label={`rating ${t.rating} of 5`}>\n                {Array.from({ length: 5 }).map((_, i) => <Star key={i} filled={i < t.rating} />)}\n              </div>\n              <span className=\"text-xs opacity-60\">{t.date}</span>\n            </div>\n          </article>\n        ))}\n      </div>\n    </section>\n  );\n}\n\n","size_bytes":3677},"backend/app/routers/auth.py":{"content":"from fastapi import APIRouter, Depends, HTTPException, status\nfrom sqlalchemy.orm import Session\nfrom ..core.database import get_db\nfrom ..core.security import hash_password, verify_password, create_access_token\nfrom ..core.dependencies import get_current_user\nfrom ..models.user import User\nfrom ..schemas.user import UserRegister, UserLogin, Token, UserResponse\n\nrouter = APIRouter(prefix=\"/auth\", tags=[\"auth\"])\n\n\n@router.post(\"/register\", response_model=UserResponse)\ndef register(user_data: UserRegister, db: Session = Depends(get_db)):\n    existing_user = db.query(User).filter(User.email == user_data.email).first()\n    if existing_user:\n        raise HTTPException(\n            status_code=status.HTTP_400_BAD_REQUEST,\n            detail=\"Email already registered\"\n        )\n    \n    new_user = User(\n        name=user_data.name,\n        email=user_data.email,\n        phone=user_data.phone,\n        password_hash=hash_password(user_data.password),\n        roles=[\"buyer\"],\n        status=\"active\"\n    )\n    \n    db.add(new_user)\n    db.commit()\n    db.refresh(new_user)\n    \n    return new_user\n\n\n@router.post(\"/login\", response_model=Token)\ndef login(credentials: UserLogin, db: Session = Depends(get_db)):\n    user = db.query(User).filter(User.email == credentials.email).first()\n    \n    if not user or not verify_password(credentials.password, user.password_hash):\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"Incorrect email or password\"\n        )\n    \n    if user.status != \"active\":\n        raise HTTPException(\n            status_code=status.HTTP_403_FORBIDDEN,\n            detail=\"Account is suspended\"\n        )\n    \n    access_token = create_access_token({\"sub\": user.id, \"roles\": user.roles})\n    \n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n\n\n@router.get(\"/me\", response_model=UserResponse)\ndef get_current_user_info(current_user: User = Depends(get_current_user)):\n    return current_user\n","size_bytes":1992},"frontend/src/pages/Home.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport homeService, { HeroSlide, Brand } from '../services/homeService';\nimport Hero from './home/HomeSections/Hero';\nimport PromoTiles from './home/HomeSections/PromoTiles';\nimport FeaturedGrid from './home/HomeSections/FeaturedGrid';\nimport AuctionsStrip from './home/HomeSections/AuctionsStrip';\nimport TrustBadges from './home/HomeSections/TrustBadges';\nimport BrandsCarousel from './home/HomeSections/BrandsCarousel';\nimport Editorial from './home/HomeSections/Editorial';\nimport Newsletter from './home/HomeSections/Newsletter';\nimport Testimonials from './home/HomeSections/Testimonials';\n\nexport default function Home() {\n  const { t } = useTranslation();\n  const [heroSlides, setHeroSlides] = useState<HeroSlide[]>([]);\n  const [featuredNew, setFeaturedNew] = useState<any[]>([]);\n  const [featuredUsed, setFeaturedUsed] = useState<any[]>([]);\n  const [liveAuctions, setLiveAuctions] = useState<any[]>([]);\n  const [brands, setBrands] = useState<Brand[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadHomeData = async () => {\n      try {\n        setLoading(true);\n        const [slides, newProducts, usedProducts, auctions, brandList] = await Promise.all([\n          homeService.getHeroSlides(),\n          homeService.getFeaturedNew(),\n          homeService.getFeaturedUsed(),\n          homeService.getLiveAuctions(),\n          homeService.getTopBrands()\n        ]);\n\n        setHeroSlides(slides);\n        setFeaturedNew(newProducts);\n        setFeaturedUsed(usedProducts);\n        setLiveAuctions(auctions);\n        setBrands(brandList);\n      } catch (err) {\n        console.error('Error loading home data:', err);\n        setError(t('common.error'));\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadHomeData();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-gold border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-taupe\">{t('common.loading')}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-red-500 mb-4\">{error}</p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"bg-gold text-charcoal px-6 py-2 rounded-lg font-semibold hover:bg-gold-light transition\"\n          >\n            {t('common.back')}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-0\">\n      <Hero slides={heroSlides} />\n      <PromoTiles />\n      <AuctionsStrip auctions={liveAuctions} />\n      <FeaturedGrid\n        title={{ ar: t('home.featuredNew'), en: t('home.featuredNew') }}\n        products={featuredNew}\n        ctaText={{ ar: t('home.viewAllNew'), en: t('home.viewAllNew') }}\n        ctaLink=\"/new\"\n        type=\"new\"\n      />\n      <FeaturedGrid\n        title={{ ar: t('home.editorsPicks'), en: t('home.editorsPicks') }}\n        products={featuredUsed}\n        ctaText={{ ar: t('home.viewAllUsed'), en: t('home.viewAllUsed') }}\n        ctaLink=\"/used\"\n        type=\"used\"\n      />\n      <Testimonials />\n      <BrandsCarousel brands={brands} />\n      <Editorial />\n      <Newsletter />\n      <TrustBadges />\n    </div>\n  );\n}\n","size_bytes":3587},"backend/app/schemas/user.py":{"content":"from pydantic import BaseModel, EmailStr\nfrom typing import List, Optional\nfrom datetime import datetime\n\n\nclass UserRegister(BaseModel):\n    name: str\n    email: EmailStr\n    phone: Optional[str] = None\n    password: str\n\n\nclass UserLogin(BaseModel):\n    email: EmailStr\n    password: str\n\n\nclass UserResponse(BaseModel):\n    id: int\n    name: str\n    email: str\n    phone: Optional[str]\n    roles: List[str]\n    status: str\n    verified_seller: int\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\n\nclass Token(BaseModel):\n    access_token: str\n    token_type: str = \"bearer\"\n","size_bytes":605},"frontend/src/pages/AdminReportsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface SalesData {\n  date: string;\n  sales: number;\n  commission: number;\n  auctions: number;\n}\n\nexport default function AdminReportsPage() {\n  const { t, i18n } = useTranslation();\n  const [data, setData] = useState<SalesData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [summary, setSummary] = useState({ totalSales: 0, totalCommission: 0, totalAuctions: 0 });\n\n  useEffect(() => {\n    fetchReports();\n  }, []);\n\n  const fetchReports = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const mockData: SalesData[] = [\n      { date: '2024-10-01', sales: 12450, commission: 1245, auctions: 5 },\n      { date: '2024-10-02', sales: 8930, commission: 893, auctions: 3 },\n      { date: '2024-10-03', sales: 15670, commission: 1567, auctions: 7 },\n      { date: '2024-10-04', sales: 11200, commission: 1120, auctions: 4 },\n      { date: '2024-10-05', sales: 13800, commission: 1380, auctions: 6 },\n    ];\n\n    const totalSales = mockData.reduce((sum, d) => sum + d.sales, 0);\n    const totalCommission = mockData.reduce((sum, d) => sum + d.commission, 0);\n    const totalAuctions = mockData.reduce((sum, d) => sum + d.auctions, 0);\n\n    setData(mockData);\n    setSummary({ totalSales, totalCommission, totalAuctions });\n    setLoading(false);\n  };\n\n  const handleExportCSV = () => {\n    const csv = [\n      ['Date', 'Sales', 'Commission', 'Auctions'],\n      ...data.map(d => [d.date, d.sales, d.commission, d.auctions])\n    ].map(row => row.join(',')).join('\\n');\n    \n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'reports.csv';\n    a.click();\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('admin.reports')}</h1>\n          <button onClick={handleExportCSV} className=\"bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover\">\n            📥 {t('admin.exportCSV')}\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n          <div className=\"bg-gradient-to-br from-gold to-gold-hover rounded-luxury p-6 shadow-luxury\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <span className=\"text-2xl\">💰</span>\n              <h3 className=\"text-sm text-charcoal\">{t('admin.totalSales')}</h3>\n            </div>\n            <p className=\"text-3xl font-bold text-charcoal\">{summary.totalSales.toLocaleString()} ريال</p>\n          </div>\n\n          <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <span className=\"text-2xl\">📊</span>\n              <h3 className=\"text-sm text-taupe\">{t('admin.totalCommission')}</h3>\n            </div>\n            <p className=\"text-3xl font-bold text-charcoal\">{summary.totalCommission.toLocaleString()} ريال</p>\n          </div>\n\n          <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <span className=\"text-2xl\">🔨</span>\n              <h3 className=\"text-sm text-taupe\">{t('admin.totalAuctions')}</h3>\n            </div>\n            <p className=\"text-3xl font-bold text-charcoal\">{summary.totalAuctions}</p>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.salesChart')}</h3>\n          <div className=\"flex items-end gap-2 h-64\">\n            {data.map((d) => {\n              const maxSales = Math.max(...data.map(item => item.sales));\n              const heightPercent = (d.sales / maxSales) * 100;\n              \n              return (\n                <div key={d.date} className=\"flex-1 flex flex-col items-center gap-2\">\n                  <div\n                    className=\"w-full bg-gradient-to-t from-gold to-gold-hover rounded-t-lg transition-all hover:opacity-80 cursor-pointer relative group\"\n                    style={{ height: `${heightPercent}%` }}\n                  >\n                    <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-charcoal text-ivory text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap\">\n                      {d.sales.toLocaleString()} ريال\n                    </div>\n                  </div>\n                  <span className=\"text-xs text-taupe\">\n                    {new Date(d.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', { month: 'short', day: 'numeric' })}\n                  </span>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.date')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.sales')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.commission')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.auctions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.map((d) => (\n                <tr key={d.date} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{new Date(d.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">{d.sales.toLocaleString()} ريال</td>\n                  <td className=\"px-4 py-4 text-gold font-semibold\">{d.commission.toLocaleString()} ريال</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{d.auctions}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6492},"frontend/src/services/homeService.ts":{"content":"export interface HeroSlide {\n  id: number;\n  image: string;\n  title: { ar: string; en: string };\n  subtitle: { ar: string; en: string };\n  primaryCta: { text: { ar: string; en: string }; link: string };\n  secondaryCta?: { text: { ar: string; en: string }; link: string };\n}\n\nexport interface Category {\n  id: number;\n  name: { ar: string; en: string };\n  slug: string;\n}\n\nexport interface Brand {\n  id: number;\n  name: string;\n  logo: string;\n}\n\nclass HomeService {\n  async getHeroSlides(): Promise<HeroSlide[]> {\n    return [\n      {\n        id: 1,\n        image: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=1920&q=80',\n        title: { ar: 'اكتشف عالم العطور الفاخرة', en: 'Discover Luxury Perfumes' },\n        subtitle: { ar: 'عطور أصلية 100% من أرقى البيوتات العالمية', en: '100% Authentic Fragrances from Top Houses' },\n        primaryCta: { text: { ar: 'تسوق الآن', en: 'Shop Now' }, link: '/products' },\n        secondaryCta: { text: { ar: 'المزادات الحية', en: 'Live Auctions' }, link: '/auctions' }\n      },\n      {\n        id: 2,\n        image: 'https://images.unsplash.com/photo-1523293182086-7651a899d37f?w=1920&q=80',\n        title: { ar: 'مزادات حية على عطور نادرة', en: 'Live Auctions on Rare Fragrances' },\n        subtitle: { ar: 'شارك في المزادات واربح عطورك المفضلة بأفضل الأسعار', en: 'Bid and Win Your Favorite Scents at Best Prices' },\n        primaryCta: { text: { ar: 'شاهد المزادات', en: 'View Auctions' }, link: '/auctions' },\n        secondaryCta: { text: { ar: 'كيف تزايد', en: 'How to Bid' }, link: '/help' }\n      },\n      {\n        id: 3,\n        image: 'https://images.unsplash.com/photo-1585386959984-a4155224a1ad?w=1920&q=80',\n        title: { ar: 'عطور مستعملة معتمدة', en: 'Certified Pre-Owned Perfumes' },\n        subtitle: { ar: 'عطور فاخرة مستعملة بحالة ممتازة وأسعار لا تقاوم', en: 'Premium Pre-Owned Fragrances in Excellent Condition' },\n        primaryCta: { text: { ar: 'تصفح المستعمل', en: 'Browse Pre-Owned' }, link: '/used' },\n        secondaryCta: { text: { ar: 'دليل الشراء', en: 'Buying Guide' }, link: '/help' }\n      }\n    ];\n  }\n\n  async getFeaturedNew(): Promise<any[]> {\n    const baseProducts = [\n      { id: 1, name: { ar: 'توم فورد عود وود', en: 'Tom Ford Oud Wood' }, brand: 'Tom Ford', price_usd: 350, image: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=600&q=80', rating: 4.8, reviews: 156 },\n      { id: 2, name: { ar: 'كريد أفينتوس', en: 'Creed Aventus' }, brand: 'Creed', price_usd: 435, image: 'https://images.unsplash.com/photo-1523293182086-7651a899d37f?w=600&q=80', rating: 4.9, reviews: 203 },\n      { id: 3, name: { ar: 'ديور سوفاج', en: 'Dior Sauvage' }, brand: 'Dior', price_usd: 140, image: 'https://images.unsplash.com/photo-1585386959984-a4155224a1ad?w=600&q=80', rating: 4.7, reviews: 421 },\n      { id: 4, name: { ar: 'شانيل بلو دو شانيل', en: 'Chanel Bleu de Chanel' }, brand: 'Chanel', price_usd: 150, image: 'https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=600&q=80', rating: 4.8, reviews: 312 },\n      { id: 5, name: { ar: 'يوم سان لوران واي', en: 'YSL Y Eau de Parfum' }, brand: 'YSL', price_usd: 120, image: 'https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?w=600&q=80', rating: 4.6, reviews: 189 },\n      { id: 6, name: { ar: 'جورجيو أرماني أكوا دي جيو', en: 'Armani Acqua di Gio' }, brand: 'Armani', price_usd: 110, image: 'https://images.unsplash.com/photo-1595425970377-c9703cf48b6d?w=600&q=80', rating: 4.7, reviews: 267 },\n      { id: 7, name: { ar: 'برادا لونا روسا', en: 'Prada Luna Rossa' }, brand: 'Prada', price_usd: 130, image: 'https://images.unsplash.com/photo-1590736969955-71cc94901144?w=600&q=80', rating: 4.5, reviews: 145 },\n      { id: 8, name: { ar: 'فرزاتشي إيروس', en: 'Versace Eros' }, brand: 'Versace', price_usd: 95, image: 'https://images.unsplash.com/photo-1594035910387-fea47794261f?w=600&q=80', rating: 4.6, reviews: 198 }\n    ];\n    return baseProducts;\n  }\n\n  async getFeaturedUsed(): Promise<any[]> {\n    const baseProducts = [\n      { id: 101, name: { ar: 'توم فورد توباكو فانيل', en: 'Tom Ford Tobacco Vanille' }, brand: 'Tom Ford', price_usd: 220, original_price_usd: 310, image: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=600&q=80', condition: 'Like New', fill_level: '95%' },\n      { id: 102, name: { ar: 'كريد سيلفر ماونتن', en: 'Creed Silver Mountain Water' }, brand: 'Creed', price_usd: 280, original_price_usd: 395, image: 'https://images.unsplash.com/photo-1523293182086-7651a899d37f?w=600&q=80', condition: 'Excellent', fill_level: '90%' },\n      { id: 103, name: { ar: 'لو لابو سانتال 33', en: 'Le Labo Santal 33' }, brand: 'Le Labo', price_usd: 180, original_price_usd: 260, image: 'https://images.unsplash.com/photo-1585386959984-a4155224a1ad?w=600&q=80', condition: 'Very Good', fill_level: '85%' },\n      { id: 104, name: { ar: 'بيريدو غيبسي ووتر', en: 'Byredo Gypsy Water' }, brand: 'Byredo', price_usd: 150, original_price_usd: 220, image: 'https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=600&q=80', condition: 'Excellent', fill_level: '92%' },\n      { id: 105, name: { ar: 'مايزون فرانسيس باكارات 540', en: 'MFK Baccarat Rouge 540' }, brand: 'MFK', price_usd: 230, original_price_usd: 325, image: 'https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?w=600&q=80', condition: 'Like New', fill_level: '98%' },\n      { id: 106, name: { ar: 'أميواج انترلود مان', en: 'Amouage Interlude Man' }, brand: 'Amouage', price_usd: 200, original_price_usd: 300, image: 'https://images.unsplash.com/photo-1595425970377-c9703cf48b6d?w=600&q=80', condition: 'Very Good', fill_level: '88%' },\n      { id: 107, name: { ar: 'نيشان هاكود', en: 'Nishane Hacivat' }, brand: 'Nishane', price_usd: 140, original_price_usd: 195, image: 'https://images.unsplash.com/photo-1590736969955-71cc94901144?w=600&q=80', condition: 'Excellent', fill_level: '93%' },\n      { id: 108, name: { ar: 'بارفومز دو مارلي لايتون', en: 'PDM Layton' }, brand: 'PDM', price_usd: 190, original_price_usd: 275, image: 'https://images.unsplash.com/photo-1594035910387-fea47794261f?w=600&q=80', condition: 'Like New', fill_level: '96%' }\n    ];\n    return baseProducts;\n  }\n\n  async getLiveAuctions(): Promise<any[]> {\n    const now = Date.now();\n    return [\n      { id: 201, product_name: { ar: 'كريد أفينتوس', en: 'Creed Aventus' }, current_bid_usd: 320, bids_count: 12, end_time: new Date(now + 3600000 * 2).toISOString(), image: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=400&q=80' },\n      { id: 202, product_name: { ar: 'توم فورد لوست شيري', en: 'Tom Ford Lost Cherry' }, current_bid_usd: 280, bids_count: 8, end_time: new Date(now + 3600000 * 5).toISOString(), image: 'https://images.unsplash.com/photo-1523293182086-7651a899d37f?w=400&q=80' },\n      { id: 203, product_name: { ar: 'رويا دوف كولونيا', en: 'Roja Dove Elysium' }, current_bid_usd: 410, bids_count: 15, end_time: new Date(now + 3600000 * 8).toISOString(), image: 'https://images.unsplash.com/photo-1585386959984-a4155224a1ad?w=400&q=80' },\n      { id: 204, product_name: { ar: 'كريد رويال عود', en: 'Creed Royal Oud' }, current_bid_usd: 290, bids_count: 10, end_time: new Date(now + 3600000 * 12).toISOString(), image: 'https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=400&q=80' },\n      { id: 205, name: { ar: 'بوند نمبر 9', en: 'Bond No. 9 Dubai' }, current_bid_usd: 195, bids_count: 6, end_time: new Date(now + 3600000 * 18).toISOString(), image: 'https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?w=400&q=80' }\n    ];\n  }\n\n  async getTopBrands(): Promise<Brand[]> {\n    return [\n      { id: 1, name: 'Tom Ford', logo: 'https://logo.clearbit.com/tomford.com' },\n      { id: 2, name: 'Creed', logo: 'https://logo.clearbit.com/creedfragrances.com' },\n      { id: 3, name: 'Dior', logo: 'https://logo.clearbit.com/dior.com' },\n      { id: 4, name: 'Chanel', logo: 'https://logo.clearbit.com/chanel.com' },\n      { id: 5, name: 'YSL', logo: 'https://logo.clearbit.com/ysl.com' },\n      { id: 6, name: 'Armani', logo: 'https://logo.clearbit.com/armani.com' },\n      { id: 7, name: 'Prada', logo: 'https://logo.clearbit.com/prada.com' },\n      { id: 8, name: 'Versace', logo: 'https://logo.clearbit.com/versace.com' },\n      { id: 9, name: 'Le Labo', logo: 'https://logo.clearbit.com/lelabofragrances.com' },\n      { id: 10, name: 'Byredo', logo: 'https://logo.clearbit.com/byredo.com' },\n      { id: 11, name: 'MFK', logo: 'https://logo.clearbit.com/maisonfranciskurkdjian.com' },\n      { id: 12, name: 'Amouage', logo: 'https://logo.clearbit.com/amouage.com' }\n    ];\n  }\n\n  async getCategories(): Promise<Category[]> {\n    return [\n      { id: 1, name: { ar: 'عود', en: 'Oud' }, slug: 'oud' },\n      { id: 2, name: { ar: 'حمضيات', en: 'Citrus' }, slug: 'citrus' },\n      { id: 3, name: { ar: 'عنبر', en: 'Amber' }, slug: 'amber' },\n      { id: 4, name: { ar: 'خشبي', en: 'Woody' }, slug: 'woody' },\n      { id: 5, name: { ar: 'زهري', en: 'Floral' }, slug: 'floral' },\n      { id: 6, name: { ar: 'شرقي', en: 'Oriental' }, slug: 'oriental' },\n      { id: 7, name: { ar: 'منعش', en: 'Fresh' }, slug: 'fresh' },\n      { id: 8, name: { ar: 'حار', en: 'Spicy' }, slug: 'spicy' }\n    ];\n  }\n}\n\nexport default new HomeService();\n","size_bytes":9795},"frontend/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');\n@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  html[dir=\"rtl\"] body {\n    direction: rtl;\n    text-align: right;\n  }\n  \n  html[dir=\"ltr\"] body {\n    direction: ltr;\n    text-align: left;\n  }\n\n  html[lang=\"ar\"] body {\n    font-family: 'Cairo', sans-serif;\n  }\n  \n  html[lang=\"en\"] body {\n    font-family: 'Inter', sans-serif;\n  }\n  \n  body {\n    font-size: 16px;\n    line-height: 1.5;\n    font-weight: 400;\n    @apply text-charcoal bg-ivory;\n  }\n\n  h1 {\n    font-size: 24px;\n    line-height: 1.2;\n    font-weight: 700;\n  }\n\n  @media (min-width: 640px) {\n    h1 {\n      font-size: 32px;\n    }\n  }\n\n  h2 {\n    font-size: 20px;\n    line-height: 1.3;\n    font-weight: 600;\n  }\n\n  @media (min-width: 640px) {\n    h2 {\n      font-size: 24px;\n    }\n  }\n  \n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n}\n\n@layer utilities {\n  .rounded-luxury {\n    border-radius: 12px;\n  }\n  \n  .shadow-soft {\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  }\n  \n  .shadow-soft-lg {\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\n  }\n\n  .table-responsive {\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .table-responsive table {\n    min-width: 600px;\n  }\n\n  @media (max-width: 768px) {\n    .table-responsive table {\n      font-size: 14px;\n    }\n    \n    .table-responsive th,\n    .table-responsive td {\n      padding: 0.5rem !important;\n      min-height: 44px;\n    }\n  }\n\n  .safe-area-bottom {\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n\n  .sticky-mobile-bar {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 40;\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n\n  @media (max-width: 480px) {\n    body {\n      overflow-x: hidden;\n    }\n    \n    * {\n      -webkit-tap-highlight-color: rgba(200, 162, 74, 0.2);\n    }\n  }\n\n  .brand-on-dark {\n    filter: brightness(1.1) saturate(1.2);\n  }\n\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .animate-fade-in {\n    animation: fade-in 0.6s ease-out;\n  }\n\n  .animate-fade-in-delay {\n    animation: fade-in 0.6s ease-out 0.2s both;\n  }\n}\n.no-scrollbar::-webkit-scrollbar { display: none; }\n.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }\n","size_bytes":2494},"frontend/src/pages/HelpPage.tsx":{"content":"import { useTranslation } from 'react-i18next';\n\nexport default function HelpPage() {\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <h1 className=\"text-h1 text-charcoal mb-8\">{t('footer.helpCenter')}</h1>\n      <div className=\"bg-white rounded-luxury p-8 shadow-soft\">\n        <p className=\"text-charcoal mb-4\">{t('common.comingSoon')}</p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":417},"frontend/src/pages/FavoritesPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ProductCard from '../components/products/ProductCard';\nimport { Product } from '../types';\n\nexport default function FavoritesPage() {\n  const { t } = useTranslation();\n  const [favorites, setFavorites] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchFavorites = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      const mockFavorites: Product[] = [\n        {\n          id: 1,\n          seller_id: 1,\n          name_ar: 'شانيل رقم 5',\n          name_en: 'Chanel No 5',\n          description_ar: 'عطر كلاسيكي فاخر',\n          description_en: 'Classic luxury perfume',\n          product_type: 'eau_de_parfum',\n          brand: 'Chanel',\n          category: 'floral',\n          base_price: 150.00,\n          size_ml: 100,\n          concentration: 'EDP',\n          stock_quantity: 10,\n          image_urls: ['https://via.placeholder.com/300x300?text=Chanel+No+5'],\n          status: 'published',\n          created_at: '2024-01-01T00:00:00Z',\n          updated_at: '2024-01-01T00:00:00Z',\n        },\n        {\n          id: 2,\n          seller_id: 1,\n          name_ar: 'ديور سوفاج',\n          name_en: 'Dior Sauvage',\n          description_ar: 'عطر خشبي حار',\n          description_en: 'Woody spicy fragrance',\n          product_type: 'eau_de_toilette',\n          brand: 'Dior',\n          category: 'woody',\n          base_price: 120.00,\n          size_ml: 100,\n          concentration: 'EDT',\n          stock_quantity: 15,\n          image_urls: ['https://via.placeholder.com/300x300?text=Dior+Sauvage'],\n          status: 'published',\n          created_at: '2024-01-02T00:00:00Z',\n          updated_at: '2024-01-02T00:00:00Z',\n        },\n        {\n          id: 3,\n          seller_id: 2,\n          name_ar: 'توم فورد أود وود',\n          name_en: 'Tom Ford Oud Wood',\n          description_ar: 'عطر شرقي فاخر',\n          description_en: 'Luxurious oriental scent',\n          product_type: 'eau_de_parfum',\n          brand: 'Tom Ford',\n          category: 'oriental',\n          base_price: 280.00,\n          size_ml: 50,\n          concentration: 'EDP',\n          stock_quantity: 8,\n          image_urls: ['https://via.placeholder.com/300x300?text=Tom+Ford+Oud'],\n          status: 'published',\n          created_at: '2024-01-03T00:00:00Z',\n          updated_at: '2024-01-03T00:00:00Z',\n        },\n        {\n          id: 4,\n          seller_id: 2,\n          name_ar: 'كريد أفينتوس',\n          name_en: 'Creed Aventus',\n          description_ar: 'عطر فواكه منعش',\n          description_en: 'Fresh fruity fragrance',\n          product_type: 'eau_de_parfum',\n          brand: 'Creed',\n          category: 'fruity',\n          base_price: 350.00,\n          size_ml: 100,\n          concentration: 'EDP',\n          stock_quantity: 5,\n          image_urls: ['https://via.placeholder.com/300x300?text=Creed+Aventus'],\n          status: 'published',\n          created_at: '2024-01-04T00:00:00Z',\n          updated_at: '2024-01-04T00:00:00Z',\n        },\n      ];\n\n      setFavorites(mockFavorites);\n      setLoading(false);\n    };\n\n    fetchFavorites();\n  }, []);\n\n  const handleRemoveFavorite = (productId: number) => {\n    setFavorites(favorites.filter(p => p.id !== productId));\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n      <h1 className=\"text-h2 text-charcoal mb-6\">{t('account.favorites')}</h1>\n\n      {favorites.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-xl text-taupe mb-2\">❤️</p>\n          <p className=\"text-taupe mb-4\">{t('account.noFavorites')}</p>\n          <a\n            href=\"/new\"\n            className=\"inline-block bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n          >\n            {t('favorites.browseProducts')}\n          </a>\n        </div>\n      ) : (\n        <>\n          <p className=\"text-taupe mb-6\">\n            {t('favorites.count', { count: favorites.length })}\n          </p>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {favorites.map((product) => (\n              <div key={product.id} className=\"relative\">\n                <ProductCard product={product} />\n                <button\n                  onClick={() => handleRemoveFavorite(product.id)}\n                  className=\"absolute top-2 left-2 bg-red-500 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-red-600 transition z-10\"\n                  title={t('favorites.remove')}\n                >\n                  ×\n                </button>\n              </div>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","size_bytes":5067},"backend/app/models/audit_log.py":{"content":"from sqlalchemy import Column, Integer, String, DateTime, ForeignKey, JSON\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nfrom ..core.database import Base\n\n\nclass AuditLog(Base):\n    __tablename__ = \"audit_logs\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    admin_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    entity = Column(String, nullable=False, index=True)\n    entity_id = Column(Integer, nullable=False)\n    action = Column(String, nullable=False)\n    meta_json = Column(JSON)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    admin = relationship(\"User\", back_populates=\"audit_logs\")\n","size_bytes":712},"frontend/src/pages/home/HomeSections/PromoTiles.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nconst promoTiles = [\n  {\n    id: 'new',\n    title: { ar: 'وصل حديثاً', en: 'New Arrivals' },\n    description: { ar: 'أحدث العطور الفاخرة', en: 'Latest Luxury Fragrances' },\n    link: '/new',\n    bgColor: 'bg-gold',\n    textColor: 'text-charcoal',\n  },\n  {\n    id: 'used',\n    title: { ar: 'عطور مستعملة', en: 'Pre-Owned' },\n    description: { ar: 'أسعار لا تقاوم', en: 'Unbeatable Prices' },\n    link: '/used',\n    bgColor: 'bg-charcoal-light',\n    textColor: 'text-ivory',\n  },\n  {\n    id: 'auctions',\n    title: { ar: 'مزادات حية', en: 'Live Auctions' },\n    description: { ar: 'زايد واربح', en: 'Bid & Win' },\n    link: '/auctions',\n    bgColor: 'bg-sand',\n    textColor: 'text-charcoal',\n  },\n];\n\nexport default function PromoTiles() {\n  const { i18n } = useTranslation();\n  const lang = (i18n.language as 'ar' | 'en') || 'ar';\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-8 md:py-12\">\n      {/* الجوال: أزرار في الوسط مع التفاف عند ضيق العرض */}\n      <div className=\"sm:hidden\">\n        <div className=\"flex flex-wrap justify-center gap-2\">\n          {promoTiles.map((tile) => (\n            <Link\n              key={tile.id}\n              to={tile.link}\n              aria-label={tile.title[lang]}\n              className={[\n                tile.bgColor,\n                tile.textColor,\n                'inline-flex items-center justify-center',\n                'px-4 h-11 rounded-luxury font-semibold',\n                'text-sm whitespace-nowrap w-auto max-w-none',\n                'shadow-sm hover:shadow transition active:scale-95',\n              ].join(' ')}\n            >\n              {tile.title[lang]}\n            </Link>\n          ))}\n        </div>\n      </div>\n\n      {/* تابلت/ديسكتوب: بطاقات كبيرة */}\n      <div className=\"hidden sm:grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6\">\n        {promoTiles.map((tile) => (\n          <Link\n            key={tile.id}\n            to={tile.link}\n            className={[\n              tile.bgColor,\n              tile.textColor,\n              'rounded-lg p-8 md:p-10 hover:scale-105 transition-transform shadow-luxury',\n            ].join(' ')}\n          >\n            <h3 className=\"text-2xl md:text-3xl font-bold mb-2\">\n              {tile.title[lang]}\n            </h3>\n            <p className=\"text-sm md:text-base opacity-90\">\n              {tile.description[lang]}\n            </p>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":2666},"frontend/src/pages/UsedPerfumes.tsx":{"content":"import CatalogPage from './CatalogPage';\n\nexport default function UsedPerfumes() {\n  return <CatalogPage catalogType=\"used\" />;\n}\n","size_bytes":130},"frontend/src/pages/home/HomeSections/CategoriesChips.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Category } from '../../../services/homeService';\n\ninterface CategoriesChipsProps {\n  categories: Category[];\n}\n\nexport default function CategoriesChips({ categories }: CategoriesChipsProps) {\n  const { t, i18n } = useTranslation();\n  const lang = i18n.language as 'ar' | 'en';\n\n  if (!categories.length) return null;\n\n  return (\n    <section className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-8 md:py-12\">\n      <h2 className=\"text-2xl md:text-3xl font-bold text-charcoal mb-6\">\n        {t('home.shopByCategory')}\n      </h2>\n      \n      <div className=\"overflow-x-auto -mx-4 px-4 pb-4\">\n        <div className=\"flex gap-3 min-w-max\">\n          {categories.map((category) => (\n            <Link\n              key={category.id}\n              to={`/search?category=${category.slug}`}\n              className=\"px-6 py-3 bg-sand text-charcoal rounded-full font-semibold hover:bg-gold hover:shadow-luxury transition-all whitespace-nowrap\"\n            >\n              {category.name[lang]}\n            </Link>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":1178},"backend/app/routers/products.py":{"content":"from fastapi import APIRouter, Depends, HTTPException, status, Query\nfrom sqlalchemy.orm import Session\nfrom typing import List, Optional\nfrom ..core.database import get_db\nfrom ..core.dependencies import get_current_user, require_roles\nfrom ..models.user import User\nfrom ..models.product import Product, ProductImage\nfrom ..schemas.product import ProductCreate, ProductUpdate, ProductResponse, ProductModeration\n\nrouter = APIRouter(prefix=\"/products\", tags=[\"products\"])\n\n\n@router.get(\"\", response_model=List[ProductResponse])\ndef get_products(\n    type: Optional[str] = Query(None),\n    search: Optional[str] = Query(None),\n    brand: Optional[str] = Query(None),\n    category: Optional[str] = Query(None),\n    status: str = Query(\"published\"),\n    page: int = Query(1, ge=1),\n    page_size: int = Query(20, ge=1, le=100),\n    db: Session = Depends(get_db)\n):\n    if status != \"published\":\n        raise HTTPException(status_code=403, detail=\"Cannot query non-published products\")\n    \n    query = db.query(Product).filter(Product.status == status)\n    \n    if type:\n        query = query.filter(Product.type == type)\n    if search:\n        query = query.filter(Product.title.ilike(f\"%{search}%\"))\n    if brand:\n        query = query.filter(Product.brand == brand)\n    if category:\n        query = query.filter(Product.category == category)\n    \n    products = query.offset((page - 1) * page_size).limit(page_size).all()\n    return products\n\n\n@router.get(\"/{product_id}\", response_model=ProductResponse)\ndef get_product(product_id: int, db: Session = Depends(get_db)):\n    product = db.query(Product).filter(Product.id == product_id).first()\n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    return product\n\n\n@router.post(\"\", response_model=ProductResponse)\ndef create_product(\n    product_data: ProductCreate,\n    current_user: User = Depends(require_roles([\"seller\"])),\n    db: Session = Depends(get_db)\n):\n    new_product = Product(\n        seller_id=current_user.id,\n        title=product_data.title,\n        brand=product_data.brand,\n        category=product_data.category,\n        size_ml=product_data.size_ml,\n        concentration=product_data.concentration,\n        condition=product_data.condition,\n        description=product_data.description,\n        type=product_data.type,\n        price=product_data.price,\n        status=\"pending\"\n    )\n    \n    db.add(new_product)\n    db.commit()\n    db.refresh(new_product)\n    \n    for idx, image_url in enumerate(product_data.images):\n        image = ProductImage(product_id=new_product.id, url=image_url, sort_order=idx)\n        db.add(image)\n    \n    db.commit()\n    db.refresh(new_product)\n    \n    return new_product\n\n\n@router.put(\"/{product_id}\", response_model=ProductResponse)\ndef update_product(\n    product_id: int,\n    product_data: ProductUpdate,\n    current_user: User = Depends(require_roles([\"seller\"])),\n    db: Session = Depends(get_db)\n):\n    product = db.query(Product).filter(\n        Product.id == product_id,\n        Product.seller_id == current_user.id\n    ).first()\n    \n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    update_data = product_data.model_dump(exclude_unset=True)\n    if \"status\" in update_data:\n        del update_data[\"status\"]\n    \n    for key, value in update_data.items():\n        setattr(product, key, value)\n    \n    db.commit()\n    db.refresh(product)\n    \n    return product\n\n\n@router.delete(\"/{product_id}\")\ndef delete_product(\n    product_id: int,\n    current_user: User = Depends(require_roles([\"seller\"])),\n    db: Session = Depends(get_db)\n):\n    product = db.query(Product).filter(\n        Product.id == product_id,\n        Product.seller_id == current_user.id\n    ).first()\n    \n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    db.delete(product)\n    db.commit()\n    \n    return {\"message\": \"Product deleted successfully\"}\n\n\n@router.patch(\"/{product_id}/approve\", response_model=ProductResponse)\ndef approve_product(\n    product_id: int,\n    current_user: User = Depends(require_roles([\"admin\", \"super_admin\", \"moderator\"])),\n    db: Session = Depends(get_db)\n):\n    product = db.query(Product).filter(Product.id == product_id).first()\n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    product.status = \"published\"\n    product.status_reason = None\n    db.commit()\n    db.refresh(product)\n    \n    return product\n\n\n@router.patch(\"/{product_id}/reject\", response_model=ProductResponse)\ndef reject_product(\n    product_id: int,\n    moderation: ProductModeration,\n    current_user: User = Depends(require_roles([\"admin\", \"super_admin\", \"moderator\"])),\n    db: Session = Depends(get_db)\n):\n    product = db.query(Product).filter(Product.id == product_id).first()\n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    product.status = \"hidden\"\n    product.status_reason = moderation.reason\n    db.commit()\n    db.refresh(product)\n    \n    return product\n","size_bytes":5110},"frontend/src/pages/AdminAuthRequestsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface AuthRequest {\n  id: number;\n  seller: string;\n  email: string;\n  validator: string | null;\n  status: 'pending' | 'processing' | 'done';\n  result: string;\n  submitted: string;\n}\n\nexport default function AdminAuthRequestsPage() {\n  const { t, i18n } = useTranslation();\n  const [requests, setRequests] = useState<AuthRequest[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedRequest, setSelectedRequest] = useState<AuthRequest | null>(null);\n  const [result, setResult] = useState('');\n\n  useEffect(() => {\n    fetchRequests();\n  }, []);\n\n  const fetchRequests = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setRequests([\n      { id: 1, seller: 'Ahmed Store', email: 'ahmed@store.com', validator: null, status: 'pending', result: '', submitted: '2024-10-05' },\n      { id: 2, seller: 'Fatima Perfumes', email: 'fatima@perfumes.com', validator: 'Admin Sarah', status: 'processing', result: '', submitted: '2024-10-04' },\n      { id: 3, seller: 'Omar Luxury', email: 'omar@luxury.com', validator: 'Admin John', status: 'done', result: 'Verified - All documents valid', submitted: '2024-10-01' },\n      { id: 4, seller: 'Suspicious Shop', email: 'fake@shop.com', validator: 'Admin Sarah', status: 'done', result: 'Rejected - Invalid documents', submitted: '2024-09-28' },\n    ]);\n    setLoading(false);\n  };\n\n  const handleAssign = (id: number) => {\n    setRequests(requests.map(r => r.id === id ? { ...r, validator: 'Current Admin', status: 'processing' } : r));\n  };\n\n  const handleProcess = (request: AuthRequest) => {\n    setSelectedRequest(request);\n    setResult(request.result);\n    setShowModal(true);\n  };\n\n  const handleSubmit = () => {\n    if (!selectedRequest) return;\n    setRequests(requests.map(r => r.id === selectedRequest.id ? { ...r, status: 'done', result } : r));\n    setShowModal(false);\n    setResult('');\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'pending': return 'text-gold bg-gold bg-opacity-10';\n      case 'processing': return 'text-blue-600 bg-blue-100';\n      case 'done': return 'text-green-600 bg-green-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h1 className=\"text-h2 text-charcoal mb-6\">{t('admin.authRequests')}</h1>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.seller')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.email')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.validator')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.submitted')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {requests.map((r) => (\n                <tr key={r.id} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{r.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{r.seller}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{r.email}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{r.validator || '-'}</td>\n                  <td className=\"px-4 py-4\"><span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(r.status)}`}>{t(`admin.${r.status}`)}</span></td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{new Date(r.submitted).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}</td>\n                  <td className=\"px-4 py-4\">\n                    {r.status === 'pending' && (\n                      <button onClick={() => handleAssign(r.id)} className=\"text-blue-600 hover:text-blue-700 text-sm font-semibold\">{t('admin.assign')}</button>\n                    )}\n                    {r.status === 'processing' && (\n                      <button onClick={() => handleProcess(r)} className=\"text-gold hover:text-gold-hover text-sm font-semibold\">{t('admin.process')}</button>\n                    )}\n                    {r.status === 'done' && (\n                      <button onClick={() => handleProcess(r)} className=\"text-gray-600 hover:text-gray-700 text-sm font-semibold\">{t('admin.viewResult')}</button>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {showModal && selectedRequest && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-luxury p-6 max-w-md w-full\">\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.processRequest')}</h3>\n            <p className=\"text-charcoal mb-2\"><strong>{t('admin.seller')}:</strong> {selectedRequest.seller}</p>\n            <p className=\"text-charcoal mb-4\"><strong>{t('admin.email')}:</strong> {selectedRequest.email}</p>\n            <textarea value={result} onChange={(e) => setResult(e.target.value)} placeholder={t('admin.resultPlaceholder')} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none mb-4\" rows={4} readOnly={selectedRequest.status === 'done'} />\n            <div className=\"flex gap-3\">\n              {selectedRequest.status !== 'done' && (\n                <button onClick={handleSubmit} className=\"flex-1 bg-gold text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-gold-hover\">{t('admin.submit')}</button>\n              )}\n              <button onClick={() => setShowModal(false)} className=\"flex-1 bg-sand text-charcoal px-6 py-3 rounded-luxury font-semibold\">{t('common.close')}</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":6645},"frontend/src/types/index.ts":{"content":"export interface User {\n  id: number;\n  email: string;\n  full_name: string;\n  roles: string[];\n  status: string;\n}\n\nexport interface Product {\n  id: number;\n  seller_id: number;\n  name_ar: string;\n  name_en: string;\n  description_ar: string;\n  description_en: string;\n  product_type: string;\n  brand: string;\n  category: string;\n  base_price: number;\n  size_ml: number;\n  concentration: string;\n  condition?: 'new' | 'used';\n  stock_quantity: number;\n  image_urls: string[];\n  status: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface Auction {\n  id: number;\n  product_id: number;\n  seller_id: number;\n  starting_price: number;\n  current_price: number;\n  minimum_increment: number;\n  start_time: string;\n  end_time: string;\n  status: string;\n  product?: Product;\n  seller?: { id: number; full_name: string; verified_seller: boolean };\n  total_bids?: number;\n}\n\nexport interface Bid {\n  id: number;\n  auction_id: number;\n  bidder_id: number;\n  amount: number;\n  created_at: string;\n  bidder?: User;\n}\n\nexport interface Order {\n  id: number;\n  buyer_id: number;\n  product_id: number;\n  quantity: number;\n  unit_price: number;\n  total_amount: number;\n  payment_method: string;\n  shipping_address: string;\n  status: string;\n  created_at: string;\n  product?: Product;\n}\n","size_bytes":1287},"backend/app/models/auth_request.py":{"content":"from sqlalchemy import Column, Integer, Float, String, DateTime, ForeignKey, Text, Enum as SQLEnum\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nimport enum\nfrom ..core.database import Base\n\n\nclass AuthRequestStatus(str, enum.Enum):\n    open = \"open\"\n    processing = \"processing\"\n    done = \"done\"\n\n\nclass AuthRequest(Base):\n    __tablename__ = \"auth_requests\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    product_id = Column(Integer, ForeignKey(\"products.id\"), nullable=False, index=True)\n    requester_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    fee_amount = Column(Float, nullable=False)\n    assigned_to = Column(Integer, ForeignKey(\"users.id\"), nullable=True)\n    status = Column(SQLEnum(AuthRequestStatus), default=AuthRequestStatus.open, index=True)\n    result_text = Column(Text)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    product = relationship(\"Product\", back_populates=\"auth_requests\")\n    requester = relationship(\"User\", back_populates=\"auth_requests\", foreign_keys=[requester_id])\n","size_bytes":1127},"frontend/src/components/products/ProductFilters.tsx":{"content":"// src/components/products/ProductFilters.tsx\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\ntype Condition = \"all\" | \"new\" | \"used\";\n\nexport default function ProductFilters({ className = \"\" }: { className?: string }) {\n  const { i18n } = useTranslation();\n  const dir = i18n.language === \"ar\" ? \"rtl\" : \"ltr\";\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [open, setOpen] = useState(false);\n\n  // قيم الفلاتر\n  const [sort, setSort] = useState(\"newest\");\n  const [brand, setBrand] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [condition, setCondition] = useState<Condition>(\"all\");\n  const [minPrice, setMinPrice] = useState(\"\");\n  const [maxPrice, setMaxPrice] = useState(\"\");\n\n  // تهيئة القيم من الـ URL\n  useEffect(() => {\n    const qs = new URLSearchParams(location.search);\n    setSort(qs.get(\"sort\") || \"newest\");\n    setBrand(qs.get(\"brand\") || \"\");\n    setCategory(qs.get(\"category\") || \"\");\n    setCondition((qs.get(\"condition\") as Condition) || \"all\");\n    setMinPrice(qs.get(\"min\") || \"\");\n    setMaxPrice(qs.get(\"max\") || \"\");\n  }, [location.search]);\n\n  // إغلاق عند الضغط خارج/ESC\n  const btnRef = useRef<HTMLButtonElement | null>(null);\n  const panelRef = useRef<HTMLDivElement | null>(null);\n  useEffect(() => {\n    function onDocClick(e: MouseEvent) {\n      if (!open) return;\n      const t = e.target as Node;\n      if (panelRef.current?.contains(t) || btnRef.current?.contains(t)) return;\n      setOpen(false);\n    }\n    function onKey(e: KeyboardEvent) {\n      if (e.key === \"Escape\") setOpen(false);\n    }\n    document.addEventListener(\"mousedown\", onDocClick);\n    document.addEventListener(\"keydown\", onKey);\n    return () => {\n      document.removeEventListener(\"mousedown\", onDocClick);\n      document.removeEventListener(\"keydown\", onKey);\n    };\n  }, [open]);\n\n  // عداد الفلاتر المفعّلة\n  const activeCount = useMemo(() => {\n    let c = 0;\n    if (sort && sort !== \"newest\") c++;\n    if (brand) c++;\n    if (category) c++;\n    if (condition !== \"all\") c++;\n    if (minPrice) c++;\n    if (maxPrice) c++;\n    return c;\n  }, [sort, brand, category, condition, minPrice, maxPrice]);\n\n  const inputCls =\n    \"w-full h-9 rounded-lg border border-sand/60 bg-white text-charcoal placeholder-taupe px-2 outline-none focus:ring-2 focus:ring-gold focus:border-gold transition text-sm\";\n  const labelCls = \"text-[11px] font-semibold text-charcoal/90\";\n  const chipCls = \"h-8 rounded-lg px-2 text-xs font-semibold border transition\";\n\n  function clearAll() {\n    setSort(\"newest\");\n    setBrand(\"\");\n    setCategory(\"\");\n    setCondition(\"all\");\n    setMinPrice(\"\");\n    setMaxPrice(\"\");\n  }\n\n  function apply() {\n    const params = new URLSearchParams();\n    if (sort) params.set(\"sort\", sort);\n    if (brand) params.set(\"brand\", brand);\n    if (category) params.set(\"category\", category);\n    if (condition !== \"all\") params.set(\"condition\", condition);\n    if (minPrice) params.set(\"min\", minPrice);\n    if (maxPrice) params.set(\"max\", maxPrice);\n\n    // حدّث الـ URL بدون إعادة تحميل\n    navigate({ pathname: location.pathname, search: params.toString() }, { replace: true });\n    setOpen(false);\n  }\n\n  return (\n    <div dir={dir} className={`relative ${className}`}>\n      {/* زر فتح القائمة */}\n      <button\n        ref={btnRef}\n        onClick={() => setOpen((v) => !v)}\n        aria-haspopup=\"menu\"\n        aria-expanded={open}\n        className=\"h-10 rounded-xl bg-white border border-sand/60 hover:bg-sand/50 text-charcoal px-3 text-sm font-semibold flex items-center gap-2 shadow-sm\"\n        style={{ minWidth: 110 }}\n      >\n        <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <path strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 5h18M6 12h12M10 19h4\" />\n        </svg>\n        تصفية\n        {activeCount > 0 && (\n          <span className=\"ms-1 rounded-md bg-gold/90 text-charcoal text-[11px] px-1.5 py-0.5\">\n            {activeCount}\n          </span>\n        )}\n        <svg className=\"w-4 h-4 opacity-70\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path d=\"M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.25a.75.75 0 0 1-1.06 0L5.21 8.29a.75.75 0 0 1 .02-1.08z\" />\n        </svg>\n      </button>\n\n      {/* القائمة المنسدلة */}\n      {open && (\n        <div\n          ref={panelRef}\n          role=\"menu\"\n          className=\"absolute z-50 mt-2 w-80 max-w-[92vw] rounded-xl border border-sand/60 bg-white shadow-xl p-3\"\n          style={{ insetInlineEnd: 0 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm font-extrabold text-charcoal\">تصفية</span>\n            <button\n              onClick={clearAll}\n              className=\"text-xs font-semibold text-charcoal/80 hover:text-charcoal underline underline-offset-2\"\n            >\n              مسح الكل\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {/* الترتيب */}\n            <div className=\"space-y-1\">\n              <label className={labelCls}>الترتيب حسب</label>\n              <select className={inputCls} value={sort} onChange={(e) => setSort(e.target.value)}>\n                <option value=\"newest\">الأحدث أولاً</option>\n                <option value=\"price_low\">السعر: من الأقل للأعلى</option>\n                <option value=\"price_high\">السعر: من الأعلى للأقل</option>\n                <option value=\"popular\">الأكثر رواجًا</option>\n              </select>\n            </div>\n\n            {/* العلامة والفئة */}\n            <div className=\"grid grid-cols-2 gap-2\">\n              <div className=\"space-y-1\">\n                <label className={labelCls}>العلامة التجارية</label>\n                <select className={inputCls} value={brand} onChange={(e) => setBrand(e.target.value)}>\n                  <option value=\"\">الكل</option>\n                  <option value=\"dior\">Dior</option>\n                  <option value=\"chanel\">Chanel</option>\n                  <option value=\"ysl\">YSL</option>\n                </select>\n              </div>\n              <div className=\"space-y-1\">\n                <label className={labelCls}>الفئة</label>\n                <select className={inputCls} value={category} onChange={(e) => setCategory(e.target.value)}>\n                  <option value=\"\">الكل</option>\n                  <option value=\"men\">رجالي</option>\n                  <option value=\"women\">نسائي</option>\n                  <option value=\"unisex\">يونيسكس</option>\n                </select>\n              </div>\n            </div>\n\n            {/* الحالة */}\n            <div className=\"space-y-1\">\n              <label className={labelCls}>الحالة</label>\n              <div className=\"grid grid-cols-3 gap-1.5\">\n                {([\"all\", \"new\", \"used\"] as Condition[]).map((k) => {\n                  const active = condition === k;\n                  const label = k === \"all\" ? \"الكل\" : k === \"new\" ? \"جديد\" : \"مستعمل\";\n                  return (\n                    <button\n                      key={k}\n                      onClick={() => setCondition(k)}\n                      className={`${chipCls} ${\n                        active\n                          ? \"bg-gold border-gold text-charcoal\"\n                          : \"bg-white border-sand/60 text-charcoal hover:bg-sand/50\"\n                      }`}\n                    >\n                      {label}\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* السعر */}\n            <div className=\"space-y-1\">\n              <label className={labelCls}>السعر (النطاق)</label>\n              <div className=\"grid grid-cols-2 gap-2\">\n                <input\n                  type=\"number\"\n                  inputMode=\"decimal\"\n                  min={0}\n                  placeholder=\"الحد الأدنى\"\n                  className={inputCls}\n                  value={minPrice}\n                  onChange={(e) => setMinPrice(e.target.value)}\n                />\n                <input\n                  type=\"number\"\n                  inputMode=\"decimal\"\n                  min={0}\n                  placeholder=\"الحد الأقصى\"\n                  className={inputCls}\n                  value={maxPrice}\n                  onChange={(e) => setMaxPrice(e.target.value)}\n                />\n              </div>\n            </div>\n\n            {/* أزرار */}\n            <div className=\"flex items-center gap-2 pt-1\">\n              <button\n                onClick={apply}\n                className=\"flex-1 h-9 rounded-lg bg-charcoal text-ivory text-sm font-semibold hover:bg-charcoal-light transition\"\n              >\n                تطبيق\n              </button>\n              <button\n                onClick={clearAll}\n                className=\"h-9 px-3 rounded-lg bg-white border border-sand/60 text-sm font-semibold hover:bg-sand/50 transition\"\n              >\n                إعادة تعيين\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":9539},"backend/app/models/ticket.py":{"content":"from sqlalchemy import Column, Integer, String, DateTime, ForeignKey, Text, Enum as SQLEnum\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nimport enum\nfrom ..core.database import Base\n\n\nclass TicketStatus(str, enum.Enum):\n    open = \"open\"\n    pending = \"pending\"\n    closed = \"closed\"\n\n\nclass Ticket(Base):\n    __tablename__ = \"tickets\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    subject = Column(String, nullable=False)\n    message = Column(Text, nullable=False)\n    status = Column(SQLEnum(TicketStatus), default=TicketStatus.open, index=True)\n    order_id = Column(Integer, ForeignKey(\"orders.id\"), nullable=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    user = relationship(\"User\", back_populates=\"tickets\")\n","size_bytes":897},"frontend/src/components/brand/BrandLogo.tsx":{"content":"import React, { useMemo, useState, useCallback } from \"react\";\nimport { useUIStore } from \"../../store/uiStore\";\n\ntype BrandLogoProps = {\n  /** نستخدم wordmark لمطابقة الهيدر */\n  variant?: \"wordmark\";\n  /** العرض بالبكسل (الارتفاع يتكيّف تلقائيًا) */\n  size?: number;\n  className?: string;\n  alt?: string;\n  /**\n   * إن أردت مسارًا مخصصًا (مثلاً /logo.svg)\n   * سيُستخدم مباشرة بدل المنطق التلقائي.\n   */\n  srcOverride?: string;\n};\n\nexport default function BrandLogo({\n  variant = \"wordmark\",\n  size = 52,\n  className = \"\",\n  alt,\n  srcOverride,\n}: BrandLogoProps) {\n  const { language } = useUIStore();\n\n  const basePath = \"/brand\";\n  const fileBase =\n    language === \"ar\" ? \"logo-ao-wordmark-ar\" : \"logo-ao-wordmark-en\";\n\n  // نحضّر قائمة احتمالات تلقائية: svg ثم png ثم الاسم كما هو (بدون امتداد)\n  const candidates = useMemo(() => {\n    if (srcOverride) return [srcOverride];\n    return [\n      `${basePath}/${fileBase}.svg`,\n      `${basePath}/${fileBase}.png`,\n      `${basePath}/${fileBase}`, // لو رفعت الملف بلا امتداد\n    ];\n  }, [srcOverride, fileBase]);\n\n  const [idx, setIdx] = useState(0);\n\n  const onError = useCallback(() => {\n    setIdx((i) => (i + 1 < candidates.length ? i + 1 : i));\n  }, [candidates.length]);\n\n  const effectiveAlt =\n    alt ??\n    (language === \"ar\"\n      ? \"عالم العطور - الشعار النصي\"\n      : \"The World of Perfumes - Wordmark\");\n\n  return (\n    <img\n      src={candidates[idx]}\n      onError={onError}\n      alt={effectiveAlt}\n      width={size}\n      height={size}\n      className={className}\n      style={{ height: \"auto\", display: \"block\" }}\n      loading=\"lazy\"\n      data-variant={variant}\n    />\n  );\n}\n","size_bytes":1849},"frontend/src/components/common/Countdown.tsx":{"content":"import { useTranslation } from 'react-i18next';\nimport { useCountdown } from '../../hooks/useCountdown';\n\ninterface CountdownProps {\n  startAt?: string | number;\n  endAt: string | number;\n  className?: string;\n  compact?: boolean;\n}\n\nexport default function Countdown({ startAt, endAt, className = '', compact = false }: CountdownProps) {\n  const { t } = useTranslation();\n  const { days, hours, minutes, seconds, status } = useCountdown({ startAt, endAt });\n\n  if (status === 'ended') {\n    return (\n      <div className={`text-taupe ${className}`}>\n        {t('auction.ended')}\n      </div>\n    );\n  }\n\n  const formatTime = (value: number) => value.toString().padStart(2, '0');\n\n  if (compact) {\n    if (status === 'scheduled') {\n      return (\n        <div className={`font-mono ${className}`}>\n          {days > 0 && `${days}d `}\n          {formatTime(hours)}:{formatTime(minutes)}:{formatTime(seconds)}\n        </div>\n      );\n    }\n    \n    return (\n      <div className={`font-mono ${className}`}>\n        {days > 0 && `${days}d `}\n        {formatTime(hours)}:{formatTime(minutes)}:{formatTime(seconds)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={className}>\n      {status === 'scheduled' && (\n        <p className=\"text-sm text-taupe mb-2\">{t('auction.startsIn')}</p>\n      )}\n      <div className=\"flex gap-2 font-mono text-lg\">\n        {days > 0 && (\n          <>\n            <div className=\"text-center\">\n              <div className=\"font-bold\">{formatTime(days)}</div>\n              <div className=\"text-xs text-taupe\">{t('auction.days')}</div>\n            </div>\n            <div className=\"font-bold\">:</div>\n          </>\n        )}\n        <div className=\"text-center\">\n          <div className=\"font-bold\">{formatTime(hours)}</div>\n          <div className=\"text-xs text-taupe\">{t('auction.hours')}</div>\n        </div>\n        <div className=\"font-bold\">:</div>\n        <div className=\"text-center\">\n          <div className=\"font-bold\">{formatTime(minutes)}</div>\n          <div className=\"text-xs text-taupe\">{t('auction.mins')}</div>\n        </div>\n        <div className=\"font-bold\">:</div>\n        <div className=\"text-center\">\n          <div className=\"font-bold\">{formatTime(seconds)}</div>\n          <div className=\"text-xs text-taupe\">{t('auction.secs')}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2348},"frontend/src/vite-env.d.ts":{"content":"/// <reference types=\"vite/client\" />\n","size_bytes":38},"frontend/src/main.tsx":{"content":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { HelmetProvider } from 'react-helmet-async';\nimport App from './App';\nimport './index.css';\nimport './i18n/config';\nimport i18n from './i18n/config';\n\n// Set initial RTL/LTR direction based on language\nconst initialLang = i18n.language || 'ar';\ndocument.documentElement.setAttribute('dir', initialLang === 'ar' ? 'rtl' : 'ltr');\ndocument.documentElement.setAttribute('lang', initialLang);\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <HelmetProvider>\n      <App />\n    </HelmetProvider>\n  </React.StrictMode>\n);\n","size_bytes":631},"frontend/src/components/common/Image.tsx":{"content":"import { useState } from 'react';\n\ninterface ImageProps {\n  src: string;\n  alt: string;\n  className?: string;\n  loading?: 'lazy' | 'eager';\n  aspectRatio?: string;\n}\n\nexport default function Image({ src, alt, className = '', loading = 'lazy', aspectRatio }: ImageProps) {\n  const [error, setError] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const handleError = () => {\n    setError(true);\n    setIsLoading(false);\n  };\n\n  const handleLoad = () => {\n    setIsLoading(false);\n  };\n\n  return (\n    <div className={`relative ${className}`} style={aspectRatio ? { aspectRatio } : undefined}>\n      {isLoading && !error && (\n        <div className=\"absolute inset-0 bg-sand animate-pulse rounded-t-luxury\" />\n      )}\n      \n      {error ? (\n        <div className=\"absolute inset-0 bg-sand flex items-center justify-center rounded-t-luxury\">\n          <svg className=\"w-16 h-16 text-taupe opacity-40\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z\"/>\n          </svg>\n        </div>\n      ) : (\n        <img\n          src={src}\n          alt={alt}\n          className={`w-full h-full object-cover rounded-t-luxury ${isLoading ? 'opacity-0' : 'opacity-100'} transition-opacity duration-200`}\n          loading={loading}\n          onError={handleError}\n          onLoad={handleLoad}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":1511},"frontend/src/components/common/SARIcon.tsx":{"content":"// src/components/common/SARIcon.tsx\ntype Props = {\n  size?: number;        // العرض/الارتفاع بالبكسل\n  className?: string;   // كلاسات إضافية (Tailwind)\n  title?: string;       // نص بديل للوصول\n};\n\nexport default function SARIcon({\n  size = 18,\n  className = \"\",\n  title = \"SAR\",\n}: Props) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 1124.14 1256.39\"\n      role=\"img\"\n      aria-label={title}\n      focusable=\"false\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={`inline-block align-baseline ${className}`}\n      preserveAspectRatio=\"xMidYMid meet\"\n    >\n      {/* جعلنا التعبئة currentColor ليتلوّن مثل الرقم تمامًا */}\n      <path\n        d=\"M699.62,1113.02h0c-20.06,44.48-33.32,92.75-38.4,143.37l424.51-90.24c20.06-44.47,33.31-92.75,38.4-143.37l-424.51,90.24Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M1085.73,895.8c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.33v-135.2l292.27-62.11c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.27V66.13c-50.67,28.45-95.67,66.32-132.25,110.99v403.35l-132.25,28.11V0c-50.67,28.44-95.67,66.32-132.25,110.99v525.69l-295.91,62.88c-20.06,44.47-33.33,92.75-38.42,143.37l334.33-71.05v170.26l-358.3,76.14c-20.06,44.47-33.32,92.75-38.4,143.37l375.04-79.7c30.53-6.35,56.77-24.4,73.83-49.24l68.78-101.97v-.02c7.14-10.55,11.3-23.27,11.3-36.97v-149.98l132.25-28.11v270.4l424.53-90.28Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","size_bytes":1516},"backend/app/core/config.py":{"content":"from pydantic_settings import BaseSettings\nfrom typing import List\n\n\nclass Settings(BaseSettings):\n    DATABASE_URL: str\n    JWT_SECRET: str\n    JWT_EXPIRES: int = 86400\n    JWT_ALGORITHM: str = \"HS256\"\n    ENV: str = \"dev\"\n    CORS_ORIGINS: str = \"http://localhost:5173,http://localhost:5000\"\n    UPLOAD_DIR: str = \"uploads\"\n    MAX_UPLOAD_SIZE: int = 5242880\n    ALLOWED_EXTENSIONS: str = \"jpg,jpeg,png,webp\"\n    AUTHENTICITY_FEE: float = 50.00\n    COMMISSION_NEW: float = 10.0\n    COMMISSION_USED: float = 5.0\n    COMMISSION_AUCTION: float = 5.0\n    \n    class Config:\n        env_file = \".env\"\n    \n    @property\n    def cors_origins_list(self) -> List[str]:\n        return [origin.strip() for origin in self.CORS_ORIGINS.split(\",\")]\n    \n    @property\n    def allowed_extensions_list(self) -> List[str]:\n        return [ext.strip() for ext in self.ALLOWED_EXTENSIONS.split(\",\")]\n\n\nsettings = Settings()\n","size_bytes":908},"frontend/src/components/auctions/AuctionCard.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Auction } from '../../types';\nimport { useUIStore } from '../../store/uiStore';\nimport { formatPrice } from '../../utils/currency';\nimport Countdown from '../common/Countdown';\n\ninterface AuctionCardProps {\n  auction: Auction;\n}\n\nexport default function AuctionCard({ auction }: AuctionCardProps) {\n  const { t } = useTranslation();\n  const { language } = useUIStore();\n\n  const product = auction.product;\n  const name = product ? (language === 'ar' ? product.name_ar : product.name_en) : 'Unknown Product';\n  const imageUrl = product?.image_urls?.[0] || '/placeholder-perfume.jpg';\n  const isActive = auction.status === 'running';\n  const bidsCount = auction.total_bids || 0;\n\n  return (\n    <div className=\"bg-white rounded-luxury overflow-hidden shadow-luxury hover:shadow-luxury-lg transition-all duration-300\">\n      <Link to={`/auction/${auction.id}`} className=\"block\">\n        <div className=\"aspect-square bg-ivory relative overflow-hidden\">\n          <img \n            src={imageUrl} \n            alt={name}\n            className=\"w-full h-full object-cover\"\n            onError={(e) => {\n              e.currentTarget.src = '/placeholder-perfume.jpg';\n            }}\n          />\n          <div className=\"absolute top-2 right-2 bg-gold text-charcoal px-3 py-1 rounded-full text-sm font-semibold\">\n            {isActive ? 'LIVE' : auction.status.toUpperCase()}\n          </div>\n        </div>\n      </Link>\n      \n      <div className=\"p-4\">\n        <Link to={`/auction/${auction.id}`}>\n          <h3 className=\"text-lg font-semibold text-charcoal mb-2 line-clamp-1 hover:text-gold transition\">\n            {name}\n          </h3>\n        </Link>\n        \n        <div className=\"space-y-2 mb-3\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm text-charcoal-light\">{t('auction.currentBid')}:</span>\n            <span className=\"text-xl font-bold text-gold\">\n              {formatPrice(auction.current_price, language)}\n            </span>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm text-charcoal-light\">{t('auction.timeRemaining')}:</span>\n            <Countdown endAt={auction.end_time} compact className=\"text-sm font-semibold text-charcoal\" />\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-between text-xs text-charcoal-light\">\n          <span>{bidsCount} {t('auction.bids')}</span>\n          {product && <span>{product.brand}</span>}\n        </div>\n        \n        <Link \n          to={`/auction/${auction.id}`}\n          className=\"block mt-3 bg-gold text-charcoal text-center px-4 py-2 rounded-lg font-semibold hover:bg-gold-light transition\"\n        >\n          {t('auction.viewAuction')}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2914},"frontend/src/pages/AdminSupportPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface Ticket {\n  id: number;\n  user: string;\n  subject: string;\n  subjectAr: string;\n  status: 'open' | 'in_progress' | 'closed';\n  priority: 'low' | 'medium' | 'high';\n  created: string;\n}\n\nconst CANNED_REPLIES = {\n  orderStatus: { en: 'Your order status has been updated. Please check your account for details.', ar: 'تم تحديث حالة طلبك. يرجى التحقق من حسابك للحصول على التفاصيل.' },\n  refundPolicy: { en: 'Our refund policy allows returns within 14 days of purchase. Please contact us with your order number.', ar: 'تسمح سياسة الاسترداد بالإرجاع خلال 14 يومًا من الشراء. يرجى الاتصال بنا مع رقم طلبك.' },\n  shippingDelay: { en: 'We apologize for the shipping delay. Your order is being processed and will be shipped soon.', ar: 'نعتذر عن تأخير الشحن. يتم معالجة طلبك وسيتم شحنه قريبًا.' },\n};\n\nexport default function AdminSupportPage() {\n  const { t, i18n } = useTranslation();\n  const [tickets, setTickets] = useState<Ticket[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showReply, setShowReply] = useState(false);\n  const [selectedTicket, setSelectedTicket] = useState<Ticket | null>(null);\n  const [reply, setReply] = useState('');\n\n  useEffect(() => {\n    fetchTickets();\n  }, []);\n\n  const fetchTickets = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setTickets([\n      { id: 1, user: 'Ahmed M.', subject: 'Payment Issue', subjectAr: 'مشكلة في الدفع', status: 'open', priority: 'high', created: '2024-10-05' },\n      { id: 2, user: 'Fatima A.', subject: 'Order Delay', subjectAr: 'تأخير في الطلب', status: 'in_progress', priority: 'medium', created: '2024-10-04' },\n      { id: 3, user: 'Omar H.', subject: 'Product Question', subjectAr: 'سؤال حول المنتج', status: 'open', priority: 'low', created: '2024-10-04' },\n      { id: 4, user: 'Sara I.', subject: 'Account Access', subjectAr: 'الوصول إلى الحساب', status: 'closed', priority: 'high', created: '2024-10-01' },\n    ]);\n    setLoading(false);\n  };\n\n  const handleReply = (ticket: Ticket) => {\n    setSelectedTicket(ticket);\n    setReply('');\n    setShowReply(true);\n  };\n\n  const handleUseCanned = (template: keyof typeof CANNED_REPLIES) => {\n    setReply(CANNED_REPLIES[template][i18n.language as 'en' | 'ar']);\n  };\n\n  const handleSubmit = () => {\n    if (!selectedTicket) return;\n    setTickets(tickets.map(t => t.id === selectedTicket.id ? { ...t, status: 'closed' } : t));\n    setShowReply(false);\n  };\n\n  const handleStatusChange = (id: number, newStatus: Ticket['status']) => {\n    setTickets(tickets.map(t => t.id === id ? { ...t, status: newStatus } : t));\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'open': return 'text-gold bg-gold bg-opacity-10';\n      case 'in_progress': return 'text-blue-600 bg-blue-100';\n      case 'closed': return 'text-gray-600 bg-gray-200';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'text-red-600 bg-red-100';\n      case 'medium': return 'text-gold bg-gold bg-opacity-10';\n      case 'low': return 'text-gray-600 bg-gray-200';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h1 className=\"text-h2 text-charcoal mb-6\">{t('admin.supportTickets')}</h1>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.user')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.subject')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.priority')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.created')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {tickets.map((ticket) => (\n                <tr key={ticket.id} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{ticket.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{ticket.user}</td>\n                  <td className=\"px-4 py-4 text-charcoal\">{i18n.language === 'ar' ? ticket.subjectAr : ticket.subject}</td>\n                  <td className=\"px-4 py-4\"><span className={`px-3 py-1 rounded-full text-sm font-semibold ${getPriorityColor(ticket.priority)}`}>{t(`admin.${ticket.priority}`)}</span></td>\n                  <td className=\"px-4 py-4\">\n                    <select value={ticket.status} onChange={(e) => handleStatusChange(ticket.id, e.target.value as Ticket['status'])} className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(ticket.status)} border-none`}>\n                      <option value=\"open\">{t('admin.open')}</option>\n                      <option value=\"in_progress\">{t('admin.inProgress')}</option>\n                      <option value=\"closed\">{t('admin.closed')}</option>\n                    </select>\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{new Date(ticket.created).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}</td>\n                  <td className=\"px-4 py-4\">\n                    <button onClick={() => handleReply(ticket)} className=\"text-blue-600 hover:text-blue-700 text-sm font-semibold\">{t('admin.reply')}</button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {showReply && selectedTicket && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-luxury p-6 max-w-2xl w-full\">\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.replyToTicket')} {selectedTicket.id}</h3>\n            <p className=\"text-charcoal mb-4\"><strong>{t('admin.user')}:</strong> {selectedTicket.user} | <strong>{t('admin.subject')}:</strong> {i18n.language === 'ar' ? selectedTicket.subjectAr : selectedTicket.subject}</p>\n            \n            <div className=\"mb-4\">\n              <p className=\"text-charcoal font-semibold mb-2\">{t('admin.cannedReplies')}:</p>\n              <div className=\"flex gap-2 flex-wrap\">\n                <button onClick={() => handleUseCanned('orderStatus')} className=\"bg-blue-100 text-blue-600 px-3 py-1 rounded-luxury text-sm font-semibold hover:bg-blue-200\">{t('admin.orderStatus')}</button>\n                <button onClick={() => handleUseCanned('refundPolicy')} className=\"bg-blue-100 text-blue-600 px-3 py-1 rounded-luxury text-sm font-semibold hover:bg-blue-200\">{t('admin.refundPolicy')}</button>\n                <button onClick={() => handleUseCanned('shippingDelay')} className=\"bg-blue-100 text-blue-600 px-3 py-1 rounded-luxury text-sm font-semibold hover:bg-blue-200\">{t('admin.shippingDelay')}</button>\n              </div>\n            </div>\n\n            <textarea value={reply} onChange={(e) => setReply(e.target.value)} placeholder={t('admin.replyPlaceholder')} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none mb-4\" rows={6} />\n            \n            <div className=\"flex gap-3\">\n              <button onClick={handleSubmit} className=\"flex-1 bg-gold text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-gold-hover\">{t('admin.sendReply')}</button>\n              <button onClick={() => setShowReply(false)} className=\"flex-1 bg-sand text-charcoal px-6 py-3 rounded-luxury font-semibold\">{t('common.cancel')}</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":8606},"frontend/src/utils/currency.ts":{"content":"const USD_TO_SAR_RATE = 3.75;\n\nexport function formatPrice(priceInUSD: number | undefined, language: 'ar' | 'en' = 'ar'): string {\n  if (priceInUSD === undefined || priceInUSD === null) {\n    return language === 'ar' ? '0.00 ﷼' : '0.00 SAR';\n  }\n\n  const priceInSAR = priceInUSD * USD_TO_SAR_RATE;\n  const formattedPrice = priceInSAR.toFixed(2);\n\n  if (language === 'ar') {\n    return `${formattedPrice} ﷼`;\n  } else {\n    return `${formattedPrice} SAR`;\n  }\n}\n\nexport function convertToSAR(priceInUSD: number): number {\n  return priceInUSD * USD_TO_SAR_RATE;\n}\n\nexport const formatSAR = (n: number, locale: \"ar-SA\" | \"en-US\" = \"ar-SA\") =>\n  n.toLocaleString(locale, { minimumFractionDigits: 2, maximumFractionDigits: 2 });\n","size_bytes":728},"frontend/src/components/layout/Navbar.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { useAuthStore } from '../../store/authStore';\nimport { useUIStore } from '../../store/uiStore';\nimport BrandLogo from '../brand/BrandLogo';\nimport { useState } from 'react';\nimport CartIconButton from '../cart/CartIconButton';\nimport WishlistIconButton from '../wishlist/WishlistIconButton';\n\nexport default function Navbar() {\n  const { t, i18n } = useTranslation();\n  const { isAuthenticated, user, logout } = useAuthStore();\n  const { language, setLanguage } = useUIStore();\n\n  const [searchQuery, setSearchQuery] = useState('');\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [mobileSearchOpen, setMobileSearchOpen] = useState(false);\n\n  const toggleLanguage = () => {\n    const newLang = language === 'ar' ? 'en' : 'ar';\n    setLanguage(newLang);\n    i18n.changeLanguage(newLang);\n    document.documentElement.setAttribute('dir', newLang === 'ar' ? 'rtl' : 'ltr');\n    document.documentElement.setAttribute('lang', newLang);\n  };\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (searchQuery.trim()) {\n      window.location.href = `/products?search=${encodeURIComponent(searchQuery)}`;\n    }\n    setMobileSearchOpen(false);\n  };\n\n  const closeMobileMenu = () => setMobileMenuOpen(false);\n  const closeMobileSearch = () => setMobileSearchOpen(false);\n\n  return (\n    <nav dir={i18n.language === 'ar' ? 'rtl' : 'ltr'} className=\"sticky top-0 z-50 bg-charcoal text-ivory shadow-lg\">\n\n      {/* ===== Mobile + Tablet (<lg) ===== */}\n      <div className=\"lg:hidden h-14\">\n        <div className=\"grid grid-cols-3 items-center h-full px-3\">\n          {/* Left: hamburger */}\n          <div className=\"flex\">\n            <button\n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              className=\"p-2.5 rounded-lg hover:bg-charcoal-light transition min-w-[44px] min-h-[44px] flex items-center justify-center\"\n              aria-label=\"Toggle menu\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* Center: logo */}\n          <div className=\"flex justify-center\">\n            <Link to=\"/\" aria-label=\"Home\" className=\"block\">\n              <BrandLogo variant=\"lockup-bilingual\" size={45} />\n            </Link>\n          </div>\n\n          {/* Right: wishlist + cart + search (بدون زر اللغة على الجوال) */}\n          <div className=\"flex justify-end items-center gap-1\">\n            <WishlistIconButton />\n            <CartIconButton />\n            <button\n              onClick={() => setMobileSearchOpen(true)}\n              className=\"p-2.5 rounded-lg hover:bg-charcoal-light transition min-w-[44px] min-h-[44px] flex items-center justify-center\"\n              aria-label=\"Search\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* ===== Desktop (≥lg) ===== */}\n      <div className=\"hidden lg:block\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12\">\n          <div className=\"flex justify-between items-center h-16 md:h-20\">\n            <Link to=\"/\" className=\"flex-shrink-0\">\n              <BrandLogo variant=\"lockup-bilingual\" size={60} />\n            </Link>\n\n            <div className=\"flex items-center gap-4 lg:gap-6 flex-1 justify-end\">\n              <form onSubmit={handleSearch} className=\"flex-1 max-w-md\" style={{ marginInline: '1rem' }}>\n                <input\n                  type=\"text\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder={t('common.search')}\n                  className=\"w-full px-4 py-2 rounded-luxury bg-charcoal-light text-ivory placeholder-taupe focus:outline-none focus:ring-2 focus:ring-gold min-h-[44px]\"\n                />\n              </form>\n\n              <Link to=\"/\" className=\"hover:text-gold transition whitespace-nowrap\">{t('nav.home')}</Link>\n              <Link to=\"/new\" className=\"hover:text-gold transition whitespace-nowrap\">{t('nav.new')}</Link>\n              <Link to=\"/used\" className=\"hover:text-gold transition whitespace-nowrap\">{t('nav.used')}</Link>\n              <Link to=\"/auctions\" className=\"hover:text-gold transition whitespace-nowrap\">{t('nav.auctions')}</Link>\n              <Link to=\"/blog\" className=\"hover:text-gold transition whitespace-nowrap\">{t('nav.blog')}</Link>\n\n              <WishlistIconButton />\n              <CartIconButton />\n\n              {isAuthenticated ? (\n                <>\n                  <Link to=\"/orders\" className=\"hover:text-gold transition whitespace-nowrap\">{t('nav.orders')}</Link>\n                  {(user?.roles?.includes('admin') || user?.roles?.includes('super_admin')) && (\n                    <Link to=\"/admin/dashboard\" className=\"hover:text-gold transition whitespace-nowrap\">{t('nav.admin')}</Link>\n                  )}\n                  <button onClick={logout} className=\"hover:text-gold transition whitespace-nowrap min-h-[44px]\">\n                    {t('common.logout')}\n                  </button>\n                </>\n              ) : (\n                <>\n                  <Link to=\"/login\" className=\"hover:text-gold transition whitespace-nowrap\">\n                    {t('common.login')}\n                  </Link>\n                  {/* تم حذف زر التسجيل من الهيدر */}\n                </>\n              )}\n\n              {/* زر اللغة في الديسكتوب فقط */}\n              <button\n                onClick={toggleLanguage}\n                className=\"bg-charcoal-light px-3 py-2 rounded-luxury hover:bg-gold hover:text-charcoal transition font-semibold min-w-[44px] min-h-[44px]\"\n                aria-label={t('common.toggleLanguage')}\n              >\n                {language === 'ar' ? 'EN' : 'AR'}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* ===== Mobile Search Overlay ===== */}\n      {mobileSearchOpen && (\n        <div className=\"fixed inset-0 bg-charcoal z-[60] lg:hidden\">\n          <div className=\"h-14 flex items-center px-3 border-b border-charcoal-light\">\n            <form onSubmit={handleSearch} className=\"flex-1 flex items-center gap-2\">\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder={t('common.search')}\n                className=\"flex-1 px-4 py-2.5 rounded-lg bg-charcoal-light text-ivory placeholder-taupe focus:outline-none focus:ring-2 focus:ring-gold min-h-[44px]\"\n                autoFocus\n              />\n              <button\n                type=\"button\"\n                onClick={closeMobileSearch}\n                className=\"p-2.5 rounded-lg hover:bg-charcoal-light min-w-[44px] min-h-[44px] flex items-center justify-center\"\n                aria-label=\"Close\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* ===== Mobile/Tablet Drawer (<lg) ===== */}\n      {mobileMenuOpen && (\n        <>\n          <div className=\"fixed inset-0 bg-black/50 z-[60] lg:hidden\" onClick={closeMobileMenu} />\n          <div\n            className=\"fixed top-0 h-full w-72 bg-charcoal z-[60] lg:hidden shadow-luxury overflow-y-auto\"\n            style={{ insetInlineStart: 0 }}\n          >\n            {/* شريط علوي: زر اللغة + زر الإغلاق على نفس الصف\n                - بالعربية: اللغة يمين والإغلاق يسار\n                - بالإنجليزية: اللغة يسار والإغلاق يمين */}\n            <div className=\"p-3 border-b border-charcoal-light\">\n              {i18n.language === 'ar' ? (\n                <div className=\"flex items-center justify-between\">\n                  {/* زر اللغة يمين */}\n                  <button\n                    onClick={toggleLanguage}\n                    className=\"w-9 h-9 rounded-md bg-charcoal-light hover:bg-gold hover:text-charcoal font-bold text-sm flex items-center justify-center\"\n                    aria-label={t('common.toggleLanguage')}\n                  >\n                    {/* عندما اللغة عربية نعرض E (التبديل للإنجليزية) */}\n                    E\n                  </button>\n\n                  {/* زر الإغلاق يسار */}\n                  <button\n                    onClick={closeMobileMenu}\n                    className=\"p-2 rounded-lg hover:bg-charcoal-light min-w-[36px] min-h-[36px] flex items-center justify-center\"\n                    aria-label=\"Close menu\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n              ) : (\n                <div className=\"flex items-center justify-between\">\n                  {/* زر الإغلاق يمين */}\n                  <button\n                    onClick={closeMobileMenu}\n                    className=\"p-2 rounded-lg hover:bg-charcoal-light min-w-[36px] min-h-[36px] flex items-center justify-center\"\n                    aria-label=\"Close menu\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n\n                  {/* زر اللغة يسار */}\n                  <button\n                    onClick={toggleLanguage}\n                    className=\"w-9 h-9 rounded-md bg-charcoal-light hover:bg-gold hover:text-charcoal font-bold text-sm flex items-center justify-center\"\n                    aria-label={t('common.toggleLanguage')}\n                  >\n                    {/* عندما اللغة إنجليزية نعرض ع (التبديل للعربية) */}\n                    ع\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* روابط القائمة */}\n            <nav className=\"p-4 space-y-1\">\n              <Link to=\"/\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                {t('nav.home')}\n              </Link>\n              <Link to=\"/new\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                {t('nav.new')}\n              </Link>\n              <Link to=\"/used\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                {t('nav.used')}\n              </Link>\n              <Link to=\"/auctions\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                {t('nav.auctions')}\n              </Link>\n              <Link to=\"/blog\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                {t('nav.blog')}\n              </Link>\n\n              {isAuthenticated ? (\n                <>\n                  <div className=\"border-t border-charcoal-light my-2 pt-2\">\n                    <Link to=\"/orders\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                      {t('nav.orders')}\n                    </Link>\n                    <Link to=\"/account\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                      {t('nav.account')}\n                    </Link>\n                    {user?.roles?.includes('seller') && (\n                      <Link to=\"/seller/dashboard\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                        {t('nav.seller')}\n                      </Link>\n                    )}\n                    {(user?.roles?.includes('admin') || user?.roles?.includes('super_admin')) && (\n                      <Link to=\"/admin/dashboard\" onClick={closeMobileMenu} className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\">\n                        {t('nav.admin')}\n                      </Link>\n                    )}\n                  </div>\n                  <button\n                    onClick={() => { logout(); closeMobileMenu(); }}\n                    className=\"w-full text-left py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px]\"\n                  >\n                    {t('common.logout')}\n                  </button>\n                </>\n              ) : (\n                <>\n                  <div className=\"border-t border-charcoal-light my-2 pt-2\">\n                    <Link\n                      to=\"/login\"\n                      onClick={closeMobileMenu}\n                      className=\"block py-3 px-4 hover:bg-charcoal-light rounded-lg transition min-h-[44px] flex items-center\"\n                    >\n                      {t('common.login')}\n                    </Link>\n                    {/* لا زر تسجيل في الجوال */}\n                  </div>\n                </>\n              )}\n            </nav>\n          </div>\n        </>\n      )}\n    </nav>\n  );\n}\n","size_bytes":14416},"frontend/src/components/wishlist/WishlistIconButton.tsx":{"content":"import { Link } from \"react-router-dom\";\nimport { useWishlistStore } from \"../../store/wishlistStore\";\n\nexport default function WishlistIconButton() {\n  const count = useWishlistStore((s) => s.count());\n\n  return (\n    <Link\n      to=\"/wishlist\"\n      className=\"relative p-2.5 rounded-lg hover:bg-charcoal-light transition min-w-[44px] min-h-[44px] flex items-center justify-center\"\n      aria-label=\"Wishlist\"\n    >\n      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n        <path\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          d=\"M20.8 4.6a5 5 0 0 0-7.1 0L12 6.3l-1.7-1.7a5 5 0 0 0-7.1 7.1L12 22l8.8-10.3a5 5 0 0 0 0-7.1z\"\n        />\n      </svg>\n      {count > 0 && (\n        <span className=\"absolute -top-1 -end-1 bg-gold text-charcoal text-[11px] px-1.5 rounded-full font-semibold min-w-[20px] h-[20px] flex items-center justify-center\">\n          {count}\n        </span>\n      )}\n    </Link>\n  );\n}\n","size_bytes":996},"frontend/src/pages/WishlistPage.tsx":{"content":"import { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { useWishlistStore } from \"../store/wishlistStore\";\nimport { useCartStore } from \"../store/cartStore\";\nimport SARIcon from \"../components/common/SARIcon\";\n\nexport default function WishlistPage() {\n  const { t, i18n } = useTranslation();\n  const lang = i18n.language as \"ar\" | \"en\";\n  const locale = lang === \"ar\" ? \"ar-SA\" : \"en-US\";\n\n  const { items, remove } = useWishlistStore();\n  const { add: addToCart } = useCartStore();\n\n  const [qtyById, setQtyById] = useState<Record<string, number>>({});\n  const getQty = (id: string) => qtyById[id] ?? 1;\n  const setQty = (id: string, v: number) =>\n    setQtyById((s) => ({ ...s, [id]: v }));\n\n  const formatNumber = (v: number) =>\n    new Intl.NumberFormat(locale, {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(v);\n\n  const handleAddToCart = (item: typeof items[0]) => {\n    const qty = getQty(item.id);\n    addToCart(\n      {\n        id: item.id,\n        name: item.name,\n        price: item.price,\n        image: item.image,\n        brand: item.brand,\n      },\n      qty\n    );\n  };\n\n  if (items.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-sand py-12\">\n        <div className=\"max-w-2xl mx-auto px-4 text-center\">\n          <svg className=\"w-20 h-20 mx-auto text-taupe mb-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M20.8 4.6a5 5 0 0 0-7.1 0L12 6.3l-1.7-1.7a5 5 0 0 0-7.1 7.1L12 22l8.8-10.3a5 5 0 0 0 0-7.1z\"/>\n          </svg>\n          <h1 className=\"text-2xl font-bold text-charcoal mb-2\">{t(\"wishlist.empty\")}</h1>\n          <p className=\"text-taupe mb-6\">{t(\"wishlist.emptyDesc\")}</p>\n          <Link to=\"/new\" className=\"inline-block bg-gold text-charcoal px-6 py-3 rounded-luxury hover:bg-gold-hover transition font-semibold\">\n            {t(\"wishlist.continueShopping\")}\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-sand py-6 sm:py-8\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12\">\n        <div className=\"flex justify-between items-center mb-4 sm:mb-6\">\n          <h1 className=\"text-xl sm:text-2xl font-extrabold text-charcoal\">{t(\"wishlist.title\")}</h1>\n          <p className=\"text-taupe text-sm sm:text-base\">\n            {items.length} {t(\"wishlist.items\")}\n          </p>\n        </div>\n\n        <div className=\"space-y-4\">\n          {items.map((item) => (\n            <div key={item.id} className=\"bg-ivory rounded-xl shadow-sm px-3 py-3 sm:px-4 sm:py-4\">\n              {/* Mobile-first: صورة + تفاصيل */}\n              <div className=\"grid grid-cols-[84px_1fr] gap-3 sm:gap-4 md:grid-cols-[minmax(96px,112px)_1fr_minmax(260px,300px)] md:items-start\">\n\n                {/* الصورة */}\n                <div className=\"col-span-1\">\n                  <div className=\"aspect-square rounded-lg overflow-hidden bg-sand/60\">\n                    {item.image ? (\n                      <img src={item.image} alt={item.name} className=\"w-full h-full object-cover\" loading=\"lazy\" />\n                    ) : (\n                      <div className=\"w-full h-full grid place-items-center text-taupe\">\n                        <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path d=\"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6z\" />\n                        </svg>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* التفاصيل + السعر (جوال) */}\n                <div className=\"col-span-1 md:col-auto min-w-0\">\n                  <div className=\"flex justify-between md:block\">\n                    <div className=\"min-w-0\">\n                      <h3 className=\"text-base sm:text-lg font-semibold text-charcoal leading-snug line-clamp-2\">{item.name}</h3>\n                      {item.brand && <p className=\"text-xs sm:text-sm text-taupe mt-1\">{item.brand}</p>}\n                    </div>\n\n                    {/* السعر يظهر بجانب العنوان على الجوال */}\n                    <div className=\"md:hidden ms-3 shrink-0 text-gold font-extrabold text-base inline-flex items-center gap-1\">\n                      {formatNumber(item.price)} <SARIcon size={16} />\n                    </div>\n                  </div>\n\n                  {/* أدوات الجوال: الكمية + إزالة + زر الإضافة */}\n                  <div className=\"mt-3 md:hidden space-y-2 min-w-0\">\n                    <div className=\"flex items-center gap-3\">\n                      <label className=\"text-sm text-taupe\">{t(\"common.quantity\", \"الكمية\")}</label>\n                      <select\n                        value={getQty(item.id)}\n                        onChange={(e) => setQty(item.id, Number(e.target.value))}\n                        className=\"h-10 min-w-[72px] rounded-lg border border-sand bg-white px-2 pr-6 text-charcoal focus:outline-none focus:ring-2 focus:ring-gold/60\"\n                      >\n                        {Array.from({ length: 10 }).map((_, i) => (\n                          <option key={i + 1} value={i + 1}>{i + 1}</option>\n                        ))}\n                      </select>\n\n                      {/* إزالة (نص قصير ولا يخرج خارج الكرت) */}\n                      <button\n                        onClick={() => remove(item.id)}\n                        className=\"ms-auto inline-flex items-center gap-1 text-sm text-taupe hover:text-red-600 whitespace-nowrap\"\n                      >\n                        <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                          <path d=\"M3 6h18M8 6V4h8v2m-1 0v14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V6h10z\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                        </svg>\n                        <span>{t(\"wishlist.remove\", \"إزالة\")}</span>\n                      </button>\n                    </div>\n\n                    <button\n                      onClick={() => handleAddToCart(item)}\n                      className=\"w-full h-11 rounded-luxury bg-gold text-charcoal font-semibold hover:bg-gold-hover transition inline-flex items-center justify-center gap-2\"\n                    >\n                      {t(\"common.addToCart\")}\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <path strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 6h15l-1.5 9H7.5L6 6zM7 6V4a3 3 0 016 0v2\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n\n                {/* عمود السعر/الإجراءات على md وفوق */}\n                <div className=\"hidden md:block md:text-end\">\n                  <div className=\"text-gold font-extrabold text-xl inline-flex items-center gap-1\">\n                    {formatNumber(item.price)} <SARIcon size={18} />\n                  </div>\n\n                  <div className=\"mt-3 flex justify-end items-center gap-3\">\n                    <div className=\"inline-flex items-center\">\n                      <label className=\"sr-only\" htmlFor={`qty-${item.id}`}>{t(\"common.quantity\", \"الكمية\")}</label>\n                      <select\n                        id={`qty-${item.id}`}\n                        value={getQty(item.id)}\n                        onChange={(e) => setQty(item.id, Number(e.target.value))}\n                        className=\"h-10 min-w-[72px] rounded-lg border border-sand bg-white px-2 pr-6 text-charcoal focus:outline-none focus:ring-2 focus:ring-gold/60\"\n                      >\n                        {Array.from({ length: 10 }).map((_, i) => (\n                          <option key={i + 1} value={i + 1}>{i + 1}</option>\n                        ))}\n                      </select>\n                    </div>\n\n                    <button\n                      onClick={() => handleAddToCart(item)}\n                      className=\"h-11 px-5 rounded-luxury bg-gold text-charcoal font-semibold hover:bg-gold-hover transition inline-flex items-center gap-2\"\n                    >\n                      {t(\"common.addToCart\")}\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <path strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 6h15l-1.5 9H7.5L6 6zM7 6V4a3 3 0 016 0v2\" />\n                      </svg>\n                    </button>\n                  </div>\n\n                  <div className=\"mt-2\">\n                    <button\n                      onClick={() => remove(item.id)}\n                      className=\"inline-flex items-center gap-2 text-sm text-taupe hover:text-red-600\"\n                    >\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <path d=\"M3 6h18M8 6V4h8v2m-1 0v14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V6h10z\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                      <span>{t(\"wishlist.remove\", \"إزالة\")}</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* متابعة التسوق */}\n        <div className=\"text-center mt-6\">\n          <Link\n            to=\"/\"\n            className=\"inline-flex items-center justify-center px-5 py-2 rounded-luxury bg-gold text-charcoal font-semibold hover:bg-gold-hover transition\"\n          >\n            {t(\"wishlist.continueShopping\")}\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9915},"frontend/src/components/layout/AccountLayout.tsx":{"content":"import { useState } from 'react';\nimport { NavLink, Outlet } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nexport default function AccountLayout() {\n  const { t } = useTranslation();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const navItems = [\n    { path: '/account', label: t('account.overview'), icon: '👤' },\n    { path: '/account/orders', label: t('account.orders'), icon: '📦' },\n    { path: '/account/bids', label: t('account.bids'), icon: '🔨' },\n    { path: '/account/favorites', label: t('account.favorites'), icon: '❤️' },\n    { path: '/account/support', label: t('account.support'), icon: '💬' },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-ivory\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-4 sm:py-6 md:py-8\">\n        <div className=\"flex flex-col lg:flex-row gap-4 sm:gap-6 md:gap-8\">\n          {/* Mobile Menu Button */}\n          <button\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            className=\"lg:hidden bg-charcoal text-ivory px-4 py-3 rounded-luxury min-h-[44px] font-semibold\"\n          >\n            {sidebarOpen ? t('common.close') : t('account.menu')}\n          </button>\n\n          {/* Sidebar Navigation */}\n          <aside\n            className={`${\n              sidebarOpen ? 'block' : 'hidden'\n            } lg:block w-full lg:w-64 flex-shrink-0`}\n          >\n            <div className=\"bg-white rounded-luxury p-4 sm:p-6 shadow-luxury\">\n              <h2 className=\"text-lg sm:text-xl font-semibold text-charcoal mb-4 sm:mb-6\">{t('account.myAccount')}</h2>\n              <nav className=\"space-y-1 sm:space-y-2\">\n                {navItems.map((item) => (\n                  <NavLink\n                    key={item.path}\n                    to={item.path}\n                    end={item.path === '/account'}\n                    onClick={() => setSidebarOpen(false)}\n                    className={({ isActive }) =>\n                      `flex items-center gap-3 px-3 sm:px-4 py-3 rounded-luxury transition min-h-[44px] ${\n                        isActive\n                          ? 'bg-gold text-charcoal font-semibold'\n                          : 'text-charcoal-light hover:bg-sand'\n                      }`\n                    }\n                  >\n                    <span className=\"text-lg sm:text-xl\">{item.icon}</span>\n                    <span className=\"text-sm sm:text-base\">{item.label}</span>\n                  </NavLink>\n                ))}\n              </nav>\n            </div>\n          </aside>\n\n          {/* Main Content */}\n          <main className=\"flex-1 min-w-0\">\n            <Outlet />\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2725},"backend/app/schemas/__init__.py":{"content":"# Schemas module\n","size_bytes":17},"frontend/src/pages/SellerDashboardPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface DashboardStats {\n  totalSales: number;\n  activeProducts: number;\n  activeAuctions: number;\n  pendingOrders: number;\n  totalEarnings: number;\n  monthlyEarnings: number;\n}\n\nexport default function SellerDashboardPage() {\n  const { t } = useTranslation();\n  const { language } = useUIStore();\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      const mockStats: DashboardStats = {\n        totalSales: 147,\n        activeProducts: 23,\n        activeAuctions: 5,\n        pendingOrders: 8,\n        totalEarnings: 45230.50,\n        monthlyEarnings: 12450.00,\n      };\n\n      setStats(mockStats);\n      setLoading(false);\n    };\n\n    fetchStats();\n  }, []);\n\n  if (loading || !stats) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  const kpiCards = [\n    {\n      label: t('seller.totalSales'),\n      value: stats.totalSales,\n      icon: '📈',\n      color: 'bg-blue-50',\n      link: '/seller/orders',\n    },\n    {\n      label: t('seller.activeProducts'),\n      value: stats.activeProducts,\n      icon: '🛍️',\n      color: 'bg-green-50',\n      link: '/seller/products',\n    },\n    {\n      label: t('seller.activeAuctions'),\n      value: stats.activeAuctions,\n      icon: '🔨',\n      color: 'bg-purple-50',\n      link: '/seller/auctions',\n    },\n    {\n      label: t('seller.pendingOrders'),\n      value: stats.pendingOrders,\n      icon: '📦',\n      color: 'bg-gold bg-opacity-20',\n      link: '/seller/orders',\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h1 className=\"text-h2 text-charcoal mb-2\">{t('seller.dashboard')}</h1>\n        <p className=\"text-taupe\">{t('seller.welcomeMessage')}</p>\n      </div>\n\n      {/* Earnings Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"bg-gradient-to-br from-gold to-gold-hover rounded-luxury p-6 shadow-luxury text-charcoal\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <span className=\"text-3xl\">💰</span>\n            <h3 className=\"text-h3\">{t('seller.totalEarnings')}</h3>\n          </div>\n          <p className=\"text-4xl font-bold\">{formatPrice(stats.totalEarnings, language)}</p>\n          <Link to=\"/seller/earnings\" className=\"text-sm underline mt-2 inline-block hover:text-charcoal-light\">\n            {t('seller.viewDetails')}\n          </Link>\n        </div>\n\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <span className=\"text-3xl\">📅</span>\n            <h3 className=\"text-h3 text-charcoal\">{t('seller.monthlyEarnings')}</h3>\n          </div>\n          <p className=\"text-4xl font-bold text-charcoal\">{formatPrice(stats.monthlyEarnings, language)}</p>\n          <p className=\"text-sm text-taupe mt-2\">{t('seller.thisMonth')}</p>\n        </div>\n      </div>\n\n      {/* KPI Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {kpiCards.map((card, index) => (\n          <Link\n            key={index}\n            to={card.link}\n            className=\"bg-white rounded-luxury p-6 shadow-luxury hover:shadow-luxury-hover transition\"\n          >\n            <div className={`w-12 h-12 ${card.color} rounded-luxury flex items-center justify-center mb-4`}>\n              <span className=\"text-2xl\">{card.icon}</span>\n            </div>\n            <p className=\"text-3xl font-bold text-charcoal mb-1\">{card.value}</p>\n            <p className=\"text-taupe text-sm\">{card.label}</p>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":4112},"backend/app/schemas/product.py":{"content":"from pydantic import BaseModel\nfrom typing import List, Optional\nfrom datetime import datetime\n\n\nclass ProductImageCreate(BaseModel):\n    url: str\n    sort_order: int = 0\n\n\nclass ProductImageResponse(BaseModel):\n    id: int\n    url: str\n    sort_order: int\n\n    class Config:\n        from_attributes = True\n\n\nclass ProductCreate(BaseModel):\n    title: str\n    brand: Optional[str] = None\n    category: Optional[str] = None\n    size_ml: Optional[int] = None\n    concentration: Optional[str] = None\n    condition: str\n    description: Optional[str] = None\n    type: str = \"listing\"\n    price: Optional[float] = None\n    images: List[str] = []\n\n\nclass ProductUpdate(BaseModel):\n    title: Optional[str] = None\n    brand: Optional[str] = None\n    category: Optional[str] = None\n    size_ml: Optional[int] = None\n    concentration: Optional[str] = None\n    condition: Optional[str] = None\n    description: Optional[str] = None\n    price: Optional[float] = None\n    status: Optional[str] = None\n\n\nclass ProductResponse(BaseModel):\n    id: int\n    seller_id: int\n    title: str\n    brand: Optional[str]\n    category: Optional[str]\n    size_ml: Optional[int]\n    concentration: Optional[str]\n    condition: str\n    description: Optional[str]\n    type: str\n    price: Optional[float]\n    status: str\n    allow_auth_check: bool\n    created_at: datetime\n    images: List[ProductImageResponse] = []\n\n    class Config:\n        from_attributes = True\n\n\nclass ProductModeration(BaseModel):\n    status: str\n    reason: Optional[str] = None\n","size_bytes":1524},"frontend/src/services/productService.ts":{"content":"import { Product } from '../types';\n\n// Mock product data\nconst mockProducts: Product[] = [\n  {\n    id: 1,\n    seller_id: 1,\n    name_ar: 'شانيل رقم 5',\n    name_en: 'Chanel No 5',\n    description_ar: 'عطر كلاسيكي فاخر مع نفحات من الياسمين والورد والفانيليا',\n    description_en: 'Classic luxury perfume with jasmine, rose and vanilla notes',\n    product_type: 'eau_de_parfum',\n    brand: 'Chanel',\n    category: 'floral',\n    base_price: 150.00,\n    size_ml: 100,\n    concentration: 'EDP',\n    condition: 'new',\n    stock_quantity: 10,\n    image_urls: [\n      'https://via.placeholder.com/600x600?text=Chanel+No+5+Main',\n      'https://via.placeholder.com/600x600?text=Chanel+No+5+Side',\n      'https://via.placeholder.com/600x600?text=Chanel+No+5+Back',\n      'https://via.placeholder.com/600x600?text=Chanel+No+5+Detail'\n    ],\n    status: 'published',\n    created_at: '2024-01-01T00:00:00Z',\n    updated_at: '2024-01-01T00:00:00Z',\n  },\n  {\n    id: 2,\n    seller_id: 1,\n    name_ar: 'ديور سوفاج',\n    name_en: 'Dior Sauvage',\n    description_ar: 'عطر خشبي حار',\n    description_en: 'Woody spicy fragrance',\n    product_type: 'eau_de_toilette',\n    brand: 'Dior',\n    category: 'woody',\n    base_price: 120.00,\n    size_ml: 100,\n    concentration: 'EDT',\n    condition: 'new',\n    stock_quantity: 15,\n    image_urls: ['https://via.placeholder.com/300x300?text=Dior+Sauvage'],\n    status: 'published',\n    created_at: '2024-01-02T00:00:00Z',\n    updated_at: '2024-01-02T00:00:00Z',\n  },\n  {\n    id: 3,\n    seller_id: 2,\n    name_ar: 'توم فورد أود وود',\n    name_en: 'Tom Ford Oud Wood',\n    description_ar: 'عطر شرقي فاخر',\n    description_en: 'Luxurious oriental scent',\n    product_type: 'eau_de_parfum',\n    brand: 'Tom Ford',\n    category: 'oriental',\n    base_price: 280.00,\n    size_ml: 50,\n    concentration: 'EDP',\n    condition: 'used',\n    stock_quantity: 8,\n    image_urls: ['https://via.placeholder.com/300x300?text=Tom+Ford+Oud'],\n    status: 'published',\n    created_at: '2024-01-03T00:00:00Z',\n    updated_at: '2024-01-03T00:00:00Z',\n  },\n  {\n    id: 4,\n    seller_id: 2,\n    name_ar: 'كريد أفينتوس',\n    name_en: 'Creed Aventus',\n    description_ar: 'عطر فواكه منعش',\n    description_en: 'Fresh fruity fragrance',\n    product_type: 'eau_de_parfum',\n    brand: 'Creed',\n    category: 'fresh',\n    base_price: 350.00,\n    size_ml: 100,\n    concentration: 'EDP',\n    condition: 'new',\n    stock_quantity: 5,\n    image_urls: ['https://via.placeholder.com/300x300?text=Creed+Aventus'],\n    status: 'published',\n    created_at: '2024-01-04T00:00:00Z',\n    updated_at: '2024-01-04T00:00:00Z',\n  },\n  {\n    id: 5,\n    seller_id: 1,\n    name_ar: 'جو مالون ليمون باسل',\n    name_en: 'Jo Malone Lime Basil',\n    description_ar: 'عطر حمضي منعش',\n    description_en: 'Fresh citrus scent',\n    product_type: 'eau_de_cologne',\n    brand: 'Jo Malone',\n    category: 'citrus',\n    base_price: 95.00,\n    size_ml: 100,\n    concentration: 'EDC',\n    condition: 'new',\n    stock_quantity: 20,\n    image_urls: ['https://via.placeholder.com/300x300?text=Jo+Malone'],\n    status: 'published',\n    created_at: '2024-01-05T00:00:00Z',\n    updated_at: '2024-01-05T00:00:00Z',\n  },\n  {\n    id: 6,\n    seller_id: 3,\n    name_ar: 'فيرساتشي إيروس',\n    name_en: 'Versace Eros',\n    description_ar: 'عطر حار منعش',\n    description_en: 'Fresh spicy fragrance',\n    product_type: 'eau_de_toilette',\n    brand: 'Versace',\n    category: 'fresh',\n    base_price: 85.00,\n    size_ml: 100,\n    concentration: 'EDT',\n    condition: 'used',\n    stock_quantity: 12,\n    image_urls: ['https://via.placeholder.com/300x300?text=Versace+Eros'],\n    status: 'published',\n    created_at: '2024-01-06T00:00:00Z',\n    updated_at: '2024-01-06T00:00:00Z',\n  },\n];\n\ninterface FetchProductsParams {\n  type?: string;\n  brand?: string;\n  category?: string;\n  condition?: string;\n  sort?: string;\n  page?: number;\n  page_size?: number;\n  search?: string;\n  min_price?: number;\n  max_price?: number;\n}\n\nexport const fetchProductById = async (id: number) => {\n  await new Promise(resolve => setTimeout(resolve, 300));\n  \n  const product = mockProducts.find(p => p.id === id);\n  if (!product) {\n    throw new Error('Product not found');\n  }\n  \n  return product;\n};\n\nexport const fetchRelatedProducts = async (productId: number, limit: number = 4) => {\n  await new Promise(resolve => setTimeout(resolve, 300));\n  \n  const product = mockProducts.find(p => p.id === productId);\n  if (!product) {\n    return [];\n  }\n  \n  return mockProducts\n    .filter(p => p.id !== productId && (p.category === product.category || p.brand === product.brand))\n    .slice(0, limit);\n};\n\nexport const fetchProducts = async (params: FetchProductsParams = {}) => {\n  // Simulate API delay\n  await new Promise(resolve => setTimeout(resolve, 300));\n\n  let filtered = [...mockProducts];\n\n  // Filter by search\n  if (params.search) {\n    const searchLower = params.search.toLowerCase();\n    filtered = filtered.filter(p =>\n      p.name_en.toLowerCase().includes(searchLower) ||\n      p.name_ar.includes(params.search!) ||\n      p.brand.toLowerCase().includes(searchLower)\n    );\n  }\n\n  // Filter by brand\n  if (params.brand) {\n    filtered = filtered.filter(p => p.brand === params.brand);\n  }\n\n  // Filter by category\n  if (params.category) {\n    filtered = filtered.filter(p => p.category === params.category);\n  }\n\n  // Filter by price range\n  if (params.min_price !== undefined) {\n    filtered = filtered.filter(p => p.base_price >= params.min_price!);\n  }\n  if (params.max_price !== undefined) {\n    filtered = filtered.filter(p => p.base_price <= params.max_price!);\n  }\n\n  // Sort\n  if (params.sort === 'price_asc') {\n    filtered.sort((a, b) => a.base_price - b.base_price);\n  } else if (params.sort === 'price_desc') {\n    filtered.sort((a, b) => b.base_price - a.base_price);\n  } else if (params.sort === 'popularity') {\n    // Random for now\n    filtered.sort(() => Math.random() - 0.5);\n  } else {\n    // Default: newest first\n    filtered.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n  }\n\n  // Pagination\n  const page = params.page || 1;\n  const pageSize = params.page_size || 12;\n  const start = (page - 1) * pageSize;\n  const end = start + pageSize;\n  const paginated = filtered.slice(start, end);\n\n  return {\n    products: paginated,\n    total: filtered.length,\n    page,\n    page_size: pageSize,\n    total_pages: Math.ceil(filtered.length / pageSize),\n  };\n};\n","size_bytes":6619},"frontend/src/components/layout/Layout.tsx":{"content":"import { Outlet } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport Footer from './Footer';\n\nexport default function Layout() {\n  return (\n    <div className=\"min-h-screen bg-ivory flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-4 sm:py-6 md:py-8\">\n        <Outlet />\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":403},"frontend/src/pages/SellerAuctionsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface Auction {\n  id: number;\n  productName: string;\n  productNameAr: string;\n  startDate: string;\n  endDate: string;\n  startingPrice: number;\n  currentBid: number;\n  totalBids: number;\n  status: 'active' | 'ended' | 'upcoming';\n}\n\nexport default function SellerAuctionsPage() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const [auctions, setAuctions] = useState<Auction[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<string>('all');\n\n  useEffect(() => {\n    fetchAuctions();\n  }, []);\n\n  const fetchAuctions = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const mockAuctions: Auction[] = [\n      {\n        id: 1,\n        productName: 'Chanel No 5 - Rare Edition',\n        productNameAr: 'شانيل رقم 5 - إصدار نادر',\n        startDate: '2024-10-01T10:00:00Z',\n        endDate: '2024-10-10T22:00:00Z',\n        startingPrice: 200.00,\n        currentBid: 385.00,\n        totalBids: 24,\n        status: 'active',\n      },\n      {\n        id: 2,\n        productName: 'Tom Ford Oud Wood Limited',\n        productNameAr: 'توم فورد أود وود محدود',\n        startDate: '2024-09-25T12:00:00Z',\n        endDate: '2024-09-30T20:00:00Z',\n        startingPrice: 300.00,\n        currentBid: 520.00,\n        totalBids: 38,\n        status: 'ended',\n      },\n      {\n        id: 3,\n        productName: 'Creed Royal Oud',\n        productNameAr: 'كريد رويال عود',\n        startDate: '2024-10-15T14:00:00Z',\n        endDate: '2024-10-25T18:00:00Z',\n        startingPrice: 250.00,\n        currentBid: 0,\n        totalBids: 0,\n        status: 'upcoming',\n      },\n      {\n        id: 4,\n        productName: 'Dior Sauvage Elixir',\n        productNameAr: 'ديور سوفاج إليكسير',\n        startDate: '2024-10-02T08:00:00Z',\n        endDate: '2024-10-12T16:00:00Z',\n        startingPrice: 180.00,\n        currentBid: 295.00,\n        totalBids: 17,\n        status: 'active',\n      },\n      {\n        id: 5,\n        productName: 'Yves Saint Laurent La Nuit',\n        productNameAr: 'إيف سان لوران لا نويت',\n        startDate: '2024-09-20T10:00:00Z',\n        endDate: '2024-09-28T22:00:00Z',\n        startingPrice: 150.00,\n        currentBid: 275.00,\n        totalBids: 31,\n        status: 'ended',\n      },\n    ];\n\n    setAuctions(mockAuctions);\n    setLoading(false);\n  };\n\n  const filteredAuctions = filter === 'all'\n    ? auctions\n    : auctions.filter(a => a.status === filter);\n\n  const getStatusColor = (status: Auction['status']) => {\n    switch (status) {\n      case 'active': return 'text-green-600 bg-green-100';\n      case 'ended': return 'text-gray-600 bg-gray-200';\n      case 'upcoming': return 'text-blue-600 bg-blue-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('seller.auctions')}</h1>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setFilter('all')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'all' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.allAuctions')}\n            </button>\n            <button\n              onClick={() => setFilter('active')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'active' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.active')}\n            </button>\n            <button\n              onClick={() => setFilter('upcoming')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'upcoming' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.upcoming')}\n            </button>\n            <button\n              onClick={() => setFilter('ended')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'ended' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.ended')}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.product')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.startDate')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.endDate')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.startingPrice')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.currentBid')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.totalBids')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredAuctions.map((auction) => (\n                <tr key={auction.id} className=\"border-b border-gray-100 hover:bg-sand transition\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{auction.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">\n                    {i18n.language === 'ar' ? auction.productNameAr : auction.productName}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(auction.startDate).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      month: 'short',\n                      day: 'numeric',\n                    })}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(auction.endDate).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      month: 'short',\n                      day: 'numeric',\n                    })}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{formatPrice(auction.startingPrice, language)}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">\n                    {auction.currentBid > 0 ? formatPrice(auction.currentBid, language) : '-'}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{auction.totalBids}</td>\n                  <td className=\"px-4 py-4\">\n                    <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(auction.status)}`}>\n                      {t(`seller.${auction.status}`)}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <Link\n                      to={`/auction/${auction.id}`}\n                      className=\"text-gold hover:text-gold-hover text-sm font-semibold\"\n                    >\n                      {t('seller.view')}\n                    </Link>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredAuctions.length === 0 && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-taupe\">{t('seller.noAuctions')}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":8508},"backend/app/core/security.py":{"content":"import bcrypt\nimport jwt\nfrom datetime import datetime, timedelta\nfrom typing import Optional, Dict, Any\nfrom .config import settings\n\n\ndef hash_password(password: str) -> str:\n    return bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt()).decode('utf-8')\n\n\ndef verify_password(plain_password: str, hashed_password: str) -> bool:\n    return bcrypt.checkpw(plain_password.encode('utf-8'), hashed_password.encode('utf-8'))\n\n\ndef create_access_token(data: Dict[str, Any], expires_delta: Optional[timedelta] = None) -> str:\n    to_encode = data.copy()\n    if expires_delta:\n        expire = datetime.utcnow() + expires_delta\n    else:\n        expire = datetime.utcnow() + timedelta(seconds=settings.JWT_EXPIRES)\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, settings.JWT_SECRET, algorithm=settings.JWT_ALGORITHM)\n\n\ndef decode_access_token(token: str) -> Optional[Dict[str, Any]]:\n    try:\n        payload = jwt.decode(token, settings.JWT_SECRET, algorithms=[settings.JWT_ALGORITHM])\n        return payload\n    except jwt.PyJWTError:\n        return None\n","size_bytes":1080},"frontend/src/pages/AuctionDetailPage.tsx":{"content":"import { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { useUIStore } from '../store/uiStore';\nimport { useAuthStore } from '../store/authStore';\nimport { fetchAuctionById, fetchAuctionBids, placeBid } from '../services/auctionService';\nimport { Auction, Bid, Product } from '../types';\nimport { formatPrice } from '../utils/currency';\nimport Countdown from '../components/common/Countdown';\n\nexport default function AuctionDetailPage() {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const { language } = useUIStore();\n  const { isAuthenticated } = useAuthStore();\n  \n  const [auction, setAuction] = useState<(Auction & { product: Product }) | null>(null);\n  const [bids, setBids] = useState<Bid[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [bidAmount, setBidAmount] = useState(0);\n  const [bidError, setBidError] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(0);\n\n  const loadAuction = useCallback(async () => {\n    if (!id) return null;\n    \n    try {\n      const auctionData = await fetchAuctionById(parseInt(id));\n      setAuction(auctionData);\n      setBidAmount(auctionData.current_price + auctionData.minimum_increment);\n      \n      const bidsData = await fetchAuctionBids(parseInt(id));\n      setBids(bidsData);\n      return auctionData;\n    } catch (error) {\n      console.error('Error loading auction:', error);\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    loadAuction();\n  }, [loadAuction]);\n\n  useEffect(() => {\n    if (!id) return;\n\n    const pollInterval = setInterval(async () => {\n      try {\n        const auctionData = await fetchAuctionById(parseInt(id));\n        setAuction(auctionData);\n        \n        const bidsData = await fetchAuctionBids(parseInt(id));\n        setBids(bidsData);\n      } catch (error) {\n        console.error('Error polling auction:', error);\n      }\n    }, 5000);\n\n    return () => clearInterval(pollInterval);\n  }, [id]);\n\n  const handleBidSubmit = async () => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n\n    if (!auction) return;\n\n    const minBid = auction.current_price + auction.minimum_increment;\n    if (bidAmount < minBid) {\n      setBidError(t('auction.minBid') + ': ' + formatPrice(minBid, language));\n      return;\n    }\n\n    setBidError('');\n    setSubmitting(true);\n\n    try {\n      await placeBid(auction.id, bidAmount);\n      const updatedAuction = await loadAuction();\n      if (updatedAuction) {\n        setBidAmount(updatedAuction.current_price + updatedAuction.minimum_increment);\n      }\n    } catch (error: any) {\n      setBidError(error.message || t('common.error'));\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const incrementBid = () => {\n    if (!auction) return;\n    setBidAmount(prev => prev + auction.minimum_increment);\n  };\n\n  const decrementBid = () => {\n    if (!auction) return;\n    const minBid = auction.current_price + auction.minimum_increment;\n    setBidAmount(prev => Math.max(minBid, prev - auction.minimum_increment));\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  if (!auction) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.notFound')}</p>\n        <button\n          onClick={() => navigate('/auctions')}\n          className=\"mt-4 bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n        >\n          {t('common.back')}\n        </button>\n      </div>\n    );\n  }\n\n  const product = auction.product;\n  const name = language === 'ar' ? product.name_ar : product.name_en;\n  const description = language === 'ar' ? product.description_ar : product.description_en;\n  const images = product.image_urls || [];\n  const isEnded = new Date(auction.end_time).getTime() < new Date().getTime();\n  const seller = auction.seller || { id: 0, full_name: 'Unknown', verified_seller: false };\n\n  return (\n    <div className=\"space-y-12\">\n      {/* Status Badge */}\n      <div className=\"flex items-center gap-3\">\n        <span className=\"inline-block bg-gold text-charcoal px-4 py-1 rounded-luxury text-sm font-semibold\">\n          {t('catalog.auction')}\n        </span>\n        {product.condition && (\n          <span className=\"text-sm text-taupe\">\n            {product.condition === 'new' ? t('catalog.new') : t('catalog.used')}\n          </span>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* Image Gallery */}\n        <div className=\"space-y-4\">\n          <div className=\"bg-ivory rounded-luxury overflow-hidden aspect-square\">\n            <img\n              src={images[selectedImage] || 'https://via.placeholder.com/600x600?text=Perfume'}\n              alt={name}\n              className=\"w-full h-full object-cover\"\n              onError={(e) => {\n                e.currentTarget.src = 'https://via.placeholder.com/600x600?text=Perfume';\n              }}\n            />\n          </div>\n          \n          {images.length > 1 && (\n            <div className=\"grid grid-cols-4 gap-2\">\n              {images.map((img, index) => (\n                <button\n                  key={index}\n                  onClick={() => setSelectedImage(index)}\n                  className={`aspect-square rounded-luxury overflow-hidden border-2 transition ${\n                    selectedImage === index ? 'border-gold' : 'border-transparent'\n                  }`}\n                >\n                  <img\n                    src={img}\n                    alt={`${name} ${index + 1}`}\n                    className=\"w-full h-full object-cover\"\n                    onError={(e) => {\n                      e.currentTarget.src = 'https://via.placeholder.com/150x150?text=Perfume';\n                    }}\n                  />\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Product Info */}\n        <div className=\"space-y-6\">\n          <div>\n            <p className=\"text-taupe text-sm mb-2\">{product.brand}</p>\n            <h1 className=\"text-h1 text-charcoal mb-4\">{name}</h1>\n            <p className=\"text-charcoal-light leading-relaxed\">{description}</p>\n          </div>\n\n          <div className=\"border-t border-b border-gray-200 py-6 space-y-3\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('productDetail.size')}</span>\n              <span className=\"text-charcoal font-semibold\">{product.size_ml}ml</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('productDetail.concentration')}</span>\n              <span className=\"text-charcoal font-semibold\">{product.concentration}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('productDetail.category')}</span>\n              <span className=\"text-charcoal font-semibold\">{product.category}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('auction.condition')}</span>\n              <span className=\"text-charcoal font-semibold\">\n                {product.condition === 'new' ? t('catalog.new') : t('catalog.used')}\n              </span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-taupe\">{t('auction.seller')}</span>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-charcoal font-semibold\">{seller.full_name}</span>\n                {seller.verified_seller && (\n                  <span className=\"bg-success text-white text-xs px-2 py-1 rounded-full\">\n                    {t('auction.verifiedSeller')}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Auction Box */}\n          <div className=\"bg-sand rounded-luxury p-6\">\n            {/* Current Bid Display */}\n            <div className=\"mb-6\">\n              <p className=\"text-sm text-taupe mb-1\">{t('auction.currentBid')}</p>\n              <div className=\"flex items-baseline gap-2 mb-2\">\n                <span className=\"text-4xl font-bold text-gold\">{formatPrice(auction.current_price, language)}</span>\n              </div>\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-taupe\">{t('auction.totalBids')}: <span className=\"font-bold text-charcoal\">{bids.length}</span></span>\n                <Countdown \n                  startAt={auction.start_time}\n                  endAt={auction.end_time} \n                  compact\n                  className=\"text-charcoal font-bold\"\n                />\n              </div>\n            </div>\n\n            {/* Bid Controls */}\n            {!isEnded ? (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-3\">\n                  <button\n                    onClick={decrementBid}\n                    className=\"bg-charcoal-light text-ivory w-12 h-12 rounded-luxury font-bold hover:bg-charcoal transition\"\n                    aria-label=\"Decrease bid\"\n                  >\n                    −\n                  </button>\n                  <input\n                    type=\"number\"\n                    value={bidAmount}\n                    onChange={(e) => setBidAmount(parseFloat(e.target.value) || 0)}\n                    className=\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-luxury text-center text-xl font-bold focus:ring-2 focus:ring-gold focus:border-transparent\"\n                    aria-label={t('auction.bidAmount')}\n                  />\n                  <button\n                    onClick={incrementBid}\n                    className=\"bg-charcoal-light text-ivory w-12 h-12 rounded-luxury font-bold hover:bg-charcoal transition\"\n                    aria-label=\"Increase bid\"\n                  >\n                    +\n                  </button>\n                </div>\n\n                {bidError && (\n                  <p className=\"text-alert text-sm\">{bidError}</p>\n                )}\n\n                <button\n                  onClick={handleBidSubmit}\n                  disabled={submitting}\n                  className=\"w-full bg-gold text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-gold-hover transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {submitting ? t('common.loading') : t('auction.placeBid')}\n                </button>\n\n                <p className=\"text-xs text-taupe text-center\">\n                  {t('auction.minBid')}: {formatPrice(auction.current_price + auction.minimum_increment, language)}\n                </p>\n              </div>\n            ) : (\n              <div className=\"text-center py-4\">\n                <p className=\"text-alert font-semibold text-lg\">{t('auction.ended')}</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Bid History */}\n      {bids.length > 0 && (\n        <div className=\"border-t border-gray-200 pt-12\">\n          <h2 className=\"text-h2 text-charcoal mb-6\">{t('auction.bidHistory')}</h2>\n          \n          <div className=\"bg-white rounded-luxury shadow-luxury overflow-hidden\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-sand\">\n                  <tr className=\"border-b border-gray-200\">\n                    <th className=\"text-start py-3 px-4 text-charcoal font-semibold\">{t('auction.seller')}</th>\n                    <th className=\"text-start py-3 px-4 text-charcoal font-semibold\">{t('auction.bidAmount')}</th>\n                    <th className=\"text-start py-3 px-4 text-charcoal font-semibold\">{t('common.time')}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {bids.map((bid, index) => {\n                    const bidderName = bid.bidder?.full_name || 'Anonymous';\n                    const maskedName = bidderName.charAt(0) + '***' + bidderName.charAt(bidderName.length - 1);\n                    \n                    return (\n                      <tr key={bid.id} className={`border-b border-gray-100 ${index === 0 ? 'bg-gold bg-opacity-10' : ''}`}>\n                        <td className=\"py-3 px-4 text-charcoal\">\n                          {maskedName}\n                          {index === 0 && (\n                            <span className=\"ms-2 text-xs bg-gold text-charcoal px-2 py-1 rounded-full font-semibold\">\n                              {t('home.live')}\n                            </span>\n                          )}\n                        </td>\n                        <td className=\"py-3 px-4 font-bold text-gold\">{formatPrice(bid.amount, language)}</td>\n                        <td className=\"py-3 px-4 text-taupe text-sm\">\n                          {new Date(bid.created_at).toLocaleString(language === 'ar' ? 'ar-EG' : 'en-US', {\n                            day: 'numeric',\n                            month: 'short',\n                            hour: '2-digit',\n                            minute: '2-digit'\n                          })}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":13778},"frontend/src/components/layout/Footer.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport BrandLogo from '../brand/BrandLogo';\n\nexport default function Footer() {\n  const { t, i18n } = useTranslation();\n\n  return (\n    <footer\n      dir={i18n.language === 'ar' ? 'rtl' : 'ltr'}\n      className=\"bg-charcoal text-ivory mt-auto\"\n    >\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-6 sm:py-8\">\n        {/* شبكة الروابط */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 md:gap-6\">\n          {/* الشعار + السطر التعريفي */}\n          <div className=\"flex flex-col items-center sm:items-start\">\n            <BrandLogo variant=\"default\" size={52} className=\"mb-3\" />\n            <p className=\"text-[13px] sm:text-sm text-taupe text-center sm:text-start leading-6\">\n              {t('footer.tagline')}\n            </p>\n          </div>\n\n          {/* حول */}\n          <div>\n            <h3 className=\"text-base font-semibold text-gold mb-2.5 md:mb-3.5\">\n              {t('footer.about')}\n            </h3>\n            <ul className=\"space-y-1.5\">\n              {/* زر المدونة */}\n              <li>\n                <Link\n                  to=\"/blog\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('nav.blog')}\n                </Link>\n              </li>\n              <li>\n                <Link\n                  to=\"/about\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.aboutUs')}\n                </Link>\n              </li>\n              <li>\n                <Link\n                  to=\"/authenticity\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.authenticity')}\n                </Link>\n              </li>\n              <li>\n                <Link\n                  to=\"/how-it-works\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.howItWorks')}\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {/* المساعدة */}\n          <div>\n            <h3 className=\"text-base font-semibold text-gold mb-2.5 md:mb-3.5\">\n              {t('footer.help')}\n            </h3>\n            <ul className=\"space-y-1.5\">\n              <li>\n                <Link\n                  to=\"/help\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.helpCenter')}\n                </Link>\n              </li>\n              <li>\n                <Link\n                  to=\"/shipping\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.shipping')}\n                </Link>\n              </li>\n              <li>\n                <Link\n                  to=\"/returns\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.returns')}\n                </Link>\n              </li>\n              <li>\n                <Link\n                  to=\"/contact\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.contact')}\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {/* السياسات */}\n          <div>\n            <h3 className=\"text-base font-semibold text-gold mb-2.5 md:mb-3.5\">\n              {t('footer.policies')}\n            </h3>\n            <ul className=\"space-y-1.5\">\n              <li>\n                <Link\n                  to=\"/privacy\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.privacy')}\n                </Link>\n              </li>\n              <li>\n                <Link\n                  to=\"/terms\"\n                  className=\"text-[13px] sm:text-sm text-taupe hover:text-gold transition block py-1 focus:outline-none focus:ring-2 focus:ring-gold/40 rounded\"\n                >\n                  {t('footer.terms')}\n                </Link>\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        {/* سطر الحقوق */}\n        <div className=\"border-t border-charcoal-light mt-5 md:mt-6 pt-5 md:pt-6\">\n          <p className=\"text-xs sm:text-[13px] text-taupe text-center\">\n            {t('footer.copyright', { year: new Date().getFullYear() })}\n          </p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":5444},"frontend/src/pages/ProductDetail.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport api from '../lib/api';\nimport { Product } from '../types';\nimport { useUIStore } from '../store/uiStore';\nimport { useAuthStore } from '../store/authStore';\nimport { formatPrice } from '../utils/currency';\n\nexport default function ProductDetail() {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const { language } = useUIStore();\n  const { isAuthenticated } = useAuthStore();\n  const [product, setProduct] = useState<Product | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedImage, setSelectedImage] = useState(0);\n  const [quantity, setQuantity] = useState(1);\n\n  useEffect(() => {\n    fetchProduct();\n  }, [id]);\n\n  const fetchProduct = async () => {\n    try {\n      const response = await api.get(`/products/${id}`);\n      setProduct(response.data);\n    } catch (error) {\n      console.error('Failed to fetch product:', error);\n      navigate('/products');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOrder = async () => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n\n    try {\n      await api.post('/orders', {\n        product_id: product?.id,\n        quantity,\n        unit_price: product?.base_price,\n        payment_method: 'COD',\n        shipping_address: 'To be provided'\n      });\n      navigate('/orders');\n    } catch (error: any) {\n      console.error('Failed to create order:', error);\n      alert(error.response?.data?.detail || 'Failed to create order');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-charcoal-light\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return null;\n  }\n\n  const name = language === 'ar' ? product.name_ar : product.name_en;\n  const description = language === 'ar' ? product.description_ar : product.description_en;\n  const images = product.image_urls?.length > 0 ? product.image_urls : ['/placeholder-perfume.jpg'];\n  const isInStock = product.stock_quantity > 0;\n\n  return (\n    <div>\n      <button\n        onClick={() => navigate('/products')}\n        className=\"mb-6 text-gold hover:text-gold-light transition\"\n      >\n        ← {t('common.back')}\n      </button>\n\n      <div className=\"grid lg:grid-cols-2 gap-8\">\n        <div>\n          <div className=\"bg-ivory rounded-luxury overflow-hidden mb-4 aspect-square\">\n            <img\n              src={images[selectedImage]}\n              alt={name}\n              className=\"w-full h-full object-cover\"\n              onError={(e) => {\n                e.currentTarget.src = '/placeholder-perfume.jpg';\n              }}\n            />\n          </div>\n          {images.length > 1 && (\n            <div className=\"flex gap-2\">\n              {images.map((img, idx) => (\n                <button\n                  key={idx}\n                  onClick={() => setSelectedImage(idx)}\n                  className={`w-20 h-20 rounded-luxury overflow-hidden border-2 transition ${\n                    selectedImage === idx ? 'border-gold' : 'border-transparent'\n                  }`}\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        <div className=\"bg-white p-8 rounded-luxury shadow-luxury\">\n          <h1 className=\"text-3xl font-bold text-charcoal mb-4\">{name}</h1>\n          \n          <div className=\"flex items-center gap-4 mb-6\">\n            <span className=\"text-4xl font-bold text-gold\">\n              {formatPrice(product.base_price, language)}\n            </span>\n            <span className={`px-3 py-1 rounded-full text-sm ${isInStock ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n              {isInStock ? t('products.inStock') : t('products.outOfStock')}\n            </span>\n          </div>\n\n          <p className=\"text-charcoal-light mb-6 leading-relaxed\">{description}</p>\n\n          <div className=\"space-y-3 mb-6 border-t border-b border-gray-200 py-4\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-charcoal-light\">{t('common.brand')}:</span>\n              <span className=\"text-charcoal font-semibold\">{product.brand}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-charcoal-light\">{t('products.type')}:</span>\n              <span className=\"text-charcoal font-semibold\">{product.product_type}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-charcoal-light\">{t('products.size')}:</span>\n              <span className=\"text-charcoal font-semibold\">{product.size_ml} ml</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-charcoal-light\">{t('products.concentration')}:</span>\n              <span className=\"text-charcoal font-semibold\">{product.concentration}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-charcoal-light\">{t('common.category')}:</span>\n              <span className=\"text-charcoal font-semibold\">{product.category}</span>\n            </div>\n          </div>\n\n          {isInStock && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-4\">\n                <label className=\"text-charcoal font-medium\">Quantity:</label>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                    className=\"w-8 h-8 bg-charcoal-light text-ivory rounded hover:bg-charcoal transition\"\n                  >\n                    -\n                  </button>\n                  <span className=\"w-12 text-center font-semibold\">{quantity}</span>\n                  <button\n                    onClick={() => setQuantity(Math.min(product.stock_quantity, quantity + 1))}\n                    className=\"w-8 h-8 bg-charcoal-light text-ivory rounded hover:bg-charcoal transition\"\n                  >\n                    +\n                  </button>\n                </div>\n              </div>\n\n              <button\n                onClick={handleOrder}\n                className=\"w-full bg-gold text-charcoal font-semibold py-3 rounded-luxury hover:bg-gold-light transition\"\n              >\n                {t('products.addToCart')}\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6762},"frontend/src/pages/OrderSuccessPage.tsx":{"content":"import { useTranslation } from \"react-i18next\";\nimport { Link, useSearchParams } from \"react-router-dom\";\n\nexport default function OrderSuccessPage() {\n  const { t } = useTranslation();\n  const [searchParams] = useSearchParams();\n  const orderId = searchParams.get(\"orderId\") || \"N/A\";\n\n  return (\n    <div className=\"min-h-screen bg-sand py-16\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"max-w-2xl mx-auto text-center\">\n          <div className=\"mb-8\">\n            <div className=\"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <svg className=\"w-12 h-12 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n            <h1 className=\"text-3xl md:text-4xl font-bold text-charcoal mb-4\">{t('orderSuccess.title')}</h1>\n            <p className=\"text-xl text-taupe mb-2\">{t('orderSuccess.subtitle')}</p>\n            <p className=\"text-lg text-charcoal font-semibold\">\n              {t('orderSuccess.orderNumber')}: <span className=\"text-gold\">{orderId}</span>\n            </p>\n          </div>\n\n          <div className=\"bg-ivory rounded-luxury p-8 mb-8 shadow-sm\">\n            <h2 className=\"text-2xl font-bold text-charcoal mb-4\">{t('orderSuccess.whatNext')}</h2>\n            <ul className=\"text-start space-y-3 text-charcoal\">\n              <li className=\"flex items-start gap-3\">\n                <svg className=\"w-6 h-6 text-gold flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                </svg>\n                <span>{t('orderSuccess.step1')}</span>\n              </li>\n              <li className=\"flex items-start gap-3\">\n                <svg className=\"w-6 h-6 text-gold flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                </svg>\n                <span>{t('orderSuccess.step2')}</span>\n              </li>\n              <li className=\"flex items-start gap-3\">\n                <svg className=\"w-6 h-6 text-gold flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                </svg>\n                <span>{t('orderSuccess.step3')}</span>\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              to=\"/orders\"\n              className=\"inline-block bg-gold text-charcoal px-8 py-4 rounded-luxury hover:bg-gold-hover transition font-semibold\"\n            >\n              {t('orderSuccess.viewOrders')}\n            </Link>\n            <Link\n              to=\"/\"\n              className=\"inline-block bg-charcoal text-ivory px-8 py-4 rounded-luxury hover:bg-charcoal-light transition font-semibold\"\n            >\n              {t('orderSuccess.backToHome')}\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3311},"frontend/src/pages/home/HomeSections/Hero.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { HeroSlide } from '../../../services/homeService';\n\ninterface HeroProps {\n  slides: HeroSlide[];\n}\n\nexport default function Hero({ slides }: HeroProps) {\n  const { i18n } = useTranslation();\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [isPaused, setIsPaused] = useState(false);\n\n  useEffect(() => {\n    if (isPaused || slides.length <= 1) return;\n\n    const interval = setInterval(() => {\n      setCurrentSlide((prev) => (prev + 1) % slides.length);\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [isPaused, slides.length]);\n\n  const goToSlide = (index: number) => {\n    setCurrentSlide(index);\n  };\n\n  if (!slides.length) return null;\n\n  const slide = slides[currentSlide];\n  const lang = i18n.language as 'ar' | 'en';\n\n  return (\n    <div \n      className=\"relative w-full h-[500px] md:h-[600px] overflow-hidden\"\n      onMouseEnter={() => setIsPaused(true)}\n      onMouseLeave={() => setIsPaused(false)}\n    >\n      {slides.map((s, index) => (\n        <div\n          key={s.id}\n          className={`absolute inset-0 transition-opacity duration-700 ${\n            index === currentSlide ? 'opacity-100' : 'opacity-0'\n          }`}\n        >\n          <img\n            src={s.image}\n            alt={s.title[lang]}\n            className=\"w-full h-full object-cover\"\n            loading={index === 0 ? 'eager' : 'lazy'}\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-r from-charcoal/80 to-charcoal/40\" />\n        </div>\n      ))}\n\n      <div className=\"absolute inset-0 flex items-center\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 w-full\">\n          <div className=\"max-w-2xl\">\n            <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-ivory mb-4 animate-fade-in\">\n              {slide.title[lang]}\n            </h1>\n            <p className=\"text-lg md:text-xl text-sand mb-8 animate-fade-in-delay\">\n              {slide.subtitle[lang]}\n            </p>\n            <div className=\"flex flex-wrap gap-4\">\n              <Link\n                to={slide.primaryCta.link}\n                className=\"bg-gold text-charcoal px-8 py-3 rounded-lg font-semibold hover:bg-gold-light transition-colors shadow-luxury\"\n              >\n                {slide.primaryCta.text[lang]}\n              </Link>\n              {slide.secondaryCta && (\n                <Link\n                  to={slide.secondaryCta.link}\n                  className=\"bg-transparent border-2 border-ivory text-ivory px-8 py-3 rounded-lg font-semibold hover:bg-ivory/10 transition-colors\"\n                >\n                  {slide.secondaryCta.text[lang]}\n                </Link>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {slides.length > 1 && (\n        <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2\">\n          {slides.map((_, index) => (\n            <button\n              key={index}\n              onClick={() => goToSlide(index)}\n              className={`w-3 h-3 rounded-full transition-all ${\n                index === currentSlide \n                  ? 'bg-gold w-8' \n                  : 'bg-ivory/50 hover:bg-ivory/75'\n              }`}\n              aria-label={`Go to slide ${index + 1}`}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":3446},"frontend/src/pages/AuctionsPerfumes.tsx":{"content":"import CatalogPage from './CatalogPage';\n\nexport default function AuctionsPerfumes() {\n  return <CatalogPage catalogType=\"auctions\" />;\n}\n","size_bytes":138},"frontend/src/components/products/ProductCard.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Product } from '../../types';\nimport { useUIStore } from '../../store/uiStore';\nimport { useCartStore } from '../../store/cartStore';\nimport { useWishlistStore } from '../../store/wishlistStore';\nimport SARIcon from '../common/SARIcon';\nimport { formatSAR } from '../../utils/currency';\n\ninterface ProductCardProps {\n  product: Product;\n  type?: 'new' | 'used' | 'auction';\n  currentBid?: number;\n}\n\nfunction productLink(p: Product) {\n  return `/p/${p.id}`;\n}\n\nexport default function ProductCard({ product, type = 'new', currentBid }: ProductCardProps) {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const dir = i18n.language === 'ar' ? 'rtl' : 'ltr';\n\n  const addToCart = useCartStore((s) => s.add);\n  const hasInWishlist = useWishlistStore((s) => s.has(product.id.toString()));\n  const addToWishlist = useWishlistStore((s) => s.add);\n  const removeFromWishlist = useWishlistStore((s) => s.remove);\n\n  const name = language === 'ar' ? product.name_ar : product.name_en;\n  const imageUrl = product.image_urls?.[0] || 'https://via.placeholder.com/300x400?text=Perfume';\n  const displayPrice = type === 'auction' && currentBid ? currentBid : product.base_price;\n\n  const toggleWishlist = () => {\n    if (hasInWishlist) {\n      removeFromWishlist(product.id.toString());\n    } else {\n      addToWishlist({\n        id: product.id.toString(),\n        name,\n        price: displayPrice,\n        image: imageUrl,\n        brand: product.brand,\n      });\n    }\n  };\n\n  const handleAddToCart = () => {\n    addToCart(\n      {\n        id: product.id.toString(),\n        name,\n        price: displayPrice,\n        image: imageUrl,\n        brand: product.brand,\n      },\n      1\n    );\n  };\n\n  return (\n    <article\n      dir={dir}\n      className=\"group bg-white rounded-2xl shadow-md hover:shadow-lg transition-shadow overflow-hidden flex flex-col h-full\"\n    >\n      {/* الصورة */}\n      <div className=\"relative\">\n        <Link to={productLink(product)} className=\"block aspect-[4/5] w-full bg-sand/60 overflow-hidden\">\n          <img\n            src={imageUrl}\n            alt={name}\n            loading=\"lazy\"\n            className=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.03]\"\n          />\n        </Link>\n\n        {/* المفضلة */}\n        <button\n          onClick={toggleWishlist}\n          aria-label={hasInWishlist ? t('wishlist.remove') : 'Add to wishlist'}\n          className=\"absolute top-2 rounded-lg min-w-[40px] min-h-[40px] flex items-center justify-center bg-white/85 hover:bg-white shadow-md\"\n          style={{ insetInlineStart: '8px' }}\n        >\n          <svg\n            className=\"w-5 h-5\"\n            viewBox=\"0 0 24 24\"\n            fill={hasInWishlist ? 'currentColor' : 'none'}\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M20.8 4.6a5 5 0 0 0-7.1 0L12 6.3l-1.7-1.7a5 5 0 0 0-7.1 7.1L12 22l8.8-10.3a5 5 0 0 0 0-7.1z\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      {/* المحتوى */}\n      <div className=\"p-4 flex-1 flex flex-col\">\n        {product.brand && (\n          <div className=\"text-xs text-taupe/90 mb-1\">{product.brand}</div>\n        )}\n\n        {/* عنوان بسطرين ثابتين لثبات الارتفاع */}\n        <Link\n          to={productLink(product)}\n          className=\"block text-charcoal font-semibold leading-snug hover:text-gold transition-colors line-clamp-2 min-h-[44px]\"\n        >\n          {name}\n        </Link>\n\n        {/* ====== السعر + الزر مثبتان أسفل البطاقة ====== */}\n        <div className=\"mt-auto\">\n          <div className=\"mt-2 text-gold font-extrabold text-lg inline-flex items-center gap-1\">\n            {formatSAR(displayPrice, i18n.language === 'ar' ? 'ar-SA' : 'en-US')} <SARIcon />\n          </div>\n\n          <button\n            onClick={handleAddToCart}\n            className=\"mt-3 h-11 w-full rounded-luxury bg-gold text-charcoal font-semibold hover:bg-gold-hover transition flex items-center justify-center gap-2 min-h-[44px]\"\n            aria-label={t('common.addToCart')}\n          >\n            <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 6h15l-1.5 9H7.5L6 6zM7 6V4a3 3 0 016 0v2\" />\n            </svg>\n            <span>{t('common.addToCart')}</span>\n          </button>\n        </div>\n        {/* ============================================ */}\n      </div>\n    </article>\n  );\n}\n","size_bytes":4765},"frontend/src/pages/home/HomeSections/TrustBadges.tsx":{"content":"import { useTranslation } from 'react-i18next';\n\nconst trustItems = [\n  {\n    id: 'authenticity',\n    icon: (\n      <svg className=\"w-12 h-12 text-gold\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n      </svg>\n    ),\n    title: { ar: 'ضمان الأصالة', en: 'Authenticity Verified' },\n    description: { ar: 'جميع المنتجات أصلية 100%', en: '100% Authentic Products' }\n  },\n  {\n    id: 'secure',\n    icon: (\n      <svg className=\"w-12 h-12 text-gold\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n      </svg>\n    ),\n    title: { ar: 'دفع آمن', en: 'Secure Payments' },\n    description: { ar: 'معاملات محمية ومشفرة', en: 'Protected & Encrypted' }\n  },\n  {\n    id: 'shipping',\n    icon: (\n      <svg className=\"w-12 h-12 text-gold\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n      </svg>\n    ),\n    title: { ar: 'شحن سريع', en: 'Fast Shipping' },\n    description: { ar: 'توصيل خلال 2-3 أيام', en: 'Delivery in 2-3 Days' }\n  },\n  {\n    id: 'returns',\n    icon: (\n      <svg className=\"w-12 h-12 text-gold\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n      </svg>\n    ),\n    title: { ar: 'إرجاع سهل', en: 'Easy Returns' },\n    description: { ar: 'استرجاع خلال 14 يوم', en: '14-Day Return Policy' }\n  }\n];\n\nexport default function TrustBadges() {\n  const { i18n } = useTranslation();\n  const lang = i18n.language as 'ar' | 'en';\n\n  return (\n    <section className=\"bg-sand py-4 md:py-16\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12\">\n        <div className=\"grid grid-cols-4 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {trustItems.map((item) => (\n            <div key={item.id} className=\"text-center\">\n              <div className=\"flex justify-center mb-4\">\n                {item.icon}\n              </div>\n              <h3 className=\"text-lg font-bold text-charcoal mb-2\">\n                {item.title[lang]}\n              </h3>\n              <p className=\"text-sm text-taupe\">\n                {item.description[lang]}\n              </p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2938},"backend/app/core/__init__.py":{"content":"# Core module\n","size_bytes":14},"backend/app/main.py":{"content":"from fastapi import FastAPI, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom fastapi.staticfiles import StaticFiles\nfrom fastapi.responses import FileResponse\nimport os\nfrom pathlib import Path\nfrom .core.config import settings\nfrom .core.database import Base, engine\nfrom .routers import auth, products, auctions, orders, uploads, admin\n\nBase.metadata.create_all(bind=engine)\n\napp = FastAPI(title=\"Aalam Al-Otoor API\", version=\"1.0.0\")\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=settings.cors_origins_list,\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\nif not os.path.exists(settings.UPLOAD_DIR):\n    os.makedirs(settings.UPLOAD_DIR)\n\nif os.path.exists(settings.UPLOAD_DIR):\n    app.mount(\"/uploads\", StaticFiles(directory=settings.UPLOAD_DIR), name=\"uploads\")\n\napp.include_router(auth.router)\napp.include_router(products.router)\napp.include_router(auctions.router)\napp.include_router(orders.router)\napp.include_router(uploads.router)\napp.include_router(admin.router)\n\n\n@app.get(\"/healthz\")\nasync def health_check():\n    return {\"ok\": True}\n\n\nfrontend_dist = Path(__file__).parent.parent.parent / \"frontend\" / \"dist\"\napi_prefixes = ('auth', 'products', 'auctions', 'orders', 'uploads', 'admin', 'healthz')\n\nif frontend_dist.exists():\n    app.mount(\"/assets\", StaticFiles(directory=str(frontend_dist / \"assets\")), name=\"assets\")\n    \n    @app.get(\"/{full_path:path}\")\n    async def serve_spa(full_path: str):\n        for prefix in api_prefixes:\n            if full_path == prefix or full_path.startswith(f\"{prefix}/\"):\n                raise HTTPException(status_code=404, detail=f\"API endpoint /{full_path} not found\")\n        \n        file_path = frontend_dist / full_path\n        if file_path.exists() and file_path.is_file():\n            return FileResponse(file_path)\n        return FileResponse(frontend_dist / \"index.html\")\nelse:\n    @app.get(\"/\")\n    async def root():\n        return {\"message\": \"Aalam Al-Otoor API - Perfume Marketplace\", \"version\": \"1.0.0\", \"frontend\": \"not built\"}\n","size_bytes":2065},"backend/app/models/order.py":{"content":"from sqlalchemy import Column, Integer, Float, String, DateTime, ForeignKey, Boolean, Text, Enum as SQLEnum, JSON\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nimport enum\nfrom ..core.database import Base\n\n\nclass PaymentMethod(str, enum.Enum):\n    cod = \"cod\"\n    bank = \"bank\"\n\n\nclass OrderStatus(str, enum.Enum):\n    pending = \"pending\"\n    seller_confirmed = \"seller_confirmed\"\n    shipped = \"shipped\"\n    completed = \"completed\"\n    canceled = \"canceled\"\n    dispute = \"dispute\"\n\n\nclass Order(Base):\n    __tablename__ = \"orders\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    buyer_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    product_id = Column(Integer, ForeignKey(\"products.id\"), nullable=False)\n    amount = Column(Float, nullable=False)\n    payment_method = Column(SQLEnum(PaymentMethod), nullable=False)\n    status = Column(SQLEnum(OrderStatus), default=OrderStatus.pending, index=True)\n    shipping_address_json = Column(JSON)\n    notes = Column(Text)\n    internal_notes = Column(Text)\n    dispute_flag = Column(Boolean, default=False)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    buyer = relationship(\"User\", back_populates=\"orders_as_buyer\", foreign_keys=[buyer_id])\n    product = relationship(\"Product\", back_populates=\"orders\")\n","size_bytes":1370},"frontend/src/pages/AuctionDetail.tsx":{"content":"import { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { useForm } from 'react-hook-form';\nimport api from '../lib/api';\nimport { Auction, Bid } from '../types';\nimport { useUIStore } from '../store/uiStore';\nimport { useAuthStore } from '../store/authStore';\nimport { formatPrice } from '../utils/currency';\n\nexport default function AuctionDetail() {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const { language } = useUIStore();\n  const { isAuthenticated } = useAuthStore();\n  const [auction, setAuction] = useState<Auction | null>(null);\n  const [bids, setBids] = useState<Bid[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [_ws, setWs] = useState<WebSocket | null>(null);\n  const [timeLeft, setTimeLeft] = useState('');\n\n  const { register, handleSubmit, formState: { isSubmitting }, reset } = useForm<{ amount: number }>();\n\n  const fetchAuction = useCallback(async () => {\n    try {\n      const response = await api.get(`/auctions/${id}`);\n      setAuction(response.data);\n    } catch (error) {\n      console.error('Failed to fetch auction:', error);\n    }\n  }, [id]);\n\n  const fetchBids = useCallback(async () => {\n    try {\n      const response = await api.get(`/auctions/${id}/bids`);\n      setBids(response.data);\n    } catch (error) {\n      console.error('Failed to fetch bids:', error);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    const loadData = async () => {\n      await fetchAuction();\n      await fetchBids();\n      setLoading(false);\n    };\n    loadData();\n  }, [fetchAuction, fetchBids]);\n\n  useEffect(() => {\n    if (!auction) return;\n\n    const timer = setInterval(() => {\n      const now = new Date().getTime();\n      const end = new Date(auction.end_time).getTime();\n      const distance = end - now;\n\n      if (distance < 0) {\n        setTimeLeft(t('auctions.ended'));\n        clearInterval(timer);\n      } else {\n        const days = Math.floor(distance / (1000 * 60 * 60 * 24));\n        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n        const seconds = Math.floor((distance % (1000 * 60)) / 1000);\n        setTimeLeft(days > 0 ? `${days}d ${hours}h ${minutes}m` : `${hours}h ${minutes}m ${seconds}s`);\n      }\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [auction, t]);\n\n  useEffect(() => {\n    if (!isAuthenticated || !id) return;\n\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const wsUrl = `${protocol}//${window.location.host}/api/auctions/${id}/ws`;\n    const websocket = new WebSocket(wsUrl);\n\n    websocket.onopen = () => {\n      console.log('WebSocket connected');\n    };\n\n    websocket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'bid') {\n        setAuction(prev => prev ? { ...prev, current_price: data.current_price } : null);\n        fetchBids();\n      }\n    };\n\n    websocket.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n\n    setWs(websocket);\n\n    return () => {\n      websocket.close();\n    };\n  }, [id, isAuthenticated, fetchBids]);\n\n  const onSubmitBid = async (data: { amount: number }) => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n\n    try {\n      await api.post(`/auctions/${id}/bid`, { amount: data.amount });\n      reset();\n      await fetchAuction();\n      await fetchBids();\n    } catch (error: any) {\n      alert(error.response?.data?.detail || 'Failed to place bid');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-charcoal-light\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  if (!auction) {\n    return null;\n  }\n\n  const product = auction.product;\n  const name = product ? (language === 'ar' ? product.name_ar : product.name_en) : 'Unknown Product';\n  const description = product ? (language === 'ar' ? product.description_ar : product.description_en) : '';\n  const imageUrl = product?.image_urls?.[0] || '/placeholder-perfume.jpg';\n  const isActive = auction.status === 'running' && new Date(auction.end_time) > new Date();\n  const minBidAmount = auction.current_price + auction.minimum_increment;\n\n  return (\n    <div>\n      <button\n        onClick={() => navigate('/auctions')}\n        className=\"mb-6 text-gold hover:text-gold-light transition\"\n      >\n        ← {t('common.back')}\n      </button>\n\n      <div className=\"grid lg:grid-cols-2 gap-8\">\n        <div>\n          <div className=\"bg-ivory rounded-luxury overflow-hidden aspect-square\">\n            <img\n              src={imageUrl}\n              alt={name}\n              className=\"w-full h-full object-cover\"\n              onError={(e) => {\n                e.currentTarget.src = '/placeholder-perfume.jpg';\n              }}\n            />\n          </div>\n        </div>\n\n        <div className=\"space-y-6\">\n          <div className=\"bg-white p-6 rounded-luxury shadow-luxury\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <h1 className=\"text-3xl font-bold text-charcoal\">{name}</h1>\n              <span className={`px-3 py-1 rounded-full text-sm font-semibold ${\n                isActive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'\n              }`}>\n                {isActive ? 'LIVE' : auction.status.toUpperCase()}\n              </span>\n            </div>\n\n            <p className=\"text-charcoal-light mb-6\">{description}</p>\n\n            <div className=\"space-y-3 border-t border-b border-gray-200 py-4 mb-6\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-charcoal-light\">{t('auctions.currentBid')}:</span>\n                <span className=\"text-2xl font-bold text-gold\">\n                  {formatPrice(auction.current_price, language)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-charcoal-light\">{t('auctions.startingPrice')}:</span>\n                <span className=\"text-charcoal font-semibold\">\n                  {formatPrice(auction.starting_price, language)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-charcoal-light\">{t('auctions.timeRemaining')}:</span>\n                <span className=\"text-charcoal font-semibold\">{timeLeft}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-charcoal-light\">Total Bids:</span>\n                <span className=\"text-charcoal font-semibold\">{bids.length}</span>\n              </div>\n            </div>\n\n            {isActive && isAuthenticated && (\n              <form onSubmit={handleSubmit(onSubmitBid)} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-charcoal mb-2\">\n                    {t('auctions.yourBid')} (Min: {formatPrice(minBidAmount, language)})\n                  </label>\n                  <input\n                    {...register('amount', { \n                      required: true,\n                      min: minBidAmount,\n                      valueAsNumber: true\n                    })}\n                    type=\"number\"\n                    step=\"0.01\"\n                    min={minBidAmount}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-luxury focus:ring-2 focus:ring-gold focus:border-transparent\"\n                  />\n                </div>\n                <button\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                  className=\"w-full bg-gold text-charcoal font-semibold py-3 rounded-luxury hover:bg-gold-light transition disabled:opacity-50\"\n                >\n                  {isSubmitting ? t('common.loading') : t('auctions.placeBid')}\n                </button>\n              </form>\n            )}\n\n            {!isAuthenticated && isActive && (\n              <button\n                onClick={() => navigate('/login')}\n                className=\"w-full bg-gold text-charcoal font-semibold py-3 rounded-luxury hover:bg-gold-light transition\"\n              >\n                {t('common.login')} to Bid\n              </button>\n            )}\n          </div>\n\n          <div className=\"bg-white p-6 rounded-luxury shadow-luxury\">\n            <h3 className=\"text-xl font-bold text-charcoal mb-4\">Bid History</h3>\n            {bids.length === 0 ? (\n              <p className=\"text-charcoal-light text-center py-4\">No bids yet</p>\n            ) : (\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n                {bids.map(bid => (\n                  <div key={bid.id} className=\"flex justify-between items-center py-2 border-b border-gray-100\">\n                    <span className=\"text-charcoal-light text-sm\">\n                      {bid.bidder?.full_name || 'Anonymous'}\n                    </span>\n                    <span className=\"font-semibold text-gold\">{formatPrice(bid.amount, language)}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9402},"frontend/vite.config.ts":{"content":"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\nexport default defineConfig({\n  plugins: [react()],\n  server: {\n    host: '0.0.0.0',\n    port: 5000,\n    strictPort: true,\n    allowedHosts: true,\n    proxy: {\n      '/api': {\n        target: 'http://localhost:8000',\n        changeOrigin: true,\n        rewrite: (path) => path.replace(/^\\/api/, ''),\n        ws: true\n      }\n    }\n  },\n  build: {\n    outDir: 'dist'\n  },\n  define: {\n    global: 'globalThis',\n  },\n  resolve: {\n    alias: {\n      buffer: 'buffer/',\n    },\n  },\n  optimizeDeps: {\n    esbuildOptions: {\n      define: {\n        global: 'globalThis'\n      },\n    }\n  }\n})\n","size_bytes":662},"frontend/src/components/cart/CartIconButton.tsx":{"content":"import { useState } from \"react\";\nimport { useCartStore } from \"../../store/cartStore\";\nimport MiniCartDrawer from \"./MiniCartDrawer\";\n\nexport default function CartIconButton() {\n  const count = useCartStore((s) => s.count());\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      <button\n        onClick={() => setOpen(true)}\n        className=\"relative p-2.5 rounded-lg hover:bg-charcoal-light transition min-w-[44px] min-h-[44px] flex items-center justify-center\"\n        aria-label=\"Cart\"\n      >\n        <svg className=\"w-7 h-7\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <path\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M6 6h15l-1.5 9H7.5L6 6zM7 6V4a3 3 0 016 0v2\"\n          />\n        </svg>\n        {count > 0 && (\n          <span className=\"absolute -top-1 -end-1 bg-gold text-charcoal text-[11px] px-1.5 rounded-full font-semibold min-w-[20px] h-[20px] flex items-center justify-center\">\n            {count}\n          </span>\n        )}\n      </button>\n      <MiniCartDrawer open={open} onClose={() => setOpen(false)} />\n    </>\n  );\n}\n","size_bytes":1151},"backend/app/core/database.py":{"content":"from sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nfrom .config import settings\n\nengine = create_engine(\n    settings.DATABASE_URL,\n    pool_pre_ping=True,\n    pool_recycle=300,\n)\n\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n\nBase = declarative_base()\n\n\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n","size_bytes":464},"backend/alembic/env.py":{"content":"from logging.config import fileConfig\nimport os\nimport sys\nfrom pathlib import Path\n\nfrom sqlalchemy import engine_from_config\nfrom sqlalchemy import pool\n\nfrom alembic import context\n\nsys.path.insert(0, str(Path(__file__).resolve().parent.parent))\n\nfrom app.core.database import Base\nfrom app import models\n\n# this is the Alembic Config object, which provides\n# access to the values within the .ini file in use.\nconfig = context.config\n\n# Get DATABASE_URL from environment\ndatabase_url = os.environ.get(\"DATABASE_URL\")\nif database_url:\n    config.set_main_option(\"sqlalchemy.url\", database_url)\n\n# Interpret the config file for Python logging.\n# This line sets up loggers basically.\nif config.config_file_name is not None:\n    fileConfig(config.config_file_name)\n\n# add your model's MetaData object here\n# for 'autogenerate' support\ntarget_metadata = Base.metadata\n\n# other values from the config, defined by the needs of env.py,\n# can be acquired:\n# my_important_option = config.get_main_option(\"my_important_option\")\n# ... etc.\n\n\ndef run_migrations_offline() -> None:\n    \"\"\"Run migrations in 'offline' mode.\n\n    This configures the context with just a URL\n    and not an Engine, though an Engine is acceptable\n    here as well.  By skipping the Engine creation\n    we don't even need a DBAPI to be available.\n\n    Calls to context.execute() here emit the given string to the\n    script output.\n\n    \"\"\"\n    url = config.get_main_option(\"sqlalchemy.url\")\n    context.configure(\n        url=url,\n        target_metadata=target_metadata,\n        literal_binds=True,\n        dialect_opts={\"paramstyle\": \"named\"},\n    )\n\n    with context.begin_transaction():\n        context.run_migrations()\n\n\ndef run_migrations_online() -> None:\n    \"\"\"Run migrations in 'online' mode.\n\n    In this scenario we need to create an Engine\n    and associate a connection with the context.\n\n    \"\"\"\n    connectable = engine_from_config(\n        config.get_section(config.config_ini_section, {}),\n        prefix=\"sqlalchemy.\",\n        poolclass=pool.NullPool,\n    )\n\n    with connectable.connect() as connection:\n        context.configure(\n            connection=connection, target_metadata=target_metadata\n        )\n\n        with context.begin_transaction():\n            context.run_migrations()\n\n\nif context.is_offline_mode():\n    run_migrations_offline()\nelse:\n    run_migrations_online()\n","size_bytes":2371},"frontend/src/pages/NewPerfumes.tsx":{"content":"import CatalogPage from './CatalogPage';\n\nexport default function NewPerfumes() {\n  return <CatalogPage catalogType=\"new\" />;\n}\n","size_bytes":128},"frontend/src/pages/SellerProductsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface Product {\n  id: number;\n  title: string;\n  titleAr: string;\n  brand: string;\n  type: string;\n  price: number;\n  status: 'published' | 'draft' | 'pending';\n  createdAt: string;\n}\n\nexport default function SellerProductsPage() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showImportModal, setShowImportModal] = useState(false);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [editPrice, setEditPrice] = useState('');\n\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  const fetchProducts = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const mockProducts: Product[] = [\n      { id: 1, title: 'Chanel No 5', titleAr: 'شانيل رقم 5', brand: 'Chanel', type: 'EDP', price: 150.00, status: 'published', createdAt: '2024-10-01' },\n      { id: 2, title: 'Dior Sauvage', titleAr: 'ديور سوفاج', brand: 'Dior', type: 'EDT', price: 120.00, status: 'published', createdAt: '2024-10-02' },\n      { id: 3, title: 'Tom Ford Oud Wood', titleAr: 'توم فورد أود وود', brand: 'Tom Ford', type: 'EDP', price: 280.00, status: 'draft', createdAt: '2024-10-03' },\n      { id: 4, title: 'Creed Aventus', titleAr: 'كريد أفينتوس', brand: 'Creed', type: 'EDP', price: 350.00, status: 'published', createdAt: '2024-10-04' },\n      { id: 5, title: 'Versace Eros', titleAr: 'فيرساتشي إيروس', brand: 'Versace', type: 'EDT', price: 95.00, status: 'pending', createdAt: '2024-10-05' },\n    ];\n\n    setProducts(mockProducts);\n    setLoading(false);\n  };\n\n  const handleDelete = (id: number) => {\n    if (window.confirm(t('seller.confirmDelete'))) {\n      setProducts(products.filter(p => p.id !== id));\n    }\n  };\n\n  const handleDuplicate = (product: Product) => {\n    const newProduct = {\n      ...product,\n      id: Math.max(...products.map(p => p.id)) + 1,\n      title: `${product.title} (Copy)`,\n      titleAr: `${product.titleAr} (نسخة)`,\n      status: 'draft' as const,\n      createdAt: new Date().toISOString().split('T')[0],\n    };\n    setProducts([newProduct, ...products]);\n  };\n\n  const handleEditPrice = (id: number, currentPrice: number) => {\n    setEditingId(id);\n    setEditPrice(currentPrice.toString());\n  };\n\n  const handleSavePrice = (id: number) => {\n    const price = parseFloat(editPrice);\n    if (!isNaN(price) && price > 0) {\n      setProducts(products.map(p => p.id === id ? { ...p, price } : p));\n    }\n    setEditingId(null);\n  };\n\n  const handleStatusChange = (id: number, newStatus: Product['status']) => {\n    setProducts(products.map(p => p.id === id ? { ...p, status: newStatus } : p));\n  };\n\n  const filteredProducts = products.filter(p => {\n    const matchesSearch = p.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                          p.brand.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || p.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const getStatusColor = (status: Product['status']) => {\n    switch (status) {\n      case 'published': return 'text-green-600 bg-green-100';\n      case 'draft': return 'text-gray-600 bg-gray-200';\n      case 'pending': return 'text-gold bg-gold bg-opacity-10';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('seller.products')}</h1>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setShowImportModal(true)}\n              className=\"bg-sand text-charcoal px-4 py-2 rounded-luxury font-semibold hover:bg-taupe hover:bg-opacity-20 transition\"\n            >\n              📥 {t('seller.importCSV')}\n            </button>\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"bg-gold text-charcoal px-4 py-2 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n            >\n              + {t('seller.addProduct')}\n            </button>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n          <input\n            type=\"text\"\n            placeholder={t('seller.searchProducts')}\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"flex-1 px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n          />\n          <select\n            value={statusFilter}\n            onChange={(e) => setStatusFilter(e.target.value)}\n            className=\"px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n          >\n            <option value=\"all\">{t('seller.allStatuses')}</option>\n            <option value=\"published\">{t('seller.published')}</option>\n            <option value=\"draft\">{t('seller.draft')}</option>\n            <option value=\"pending\">{t('seller.pending')}</option>\n          </select>\n        </div>\n\n        {/* Products Table */}\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.title')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.brand')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.type')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.price')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.createdAt')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredProducts.map((product) => (\n                <tr key={product.id} className=\"border-b border-gray-100 hover:bg-sand transition\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{product.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">\n                    {i18n.language === 'ar' ? product.titleAr : product.title}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{product.brand}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{product.type}</td>\n                  <td className=\"px-4 py-4\">\n                    {editingId === product.id ? (\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"number\"\n                          value={editPrice}\n                          onChange={(e) => setEditPrice(e.target.value)}\n                          className=\"w-24 px-2 py-1 border border-gold rounded\"\n                          autoFocus\n                        />\n                        <button\n                          onClick={() => handleSavePrice(product.id)}\n                          className=\"text-green-600 hover:text-green-700\"\n                        >\n                          ✓\n                        </button>\n                        <button\n                          onClick={() => setEditingId(null)}\n                          className=\"text-red-600 hover:text-red-700\"\n                        >\n                          ✕\n                        </button>\n                      </div>\n                    ) : (\n                      <span\n                        onClick={() => handleEditPrice(product.id, product.price)}\n                        className=\"text-charcoal font-semibold cursor-pointer hover:text-gold\"\n                      >\n                        {formatPrice(product.price, language)}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <select\n                      value={product.status}\n                      onChange={(e) => handleStatusChange(product.id, e.target.value as Product['status'])}\n                      className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(product.status)} border-none`}\n                    >\n                      <option value=\"published\">{t('seller.published')}</option>\n                      <option value=\"draft\">{t('seller.draft')}</option>\n                      <option value=\"pending\">{t('seller.pending')}</option>\n                    </select>\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(product.createdAt).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={() => handleDuplicate(product)}\n                        className=\"text-blue-600 hover:text-blue-700 text-sm\"\n                        title={t('seller.duplicate')}\n                      >\n                        📋\n                      </button>\n                      <button\n                        onClick={() => handleDelete(product.id)}\n                        className=\"text-red-600 hover:text-red-700 text-sm\"\n                        title={t('seller.delete')}\n                      >\n                        🗑️\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredProducts.length === 0 && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-taupe\">{t('seller.noProducts')}</p>\n          </div>\n        )}\n      </div>\n\n      {/* Add Product Modal */}\n      <AddProductModal\n        isOpen={showAddModal}\n        onClose={() => setShowAddModal(false)}\n        onAdd={(newProduct) => {\n          setProducts([newProduct, ...products]);\n          setShowAddModal(false);\n        }}\n        nextId={Math.max(...products.map(p => p.id)) + 1}\n      />\n\n      {/* Import CSV Modal */}\n      <ImportCSVModal\n        isOpen={showImportModal}\n        onClose={() => setShowImportModal(false)}\n        onImport={(importedProducts) => {\n          setProducts([...importedProducts, ...products]);\n          setShowImportModal(false);\n        }}\n        nextId={Math.max(...products.map(p => p.id)) + 1}\n      />\n    </div>\n  );\n}\n\nfunction AddProductModal({ isOpen, onClose, onAdd, nextId }: {\n  isOpen: boolean;\n  onClose: () => void;\n  onAdd: (product: Product) => void;\n  nextId: number;\n}) {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState({\n    title: '',\n    titleAr: '',\n    brand: '',\n    type: 'EDP',\n    price: '',\n  });\n  const [images, setImages] = useState<File[]>([]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (images.length > 5) {\n      alert(t('seller.maxImages'));\n      return;\n    }\n\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const newProduct: Product = {\n      id: nextId,\n      title: formData.title,\n      titleAr: formData.titleAr,\n      brand: formData.brand,\n      type: formData.type,\n      price: parseFloat(formData.price),\n      status: 'draft',\n      createdAt: new Date().toISOString().split('T')[0],\n    };\n\n    onAdd(newProduct);\n    setFormData({ title: '', titleAr: '', brand: '', type: 'EDP', price: '' });\n    setImages([]);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-luxury p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <h3 className=\"text-h3 text-charcoal mb-6\">{t('seller.addProduct')}</h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-charcoal font-semibold mb-2\">{t('seller.titleEn')}</label>\n              <input\n                type=\"text\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                className=\"w-full px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-charcoal font-semibold mb-2\">{t('seller.titleAr')}</label>\n              <input\n                type=\"text\"\n                value={formData.titleAr}\n                onChange={(e) => setFormData({ ...formData, titleAr: e.target.value })}\n                className=\"w-full px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-charcoal font-semibold mb-2\">{t('seller.brand')}</label>\n              <input\n                type=\"text\"\n                value={formData.brand}\n                onChange={(e) => setFormData({ ...formData, brand: e.target.value })}\n                className=\"w-full px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-charcoal font-semibold mb-2\">{t('seller.type')}</label>\n              <select\n                value={formData.type}\n                onChange={(e) => setFormData({ ...formData, type: e.target.value })}\n                className=\"w-full px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n              >\n                <option value=\"EDP\">EDP</option>\n                <option value=\"EDT\">EDT</option>\n                <option value=\"EDC\">EDC</option>\n                <option value=\"Parfum\">Parfum</option>\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-charcoal font-semibold mb-2\">{t('seller.price')}</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={formData.price}\n              onChange={(e) => setFormData({ ...formData, price: e.target.value })}\n              className=\"w-full px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-charcoal font-semibold mb-2\">\n              {t('seller.images')} ({images.length}/5)\n            </label>\n            <input\n              type=\"file\"\n              multiple\n              accept=\"image/*\"\n              onChange={(e) => {\n                const files = Array.from(e.target.files || []);\n                setImages(files.slice(0, 5));\n              }}\n              className=\"w-full px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\"\n            />\n            <p className=\"text-sm text-taupe mt-1\">{t('seller.maxImagesNote')}</p>\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <button\n              type=\"submit\"\n              className=\"flex-1 bg-gold text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-gold-hover transition\"\n            >\n              {t('seller.createProduct')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 bg-sand text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-taupe hover:bg-opacity-20 transition\"\n            >\n              {t('common.cancel')}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction ImportCSVModal({ isOpen, onClose, onImport, nextId }: {\n  isOpen: boolean;\n  onClose: () => void;\n  onImport: (products: Product[]) => void;\n  nextId: number;\n}) {\n  const { t } = useTranslation();\n  const [csvFile, setCsvFile] = useState<File | null>(null);\n\n  const handleImport = async () => {\n    if (!csvFile) return;\n\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const mockImportedProducts: Product[] = [\n      { id: nextId, title: 'Giorgio Armani Code', titleAr: 'جورجيو أرماني كود', brand: 'Giorgio Armani', type: 'EDT', price: 85.00, status: 'draft', createdAt: new Date().toISOString().split('T')[0] },\n      { id: nextId + 1, title: 'Paco Rabanne Invictus', titleAr: 'باكو رابان إنفيكتوس', brand: 'Paco Rabanne', type: 'EDT', price: 75.00, status: 'draft', createdAt: new Date().toISOString().split('T')[0] },\n      { id: nextId + 2, title: 'Yves Saint Laurent Y', titleAr: 'إيف سان لوران واي', brand: 'YSL', type: 'EDP', price: 110.00, status: 'draft', createdAt: new Date().toISOString().split('T')[0] },\n    ];\n\n    onImport(mockImportedProducts);\n    setCsvFile(null);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-luxury p-6 max-w-lg w-full\">\n        <h3 className=\"text-h3 text-charcoal mb-4\">{t('seller.importCSV')}</h3>\n        <p className=\"text-taupe mb-4\">{t('seller.csvFormat')}: title, brand, type, price, condition</p>\n\n        <input\n          type=\"file\"\n          accept=\".csv\"\n          onChange={(e) => setCsvFile(e.target.files?.[0] || null)}\n          className=\"w-full px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none mb-4\"\n        />\n\n        <div className=\"flex gap-3\">\n          <button\n            onClick={handleImport}\n            disabled={!csvFile}\n            className=\"flex-1 bg-gold text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-gold-hover transition disabled:opacity-50\"\n          >\n            {t('seller.import')}\n          </button>\n          <button\n            onClick={onClose}\n            className=\"flex-1 bg-sand text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-taupe hover:bg-opacity-20 transition\"\n          >\n            {t('common.cancel')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":19434},"backend/app/routers/auctions.py":{"content":"from fastapi import APIRouter, Depends, HTTPException, status, Query, WebSocket, WebSocketDisconnect\nfrom sqlalchemy.orm import Session\nfrom typing import List, Optional\nfrom datetime import datetime\nfrom ..core.database import get_db\nfrom ..core.dependencies import get_current_user\nfrom ..models.user import User\nfrom ..models.auction import Auction, Bid\nfrom ..models.product import Product\nfrom ..models.order import Order\nfrom ..schemas.auction import AuctionCreate, AuctionResponse, AuctionWithBids, BidCreate, BidResponse\n\nrouter = APIRouter(prefix=\"/auctions\", tags=[\"auctions\"])\n\n\nclass ConnectionManager:\n    def __init__(self):\n        self.active_connections: dict = {}\n\n    async def connect(self, websocket: WebSocket, auction_id: int):\n        await websocket.accept()\n        if auction_id not in self.active_connections:\n            self.active_connections[auction_id] = []\n        self.active_connections[auction_id].append(websocket)\n\n    def disconnect(self, websocket: WebSocket, auction_id: int):\n        if auction_id in self.active_connections:\n            self.active_connections[auction_id].remove(websocket)\n\n    async def broadcast(self, message: dict, auction_id: int):\n        if auction_id in self.active_connections:\n            for connection in self.active_connections[auction_id]:\n                try:\n                    await connection.send_json(message)\n                except:\n                    pass\n\n\nmanager = ConnectionManager()\n\n\n@router.get(\"\", response_model=List[AuctionResponse])\ndef get_auctions(\n    status: Optional[str] = Query(None),\n    page: int = Query(1, ge=1),\n    page_size: int = Query(20, ge=1, le=100),\n    db: Session = Depends(get_db)\n):\n    query = db.query(Auction)\n    \n    if status:\n        query = query.filter(Auction.status == status)\n    \n    auctions = query.offset((page - 1) * page_size).limit(page_size).all()\n    return auctions\n\n\n@router.get(\"/{auction_id}\", response_model=AuctionWithBids)\ndef get_auction(auction_id: int, db: Session = Depends(get_db)):\n    auction = db.query(Auction).filter(Auction.id == auction_id).first()\n    if not auction:\n        raise HTTPException(status_code=404, detail=\"Auction not found\")\n    return auction\n\n\n@router.get(\"/{auction_id}/pulse\", response_model=AuctionWithBids)\ndef get_auction_pulse(auction_id: int, db: Session = Depends(get_db)):\n    auction = db.query(Auction).filter(Auction.id == auction_id).first()\n    if not auction:\n        raise HTTPException(status_code=404, detail=\"Auction not found\")\n    return auction\n\n\n@router.post(\"/{auction_id}/bid\", response_model=BidResponse)\nasync def place_bid(\n    auction_id: int,\n    bid_data: BidCreate,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    auction = db.query(Auction).filter(Auction.id == auction_id).first()\n    if not auction:\n        raise HTTPException(status_code=404, detail=\"Auction not found\")\n    \n    now = datetime.utcnow()\n    if now < auction.start_at:\n        raise HTTPException(status_code=400, detail=\"Auction has not started yet\")\n    if now > auction.end_at:\n        raise HTTPException(status_code=400, detail=\"Auction has ended\")\n    \n    if bid_data.amount < auction.current_price + auction.min_increment:\n        raise HTTPException(\n            status_code=400,\n            detail=f\"Bid must be at least {auction.current_price + auction.min_increment}\"\n        )\n    \n    new_bid = Bid(\n        auction_id=auction_id,\n        user_id=current_user.id,\n        amount=bid_data.amount\n    )\n    \n    auction.current_price = bid_data.amount\n    \n    db.add(new_bid)\n    db.commit()\n    db.refresh(new_bid)\n    \n    await manager.broadcast({\n        \"type\": \"new_bid\",\n        \"auction_id\": auction_id,\n        \"current_price\": auction.current_price,\n        \"bid_count\": len(auction.bids),\n        \"latest_bid\": {\n            \"amount\": new_bid.amount,\n            \"user_id\": new_bid.user_id,\n            \"created_at\": new_bid.created_at.isoformat()\n        }\n    }, auction_id)\n    \n    return new_bid\n\n\n@router.websocket(\"/ws/auctions/{auction_id}\")\nasync def websocket_endpoint(websocket: WebSocket, auction_id: int):\n    await manager.connect(websocket, auction_id)\n    try:\n        while True:\n            await websocket.receive_text()\n    except WebSocketDisconnect:\n        manager.disconnect(websocket, auction_id)\n\n\n@router.post(\"\", response_model=AuctionResponse)\ndef create_auction(\n    auction_data: AuctionCreate,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    product = db.query(Product).filter(\n        Product.id == auction_data.product_id,\n        Product.seller_id == current_user.id\n    ).first()\n    \n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    product.type = \"auction\"\n    \n    new_auction = Auction(\n        product_id=auction_data.product_id,\n        start_price=auction_data.start_price,\n        min_increment=auction_data.min_increment,\n        start_at=auction_data.start_at,\n        end_at=auction_data.end_at,\n        current_price=auction_data.start_price,\n        status=\"scheduled\"\n    )\n    \n    db.add(new_auction)\n    db.commit()\n    db.refresh(new_auction)\n    \n    return new_auction\n","size_bytes":5275},"frontend/src/pages/home/HomeSections/AuctionsStrip.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport Countdown from '../../../components/common/Countdown';\nimport SARIcon from '../../../components/common/SARIcon';\n\ninterface AuctionsStripProps {\n  auctions: any[];\n}\n\nexport default function AuctionsStrip({ auctions }: AuctionsStripProps) {\n  const { t, i18n } = useTranslation();\n  const lang = (i18n.language as 'ar' | 'en') || 'ar';\n  const locale = lang === 'ar' ? 'ar-SA' : 'en-US';\n\n  if (!auctions.length) return null;\n\n  // رقم فقط بدون العملة\n  const formatNumber = (v: number) =>\n    new Intl.NumberFormat(locale, {\n      maximumFractionDigits: 0,\n    }).format(v || 0);\n\n  return (\n    <section className=\"bg-charcoal-light py-5 md:py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12\">\n        {/* العنوان ورابط مشاهدة الكل */}\n        <div className=\"flex justify-between items-center mb-4 md:mb-6\">\n          <h2 className=\"text-xl md:text-2xl font-extrabold text-ivory\">\n            {t('home.liveAuctions')}\n          </h2>\n          <Link\n            to=\"/auctions\"\n            className=\"text-gold hover:text-gold-light font-semibold flex items-center gap-2 text-sm md:text-base\"\n          >\n            {t('home.viewAllAuctions')}\n            <svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d={lang === 'ar' ? 'M15 19l-7-7 7-7' : 'M9 5l7 7-7 7'}\n              />\n            </svg>\n          </Link>\n        </div>\n\n        {/* شريط أفقي ببطاقات أصغر على الجوال، وشبكة على الشاشات الأكبر */}\n        <div className=\"-mx-3 px-3 overflow-x-auto pb-2 md:overflow-visible md:mx-0 md:px-0\">\n          <div className=\"flex gap-3 md:grid md:grid-cols-3 lg:grid-cols-5 md:gap-4 min-w-max md:min-w-0\">\n            {auctions.slice(0, 8).map((auction: any) => {\n              const title = auction.product_name?.[lang] || auction.name?.[lang] || '';\n              const current = auction.current_bid_usd ?? auction.current_bid ?? 0;\n\n              return (\n                <Link\n                  key={auction.id}\n                  to={`/auction/${auction.id}`}\n                  className=\"group bg-charcoal rounded-lg overflow-hidden shadow-luxury hover:shadow-gold transition-all\n                             min-w-[210px] w-[210px] md:min-w-0 md:w-auto flex-shrink-0\"\n                >\n                  {/* الصورة */}\n                  <div className=\"aspect-[3/4] overflow-hidden bg-sand\">\n                    <img\n                      src={auction.image}\n                      alt={title}\n                      className=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105\"\n                      loading=\"lazy\"\n                    />\n                  </div>\n\n                  {/* المحتوى */}\n                  <div className=\"p-3\">\n                    <h3 className=\"font-semibold text-ivory text-sm line-clamp-2 min-h-[2.6em]\">\n                      {title}\n                    </h3>\n\n                    <div className=\"mt-2 flex items-start justify-between gap-2\">\n                      {/* السعر الحالي */}\n                      <div>\n                        <p className=\"text-[11px] text-sand/80 mb-0.5\">\n                          {t('auction.currentBid')}\n                        </p>\n                        <p\n                          className={`text-gold font-bold text-base inline-flex items-center gap-1 ${\n                            lang === 'ar' ? 'flex-row-reverse' : ''\n                          }`}\n                        >\n                          <SARIcon size={14} />\n                          <span>{formatNumber(current)}</span>\n                        </p>\n                      </div>\n\n                      {/* عدد المزايدات */}\n                      <div className=\"text-end\">\n                        <p className=\"text-[11px] text-sand/80 mb-0.5\">\n                          {t('auction.bids')}\n                        </p>\n                        <p className=\"text-ivory font-semibold text-sm\">\n                          {auction.bids_count ?? 0}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"mt-2 pt-2 border-t border-charcoal-light\">\n                      <Countdown\n                        endAt={auction.end_time}\n                        compact\n                        className=\"text-[12px] font-mono text-gold\"\n                      />\n                    </div>\n                  </div>\n                </Link>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":4912},"backend/alembic/versions/d525a017292e_initial_migration.py":{"content":"\"\"\"Initial migration\n\nRevision ID: d525a017292e\nRevises: \nCreate Date: 2025-10-05 17:51:33.652948\n\n\"\"\"\nfrom typing import Sequence, Union\n\nfrom alembic import op\nimport sqlalchemy as sa\n\n\n# revision identifiers, used by Alembic.\nrevision: str = 'd525a017292e'\ndown_revision: Union[str, Sequence[str], None] = None\nbranch_labels: Union[str, Sequence[str], None] = None\ndepends_on: Union[str, Sequence[str], None] = None\n\n\ndef upgrade() -> None:\n    \"\"\"Upgrade schema.\"\"\"\n    # ### commands auto generated by Alembic - please adjust! ###\n    op.create_table('ads',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('title', sa.String(), nullable=False),\n    sa.Column('position', sa.Enum('hero', 'sidebar', 'strip', name='adposition'), nullable=False),\n    sa.Column('image_url', sa.String(), nullable=False),\n    sa.Column('target_url', sa.String(), nullable=True),\n    sa.Column('status', sa.Enum('active', 'inactive', name='adstatus'), nullable=True),\n    sa.Column('start_at', sa.DateTime(timezone=True), nullable=True),\n    sa.Column('end_at', sa.DateTime(timezone=True), nullable=True),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_ads_id'), 'ads', ['id'], unique=False)\n    op.create_index(op.f('ix_ads_position'), 'ads', ['position'], unique=False)\n    op.create_index(op.f('ix_ads_status'), 'ads', ['status'], unique=False)\n    op.create_table('users',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('name', sa.String(), nullable=False),\n    sa.Column('email', sa.String(), nullable=False),\n    sa.Column('phone', sa.String(), nullable=True),\n    sa.Column('password_hash', sa.String(), nullable=False),\n    sa.Column('roles', sa.ARRAY(sa.String()), nullable=True),\n    sa.Column('status', sa.Enum('active', 'suspended', name='userstatus'), nullable=True),\n    sa.Column('verified_seller', sa.Integer(), nullable=True),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_users_created_at'), 'users', ['created_at'], unique=False)\n    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)\n    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)\n    op.create_index(op.f('ix_users_status'), 'users', ['status'], unique=False)\n    op.create_table('audit_logs',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('admin_id', sa.Integer(), nullable=False),\n    sa.Column('entity', sa.String(), nullable=False),\n    sa.Column('entity_id', sa.Integer(), nullable=False),\n    sa.Column('action', sa.String(), nullable=False),\n    sa.Column('meta_json', sa.JSON(), nullable=True),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.ForeignKeyConstraint(['admin_id'], ['users.id'], ),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_audit_logs_admin_id'), 'audit_logs', ['admin_id'], unique=False)\n    op.create_index(op.f('ix_audit_logs_created_at'), 'audit_logs', ['created_at'], unique=False)\n    op.create_index(op.f('ix_audit_logs_entity'), 'audit_logs', ['entity'], unique=False)\n    op.create_index(op.f('ix_audit_logs_id'), 'audit_logs', ['id'], unique=False)\n    op.create_table('notifications',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('user_id', sa.Integer(), nullable=False),\n    sa.Column('title', sa.String(), nullable=False),\n    sa.Column('body', sa.Text(), nullable=False),\n    sa.Column('is_read', sa.Boolean(), nullable=True),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_notifications_created_at'), 'notifications', ['created_at'], unique=False)\n    op.create_index(op.f('ix_notifications_id'), 'notifications', ['id'], unique=False)\n    op.create_index(op.f('ix_notifications_is_read'), 'notifications', ['is_read'], unique=False)\n    op.create_index(op.f('ix_notifications_user_id'), 'notifications', ['user_id'], unique=False)\n    op.create_table('products',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('seller_id', sa.Integer(), nullable=False),\n    sa.Column('title', sa.String(), nullable=False),\n    sa.Column('brand', sa.String(), nullable=True),\n    sa.Column('category', sa.String(), nullable=True),\n    sa.Column('size_ml', sa.Integer(), nullable=True),\n    sa.Column('concentration', sa.String(), nullable=True),\n    sa.Column('condition', sa.Enum('new', 'used', name='productcondition'), nullable=False),\n    sa.Column('description', sa.Text(), nullable=True),\n    sa.Column('type', sa.Enum('listing', 'auction', name='producttype'), nullable=True),\n    sa.Column('price', sa.Float(), nullable=True),\n    sa.Column('status', sa.Enum('pending', 'published', 'sold', 'hidden', 'ended', name='productstatus'), nullable=True),\n    sa.Column('status_reason', sa.Text(), nullable=True),\n    sa.Column('allow_auth_check', sa.Boolean(), nullable=True),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.ForeignKeyConstraint(['seller_id'], ['users.id'], ),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_products_brand'), 'products', ['brand'], unique=False)\n    op.create_index(op.f('ix_products_category'), 'products', ['category'], unique=False)\n    op.create_index(op.f('ix_products_created_at'), 'products', ['created_at'], unique=False)\n    op.create_index(op.f('ix_products_id'), 'products', ['id'], unique=False)\n    op.create_index(op.f('ix_products_seller_id'), 'products', ['seller_id'], unique=False)\n    op.create_index(op.f('ix_products_status'), 'products', ['status'], unique=False)\n    op.create_table('auctions',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('product_id', sa.Integer(), nullable=False),\n    sa.Column('start_price', sa.Float(), nullable=False),\n    sa.Column('min_increment', sa.Float(), nullable=False),\n    sa.Column('start_at', sa.DateTime(timezone=True), nullable=False),\n    sa.Column('end_at', sa.DateTime(timezone=True), nullable=False),\n    sa.Column('current_price', sa.Float(), nullable=False),\n    sa.Column('status', sa.Enum('scheduled', 'running', 'ended', name='auctionstatus'), nullable=True),\n    sa.Column('end_extended_count', sa.Integer(), nullable=True),\n    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),\n    sa.PrimaryKeyConstraint('id'),\n    sa.UniqueConstraint('product_id')\n    )\n    op.create_index(op.f('ix_auctions_end_at'), 'auctions', ['end_at'], unique=False)\n    op.create_index(op.f('ix_auctions_id'), 'auctions', ['id'], unique=False)\n    op.create_index(op.f('ix_auctions_status'), 'auctions', ['status'], unique=False)\n    op.create_table('auth_requests',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('product_id', sa.Integer(), nullable=False),\n    sa.Column('requester_id', sa.Integer(), nullable=False),\n    sa.Column('fee_amount', sa.Float(), nullable=False),\n    sa.Column('assigned_to', sa.Integer(), nullable=True),\n    sa.Column('status', sa.Enum('open', 'processing', 'done', name='authrequeststatus'), nullable=True),\n    sa.Column('result_text', sa.Text(), nullable=True),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),\n    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),\n    sa.ForeignKeyConstraint(['requester_id'], ['users.id'], ),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_auth_requests_created_at'), 'auth_requests', ['created_at'], unique=False)\n    op.create_index(op.f('ix_auth_requests_id'), 'auth_requests', ['id'], unique=False)\n    op.create_index(op.f('ix_auth_requests_product_id'), 'auth_requests', ['product_id'], unique=False)\n    op.create_index(op.f('ix_auth_requests_requester_id'), 'auth_requests', ['requester_id'], unique=False)\n    op.create_index(op.f('ix_auth_requests_status'), 'auth_requests', ['status'], unique=False)\n    op.create_table('orders',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('buyer_id', sa.Integer(), nullable=False),\n    sa.Column('product_id', sa.Integer(), nullable=False),\n    sa.Column('amount', sa.Float(), nullable=False),\n    sa.Column('payment_method', sa.Enum('cod', 'bank', name='paymentmethod'), nullable=False),\n    sa.Column('status', sa.Enum('pending', 'seller_confirmed', 'shipped', 'completed', 'canceled', 'dispute', name='orderstatus'), nullable=True),\n    sa.Column('shipping_address_json', sa.JSON(), nullable=True),\n    sa.Column('notes', sa.Text(), nullable=True),\n    sa.Column('internal_notes', sa.Text(), nullable=True),\n    sa.Column('dispute_flag', sa.Boolean(), nullable=True),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.ForeignKeyConstraint(['buyer_id'], ['users.id'], ),\n    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_orders_buyer_id'), 'orders', ['buyer_id'], unique=False)\n    op.create_index(op.f('ix_orders_created_at'), 'orders', ['created_at'], unique=False)\n    op.create_index(op.f('ix_orders_id'), 'orders', ['id'], unique=False)\n    op.create_index(op.f('ix_orders_status'), 'orders', ['status'], unique=False)\n    op.create_table('product_images',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('product_id', sa.Integer(), nullable=False),\n    sa.Column('url', sa.String(), nullable=False),\n    sa.Column('sort_order', sa.Integer(), nullable=True),\n    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ondelete='CASCADE'),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_product_images_id'), 'product_images', ['id'], unique=False)\n    op.create_table('bids',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('auction_id', sa.Integer(), nullable=False),\n    sa.Column('user_id', sa.Integer(), nullable=False),\n    sa.Column('amount', sa.Float(), nullable=False),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.ForeignKeyConstraint(['auction_id'], ['auctions.id'], ),\n    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_bids_auction_id'), 'bids', ['auction_id'], unique=False)\n    op.create_index(op.f('ix_bids_created_at'), 'bids', ['created_at'], unique=False)\n    op.create_index(op.f('ix_bids_id'), 'bids', ['id'], unique=False)\n    op.create_index(op.f('ix_bids_user_id'), 'bids', ['user_id'], unique=False)\n    op.create_table('tickets',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('user_id', sa.Integer(), nullable=False),\n    sa.Column('subject', sa.String(), nullable=False),\n    sa.Column('message', sa.Text(), nullable=False),\n    sa.Column('status', sa.Enum('open', 'pending', 'closed', name='ticketstatus'), nullable=True),\n    sa.Column('order_id', sa.Integer(), nullable=True),\n    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),\n    sa.ForeignKeyConstraint(['order_id'], ['orders.id'], ),\n    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_tickets_created_at'), 'tickets', ['created_at'], unique=False)\n    op.create_index(op.f('ix_tickets_id'), 'tickets', ['id'], unique=False)\n    op.create_index(op.f('ix_tickets_status'), 'tickets', ['status'], unique=False)\n    op.create_index(op.f('ix_tickets_user_id'), 'tickets', ['user_id'], unique=False)\n    # ### end Alembic commands ###\n\n\ndef downgrade() -> None:\n    \"\"\"Downgrade schema.\"\"\"\n    # ### commands auto generated by Alembic - please adjust! ###\n    op.drop_index(op.f('ix_tickets_user_id'), table_name='tickets')\n    op.drop_index(op.f('ix_tickets_status'), table_name='tickets')\n    op.drop_index(op.f('ix_tickets_id'), table_name='tickets')\n    op.drop_index(op.f('ix_tickets_created_at'), table_name='tickets')\n    op.drop_table('tickets')\n    op.drop_index(op.f('ix_bids_user_id'), table_name='bids')\n    op.drop_index(op.f('ix_bids_id'), table_name='bids')\n    op.drop_index(op.f('ix_bids_created_at'), table_name='bids')\n    op.drop_index(op.f('ix_bids_auction_id'), table_name='bids')\n    op.drop_table('bids')\n    op.drop_index(op.f('ix_product_images_id'), table_name='product_images')\n    op.drop_table('product_images')\n    op.drop_index(op.f('ix_orders_status'), table_name='orders')\n    op.drop_index(op.f('ix_orders_id'), table_name='orders')\n    op.drop_index(op.f('ix_orders_created_at'), table_name='orders')\n    op.drop_index(op.f('ix_orders_buyer_id'), table_name='orders')\n    op.drop_table('orders')\n    op.drop_index(op.f('ix_auth_requests_status'), table_name='auth_requests')\n    op.drop_index(op.f('ix_auth_requests_requester_id'), table_name='auth_requests')\n    op.drop_index(op.f('ix_auth_requests_product_id'), table_name='auth_requests')\n    op.drop_index(op.f('ix_auth_requests_id'), table_name='auth_requests')\n    op.drop_index(op.f('ix_auth_requests_created_at'), table_name='auth_requests')\n    op.drop_table('auth_requests')\n    op.drop_index(op.f('ix_auctions_status'), table_name='auctions')\n    op.drop_index(op.f('ix_auctions_id'), table_name='auctions')\n    op.drop_index(op.f('ix_auctions_end_at'), table_name='auctions')\n    op.drop_table('auctions')\n    op.drop_index(op.f('ix_products_status'), table_name='products')\n    op.drop_index(op.f('ix_products_seller_id'), table_name='products')\n    op.drop_index(op.f('ix_products_id'), table_name='products')\n    op.drop_index(op.f('ix_products_created_at'), table_name='products')\n    op.drop_index(op.f('ix_products_category'), table_name='products')\n    op.drop_index(op.f('ix_products_brand'), table_name='products')\n    op.drop_table('products')\n    op.drop_index(op.f('ix_notifications_user_id'), table_name='notifications')\n    op.drop_index(op.f('ix_notifications_is_read'), table_name='notifications')\n    op.drop_index(op.f('ix_notifications_id'), table_name='notifications')\n    op.drop_index(op.f('ix_notifications_created_at'), table_name='notifications')\n    op.drop_table('notifications')\n    op.drop_index(op.f('ix_audit_logs_id'), table_name='audit_logs')\n    op.drop_index(op.f('ix_audit_logs_entity'), table_name='audit_logs')\n    op.drop_index(op.f('ix_audit_logs_created_at'), table_name='audit_logs')\n    op.drop_index(op.f('ix_audit_logs_admin_id'), table_name='audit_logs')\n    op.drop_table('audit_logs')\n    op.drop_index(op.f('ix_users_status'), table_name='users')\n    op.drop_index(op.f('ix_users_id'), table_name='users')\n    op.drop_index(op.f('ix_users_email'), table_name='users')\n    op.drop_index(op.f('ix_users_created_at'), table_name='users')\n    op.drop_table('users')\n    op.drop_index(op.f('ix_ads_status'), table_name='ads')\n    op.drop_index(op.f('ix_ads_position'), table_name='ads')\n    op.drop_index(op.f('ix_ads_id'), table_name='ads')\n    op.drop_table('ads')\n    # ### end Alembic commands ###\n","size_bytes":15268},"backend/app/routers/__init__.py":{"content":"# Routers module\n","size_bytes":17},"backend/app/models/user.py":{"content":"from sqlalchemy import Column, Integer, String, DateTime, ARRAY, Enum as SQLEnum\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nimport enum\nfrom ..core.database import Base\n\n\nclass UserStatus(str, enum.Enum):\n    active = \"active\"\n    suspended = \"suspended\"\n\n\nclass UserRole(str, enum.Enum):\n    super_admin = \"super_admin\"\n    admin = \"admin\"\n    moderator = \"moderator\"\n    support = \"support\"\n    seller = \"seller\"\n    buyer = \"buyer\"\n\n\nclass User(Base):\n    __tablename__ = \"users\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    name = Column(String, nullable=False)\n    email = Column(String, unique=True, index=True, nullable=False)\n    phone = Column(String, nullable=True)\n    password_hash = Column(String, nullable=False)\n    roles = Column(ARRAY(String), default=[\"buyer\"])\n    status = Column(SQLEnum(UserStatus), default=UserStatus.active, index=True)\n    verified_seller = Column(Integer, default=0)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    products = relationship(\"Product\", back_populates=\"seller\", foreign_keys=\"Product.seller_id\")\n    bids = relationship(\"Bid\", back_populates=\"user\")\n    orders_as_buyer = relationship(\"Order\", back_populates=\"buyer\", foreign_keys=\"Order.buyer_id\")\n    auth_requests = relationship(\"AuthRequest\", back_populates=\"requester\", foreign_keys=\"AuthRequest.requester_id\")\n    tickets = relationship(\"Ticket\", back_populates=\"user\")\n    notifications = relationship(\"Notification\", back_populates=\"user\")\n    audit_logs = relationship(\"AuditLog\", back_populates=\"admin\")\n","size_bytes":1616},"backend/app/models/ad.py":{"content":"from sqlalchemy import Column, Integer, String, DateTime, Enum as SQLEnum\nfrom sqlalchemy.sql import func\nimport enum\nfrom ..core.database import Base\n\n\nclass AdPosition(str, enum.Enum):\n    hero = \"hero\"\n    sidebar = \"sidebar\"\n    strip = \"strip\"\n\n\nclass AdStatus(str, enum.Enum):\n    active = \"active\"\n    inactive = \"inactive\"\n\n\nclass Ad(Base):\n    __tablename__ = \"ads\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    title = Column(String, nullable=False)\n    position = Column(SQLEnum(AdPosition), nullable=False, index=True)\n    image_url = Column(String, nullable=False)\n    target_url = Column(String)\n    status = Column(SQLEnum(AdStatus), default=AdStatus.active, index=True)\n    start_at = Column(DateTime(timezone=True), nullable=True)\n    end_at = Column(DateTime(timezone=True), nullable=True)\n","size_bytes":826},"frontend/src/services/auctionService.ts":{"content":"import { Auction, Bid, Product } from '../types';\n\nconst mockAuctions: (Auction & { product: Product; seller?: { id: number; full_name: string; verified_seller: boolean } })[] = [\n  {\n    id: 1,\n    product_id: 1,\n    seller_id: 1,\n    starting_price: 100.00,\n    current_price: 142.00,\n    minimum_increment: 5.00,\n    start_time: new Date(Date.now() - 86400000).toISOString(),\n    end_time: new Date(Date.now() + 3600000).toISOString(),\n    status: 'active',\n    total_bids: 8,\n    seller: {\n      id: 1,\n      full_name: 'Ahmed Al-Rashid',\n      verified_seller: true\n    },\n    product: {\n      id: 1,\n      seller_id: 1,\n      name_ar: 'شانيل رقم 5',\n      name_en: 'Chanel No 5',\n      description_ar: 'عطر كلاسيكي فاخر مع نفحات من الياسمين والورد',\n      description_en: 'Classic luxury perfume with jasmine and rose notes',\n      product_type: 'eau_de_parfum',\n      brand: 'Chanel',\n      category: 'floral',\n      base_price: 150.00,\n      size_ml: 100,\n      concentration: 'EDP',\n      condition: 'new',\n      stock_quantity: 1,\n      image_urls: [\n        'https://via.placeholder.com/600x600?text=Chanel+No+5+Main',\n        'https://via.placeholder.com/600x600?text=Chanel+No+5+Side',\n        'https://via.placeholder.com/600x600?text=Chanel+No+5+Back',\n        'https://via.placeholder.com/600x600?text=Chanel+No+5+Detail',\n      ],\n      status: 'published',\n      created_at: '2024-01-01T00:00:00Z',\n      updated_at: '2024-01-01T00:00:00Z',\n    },\n  },\n];\n\nconst mockBids: Bid[] = [\n  { id: 1, auction_id: 1, bidder_id: 2, amount: 105.00, created_at: new Date(Date.now() - 7200000).toISOString(), bidder: { id: 2, email: 'user2@test.com', full_name: 'Ali***', roles: ['buyer'], status: 'active' } },\n  { id: 2, auction_id: 1, bidder_id: 3, amount: 110.00, created_at: new Date(Date.now() - 6800000).toISOString(), bidder: { id: 3, email: 'user3@test.com', full_name: 'Sar***', roles: ['buyer'], status: 'active' } },\n  { id: 3, auction_id: 1, bidder_id: 2, amount: 115.00, created_at: new Date(Date.now() - 6400000).toISOString(), bidder: { id: 2, email: 'user2@test.com', full_name: 'Ali***', roles: ['buyer'], status: 'active' } },\n  { id: 4, auction_id: 1, bidder_id: 4, amount: 120.00, created_at: new Date(Date.now() - 5200000).toISOString(), bidder: { id: 4, email: 'user4@test.com', full_name: 'Fah***', roles: ['buyer'], status: 'active' } },\n  { id: 5, auction_id: 1, bidder_id: 3, amount: 125.00, created_at: new Date(Date.now() - 4800000).toISOString(), bidder: { id: 3, email: 'user3@test.com', full_name: 'Sar***', roles: ['buyer'], status: 'active' } },\n  { id: 6, auction_id: 1, bidder_id: 2, amount: 130.00, created_at: new Date(Date.now() - 3600000).toISOString(), bidder: { id: 2, email: 'user2@test.com', full_name: 'Ali***', roles: ['buyer'], status: 'active' } },\n  { id: 7, auction_id: 1, bidder_id: 5, amount: 137.00, created_at: new Date(Date.now() - 1800000).toISOString(), bidder: { id: 5, email: 'user5@test.com', full_name: 'Moh***', roles: ['buyer'], status: 'active' } },\n  { id: 8, auction_id: 1, bidder_id: 4, amount: 142.00, created_at: new Date(Date.now() - 900000).toISOString(), bidder: { id: 4, email: 'user4@test.com', full_name: 'Fah***', roles: ['buyer'], status: 'active' } },\n];\n\nexport const fetchAuctionById = async (id: number) => {\n  await new Promise(resolve => setTimeout(resolve, 300));\n  \n  const auction = mockAuctions.find(a => a.id === id);\n  if (!auction) {\n    throw new Error('Auction not found');\n  }\n  \n  return auction;\n};\n\nexport const fetchAuctionBids = async (auctionId: number) => {\n  await new Promise(resolve => setTimeout(resolve, 200));\n  \n  return mockBids\n    .filter(b => b.auction_id === auctionId)\n    .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n};\n\nexport const placeBid = async (auctionId: number, amount: number) => {\n  await new Promise(resolve => setTimeout(resolve, 400));\n  \n  const auction = mockAuctions.find(a => a.id === auctionId);\n  if (!auction) {\n    throw new Error('Auction not found');\n  }\n  \n  if (amount < auction.current_price + auction.minimum_increment) {\n    const minBidSAR = ((auction.current_price + auction.minimum_increment) * 3.75).toFixed(2);\n    throw new Error(`Bid must be at least ${minBidSAR} ﷼`);\n  }\n  \n  const newBid: Bid = {\n    id: mockBids.length + 1,\n    auction_id: auctionId,\n    bidder_id: 1,\n    amount,\n    created_at: new Date().toISOString(),\n    bidder: { id: 1, email: 'you@test.com', full_name: 'You***', roles: ['buyer'], status: 'active' },\n  };\n  \n  mockBids.push(newBid);\n  auction.current_price = amount;\n  auction.total_bids = (auction.total_bids || 0) + 1;\n  \n  return newBid;\n};\n\nexport const fetchAuctionByProductId = async (productId: number) => {\n  await new Promise(resolve => setTimeout(resolve, 200));\n  \n  const auction = mockAuctions.find(a => a.product_id === productId);\n  return auction || null;\n};\n","size_bytes":4950},"frontend/src/store/uiStore.ts":{"content":"import { create } from 'zustand';\n\ninterface UIState {\n  language: 'en' | 'ar';\n  setLanguage: (lang: 'en' | 'ar') => void;\n  isRTL: boolean;\n}\n\nexport const useUIStore = create<UIState>((set) => ({\n  language: 'ar',\n  isRTL: true,\n  setLanguage: (lang: 'en' | 'ar') => {\n    set({ language: lang, isRTL: lang === 'ar' });\n    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';\n    document.documentElement.lang = lang;\n  }\n}));\n","size_bytes":440},"frontend/src/components/cart/MiniCartDrawer.tsx":{"content":"import { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { useCartStore } from \"../../store/cartStore\";\nimport { formatPrice } from \"../../utils/currency\";\n\ninterface MiniCartDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nexport default function MiniCartDrawer({ open, onClose }: MiniCartDrawerProps) {\n  const { t, i18n } = useTranslation();\n  const { items, remove, totals } = useCartStore();\n  const { sub, total } = totals();\n  const lang = i18n.language as 'ar' | 'en';\n\n  if (!open) return null;\n\n  return (\n    <>\n      <div\n        className=\"fixed inset-0 bg-black bg-opacity-50 z-[70]\"\n        onClick={onClose}\n        aria-hidden=\"true\"\n      />\n      <div\n        className=\"fixed top-0 h-full w-full max-w-md bg-charcoal z-[70] shadow-luxury overflow-y-auto\"\n        style={{ insetInlineEnd: 0 }}\n        dir={lang === 'ar' ? 'rtl' : 'ltr'}\n      >\n        <div className=\"sticky top-0 bg-charcoal border-b border-charcoal-light p-4 flex justify-between items-center z-10\">\n          <h2 className=\"text-xl font-bold text-ivory\">{t('cart.title')}</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-lg hover:bg-charcoal-light min-w-[44px] min-h-[44px] flex items-center justify-center\"\n            aria-label={t('common.close')}\n          >\n            <svg className=\"w-5 h-5 text-ivory\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {items.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-16 px-4\">\n            <svg className=\"w-20 h-20 text-taupe mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M6 6h15l-1.5 9H7.5L6 6zM7 6V4a3 3 0 016 0v2\"\n              />\n            </svg>\n            <p className=\"text-taupe text-center mb-6\">{t('cart.empty')}</p>\n            <Link\n              to=\"/new\"\n              onClick={onClose}\n              className=\"bg-gold text-charcoal px-6 py-3 rounded-luxury hover:bg-gold-hover transition font-semibold\"\n            >\n              {t('cart.continueShopping')}\n            </Link>\n          </div>\n        ) : (\n          <>\n            <div className=\"p-4 space-y-4\">\n              {items.map((item) => (\n                <div\n                  key={`${item.id}-${item.variantId || 'default'}`}\n                  className=\"flex gap-4 bg-charcoal-light rounded-luxury p-3\"\n                >\n                  <div className=\"w-20 h-20 flex-shrink-0 bg-sand rounded-lg overflow-hidden\">\n                    {item.image ? (\n                      <img\n                        src={item.image}\n                        alt={item.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center\">\n                        <svg className=\"w-8 h-8 text-taupe\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path d=\"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6z\" />\n                        </svg>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-ivory font-semibold text-sm truncate\">{item.name}</h3>\n                    {item.brand && <p className=\"text-taupe text-xs\">{item.brand}</p>}\n                    {item.variantLabel && <p className=\"text-gold text-xs\">{item.variantLabel}</p>}\n                    <p className=\"text-gold font-bold mt-1\">{formatPrice(item.price, lang)}</p>\n                    <p className=\"text-taupe text-xs mt-1\">{t('cart.qty')}: {item.qty}</p>\n                  </div>\n                  <button\n                    onClick={() => remove(item.id, item.variantId)}\n                    className=\"self-start p-2 hover:bg-charcoal rounded-lg transition\"\n                    aria-label={t('common.delete')}\n                  >\n                    <svg className=\"w-4 h-4 text-taupe hover:text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                  </button>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"sticky bottom-0 bg-charcoal border-t border-charcoal-light p-4 space-y-3\">\n              <div className=\"flex justify-between text-ivory\">\n                <span>{t('cart.subtotal')}:</span>\n                <span className=\"font-bold\">{formatPrice(sub, lang)}</span>\n              </div>\n              <div className=\"flex justify-between text-ivory text-lg font-bold\">\n                <span>{t('cart.total')}:</span>\n                <span className=\"text-gold\">{formatPrice(total, lang)}</span>\n              </div>\n              <Link\n                to=\"/cart\"\n                onClick={onClose}\n                className=\"block w-full bg-gold text-charcoal py-3 rounded-luxury hover:bg-gold-hover transition font-semibold text-center\"\n              >\n                {t('cart.viewCart')}\n              </Link>\n              <Link\n                to=\"/checkout\"\n                onClick={onClose}\n                className=\"block w-full bg-charcoal-light text-ivory py-3 rounded-luxury hover:bg-charcoal-lighter transition font-semibold text-center\"\n              >\n                {t('cart.checkout')}\n              </Link>\n            </div>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n","size_bytes":5989},"frontend/src/pages/CartPage.tsx":{"content":"import { useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { useCartStore } from \"../store/cartStore\";\nimport SARIcon from \"../components/common/SARIcon\";\n\nexport default function CartPage() {\n  const { t, i18n } = useTranslation();\n  const lang = i18n.language as \"ar\" | \"en\";\n  const locale = lang === \"ar\" ? \"ar-SA\" : \"en-US\";\n\n  const { items, remove, setQty, totals } = useCartStore();\n  const { sub, total } = totals();\n\n  const fmt = (v: number) =>\n    new Intl.NumberFormat(locale, {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(v);\n\n  const isEmpty = !items || items.length === 0;\n\n  if (isEmpty) {\n    return (\n      <div className=\"min-h-screen bg-sand py-12\">\n        <div className=\"max-w-3xl mx-auto px-4 text-center\">\n          <svg className=\"w-20 h-20 mx-auto text-taupe mb-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 6h15l-1.5 9H7.5L6 6zM7 6V4a3 3 0 016 0v2\" />\n          </svg>\n          <h1 className=\"text-2xl sm:text-3xl font-extrabold text-charcoal mb-2\">{t(\"cart.empty\")}</h1>\n          <p className=\"text-taupe mb-6\">{t(\"cart.emptyDesc\")}</p>\n          <Link\n            to=\"/new\"\n            className=\"inline-flex items-center justify-center px-6 py-3 rounded-luxury bg-gold text-charcoal font-semibold hover:bg-gold-hover transition\"\n          >\n            {t(\"cart.continueShopping\")}\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-sand py-6 sm:py-8\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12\">\n        <h1 className=\"text-xl sm:text-2xl font-extrabold text-charcoal mb-4 sm:mb-6\">\n          {t(\"cart.title\")}\n        </h1>\n\n        <div className=\"grid lg:grid-cols-[1fr_320px] gap-6 lg:gap-8\">\n          {/* قائمة المنتجات — Mobile first صف أفقي يتكيّف */}\n          <div className=\"space-y-4\">\n            {items.map((item) => {\n              const qty = item.qty ?? 1;\n              const lineTotal = (item.price ?? 0) * qty;\n\n              const dec = () => {\n                if (qty > 1) setQty(item.id, qty - 1, item.variantId);\n              };\n              const inc = () => setQty(item.id, qty + 1, item.variantId);\n\n              return (\n                <div\n                  key={`${item.id}-${item.variantId || \"default\"}`}\n                  className=\"bg-ivory rounded-xl shadow-sm px-3 py-3 sm:px-4 sm:py-4\"\n                >\n                  {/* شبكة الجوال: صورة + تفاصيل — تتحول على md إلى (صورة / تفاصيل / إجراءات) */}\n                  <div className=\"grid grid-cols-[84px_1fr] gap-3 sm:gap-4 md:grid-cols-[minmax(96px,112px)_1fr_minmax(280px,340px)] md:items-start\">\n                    {/* الصورة */}\n                    <div className=\"col-span-1\">\n                      <div className=\"aspect-square rounded-lg overflow-hidden bg-sand/60\">\n                        {item.image ? (\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"w-full h-full object-cover\"\n                            loading=\"lazy\"\n                          />\n                        ) : (\n                          <div className=\"w-full h-full grid place-items-center text-taupe\">\n                            <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                              <path d=\"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6z\" />\n                            </svg>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* التفاصيل + السعر (للجوال) */}\n                    <div className=\"min-w-0\">\n                      <div className=\"flex justify-between md:block\">\n                        <div className=\"min-w-0\">\n                          <h3 className=\"text-base sm:text-lg font-semibold text-charcoal leading-snug line-clamp-2\">\n                            {item.name}\n                          </h3>\n                          {item.brand && <p className=\"text-xs sm:text-sm text-taupe mt-1\">{item.brand}</p>}\n                          {item.variantLabel && (\n                            <p className=\"text-[13px] text-gold font-semibold mt-1\">{item.variantLabel}</p>\n                          )}\n                        </div>\n\n                        {/* السعر في الجوال */}\n                        <div className=\"md:hidden ms-3 shrink-0 text-gold font-extrabold text-base inline-flex items-center gap-1\">\n                          {fmt(item.price ?? 0)} <SARIcon size={16} />\n                        </div>\n                      </div>\n\n                      {/* أدوات الجوال: كمية / حذف / إجمالي فرعي / زر شراء سريع */}\n                      <div className=\"mt-3 md:hidden space-y-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"inline-flex items-center border border-sand rounded-full\">\n                            <button\n                              onClick={dec}\n                              className=\"w-10 h-10 grid place-items-center rounded-s-full hover:bg-gold/15 text-charcoal\"\n                              aria-label={t(\"common.decrease\", \"إنقاص\")}\n                              disabled={qty <= 1}\n                            >\n                              −\n                            </button>\n                            <span className=\"w-10 text-center font-semibold\">{qty}</span>\n                            <button\n                              onClick={inc}\n                              className=\"w-10 h-10 grid place-items-center rounded-e-full hover:bg-gold/15 text-charcoal\"\n                              aria-label={t(\"common.increase\", \"زيادة\")}\n                            >\n                              +\n                            </button>\n                          </div>\n\n                          <button\n                            onClick={() => remove(item.id, item.variantId)}\n                            className=\"ms-auto inline-flex items-center gap-1 text-sm text-taupe hover:text-red-600\"\n                          >\n                            <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                              <path\n                                d=\"M3 6h18M8 6V4h8v2m-1 0v14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V6h10z\"\n                                strokeWidth=\"2\"\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                              />\n                            </svg>\n                            {t(\"wishlist.remove\")}\n                          </button>\n                        </div>\n\n                        {/* الإجمالي الفرعي للسطر */}\n                        <div className=\"text-sm text-taupe\">\n                          {t(\"cart.lineTotal\", \"الإجمالي الفرعي\")}:{\" \"}\n                          <span className=\"text-charcoal font-semibold inline-flex items-center gap-1\">\n                            {fmt(lineTotal)} <SARIcon size={14} />\n                          </span>\n                        </div>\n\n                        <Link\n                          to=\"/checkout\"\n                          className=\"block w-full h-11 rounded-luxury bg-gold text-charcoal font-semibold hover:bg-gold-hover transition text-center leading-[44px]\"\n                        >\n                          {t(\"cart.checkout\")}\n                        </Link>\n                      </div>\n                    </div>\n\n                    {/* عمود الإجراءات (تابلت/ديسكتوب) */}\n                    <div className=\"hidden md:flex md:flex-col md:items-end md:gap-3\">\n                      <div className=\"text-gold font-extrabold text-xl inline-flex items-center gap-1\">\n                        {fmt(item.price ?? 0)} <SARIcon size={18} />\n                      </div>\n\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"inline-flex items-center border border-sand rounded-full\">\n                          <button\n                            onClick={dec}\n                            className=\"w-10 h-10 grid place-items-center rounded-s-full hover:bg-gold/15 text-charcoal\"\n                            aria-label={t(\"common.decrease\", \"إنقاص\")}\n                            disabled={qty <= 1}\n                          >\n                            −\n                          </button>\n                          <span className=\"w-10 text-center font-semibold\">{qty}</span>\n                          <button\n                            onClick={inc}\n                            className=\"w-10 h-10 grid place-items-center rounded-e-full hover:bg-gold/15 text-charcoal\"\n                            aria-label={t(\"common.increase\", \"زيادة\")}\n                          >\n                            +\n                          </button>\n                        </div>\n\n                        <button\n                          onClick={() => remove(item.id, item.variantId)}\n                          className=\"inline-flex items-center gap-2 text-sm text-taupe hover:text-red-600\"\n                        >\n                          <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                            <path\n                              d=\"M3 6h18M8 6V4h8v2m-1 0v14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V6h10z\"\n                              strokeWidth=\"2\"\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                            />\n                          </svg>\n                          {t(\"common.delete\")}\n                        </button>\n                      </div>\n\n                      <div className=\"text-sm text-taupe\">\n                        {t(\"cart.lineTotal\", \"الإجمالي الفرعي\")}:{\" \"}\n                        <span className=\"text-charcoal font-semibold inline-flex items-center gap-1\">\n                          {fmt(lineTotal)} <SARIcon size={14} />\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* ملخص السلة */}\n          <aside className=\"bg-ivory rounded-xl shadow-sm p-4 sm:p-5 h-fit\">\n            <h2 className=\"text-lg font-bold text-charcoal mb-4\">{t(\"cart.summary\")}</h2>\n\n            <div className=\"space-y-3 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-taupe\">{t(\"cart.subtotal\")}</span>\n                <span className=\"text-charcoal font-semibold inline-flex items-center gap-1\">\n                  {fmt(sub)} <SARIcon size={14} />\n                </span>\n              </div>\n\n              <div className=\"flex justify-between\">\n                <span className=\"text-taupe\">{t(\"cart.shipping\")}</span>\n                <span className=\"text-emerald-600 font-semibold\">\n                  {t(\"cart.calculatedAtCheckout\")}\n                </span>\n              </div>\n\n              <div className=\"border-t border-sand my-2\" />\n\n              <div className=\"flex justify-between text-base\">\n                <span className=\"font-bold text-charcoal\">{t(\"cart.total\")}</span>\n                <span className=\"font-extrabold text-gold inline-flex items-center gap-1\">\n                  {fmt(total)} <SARIcon size={16} />\n                </span>\n              </div>\n            </div>\n\n            <Link\n              to=\"/checkout\"\n              className=\"mt-4 block w-full h-11 rounded-luxury bg-gold text-charcoal font-semibold hover:bg-gold-hover transition text-center leading-[44px]\"\n            >\n              {t(\"cart.checkout\")}\n            </Link>\n\n            <Link\n              to=\"/new\"\n              className=\"mt-3 block w-full text-center text-sm text-taupe hover:text-charcoal\"\n            >\n              {t(\"cart.continueShopping\")}\n            </Link>\n          </aside>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":12514},"backend/app/routers/admin.py":{"content":"from fastapi import APIRouter, Depends, HTTPException, Query\nfrom sqlalchemy.orm import Session\nfrom typing import List\nfrom ..core.database import get_db\nfrom ..core.dependencies import require_roles\nfrom ..models.user import User\nfrom ..models.product import Product\nfrom ..models.order import Order\nfrom ..models.auction import Auction\n\nrouter = APIRouter(prefix=\"/admin\", tags=[\"admin\"])\n\n\n@router.get(\"/dashboard\")\ndef get_dashboard_stats(\n    current_user: User = Depends(require_roles([\"admin\", \"super_admin\"])),\n    db: Session = Depends(get_db)\n):\n    total_products = db.query(Product).count()\n    pending_products = db.query(Product).filter(Product.status == \"pending\").count()\n    total_orders = db.query(Order).count()\n    pending_orders = db.query(Order).filter(Order.status == \"pending\").count()\n    running_auctions = db.query(Auction).filter(Auction.status == \"running\").count()\n    \n    return {\n        \"total_products\": total_products,\n        \"pending_products\": pending_products,\n        \"total_orders\": total_orders,\n        \"pending_orders\": pending_orders,\n        \"running_auctions\": running_auctions\n    }\n\n\n@router.get(\"/users\")\ndef get_all_users(\n    page: int = Query(1, ge=1),\n    page_size: int = Query(20, ge=1, le=100),\n    current_user: User = Depends(require_roles([\"admin\", \"super_admin\"])),\n    db: Session = Depends(get_db)\n):\n    users = db.query(User).offset((page - 1) * page_size).limit(page_size).all()\n    return users\n\n\n@router.patch(\"/users/{user_id}/status\")\ndef update_user_status(\n    user_id: int,\n    status: str,\n    current_user: User = Depends(require_roles([\"admin\", \"super_admin\"])),\n    db: Session = Depends(get_db)\n):\n    user = db.query(User).filter(User.id == user_id).first()\n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    user.status = status\n    db.commit()\n    \n    return {\"message\": f\"User status updated to {status}\"}\n\n\n@router.patch(\"/users/{user_id}/roles\")\ndef update_user_roles(\n    user_id: int,\n    roles: List[str],\n    current_user: User = Depends(require_roles([\"super_admin\"])),\n    db: Session = Depends(get_db)\n):\n    user = db.query(User).filter(User.id == user_id).first()\n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    user.roles = roles\n    db.commit()\n    \n    return {\"message\": \"User roles updated\"}\n","size_bytes":2386},"frontend/src/pages/SellerOrdersPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface Order {\n  id: number;\n  buyerName: string;\n  productName: string;\n  productNameAr: string;\n  amount: number;\n  status: 'pending' | 'confirmed' | 'shipped' | 'completed' | 'canceled';\n  date: string;\n}\n\nexport default function SellerOrdersPage() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<string>('all');\n\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n\n  const fetchOrders = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const mockOrders: Order[] = [\n      { id: 1001, buyerName: 'Ahmed Mohamed', productName: 'Chanel No 5', productNameAr: 'شانيل رقم 5', amount: 150.00, status: 'pending', date: '2024-10-05' },\n      { id: 1002, buyerName: 'Fatima Ali', productName: 'Dior Sauvage', productNameAr: 'ديور سوفاج', amount: 120.00, status: 'confirmed', date: '2024-10-04' },\n      { id: 1003, buyerName: 'Omar Hassan', productName: 'Tom Ford Oud Wood', productNameAr: 'توم فورد أود وود', amount: 280.00, status: 'shipped', date: '2024-10-03' },\n      { id: 1004, buyerName: 'Sara Ibrahim', productName: 'Creed Aventus', productNameAr: 'كريد أفينتوس', amount: 350.00, status: 'completed', date: '2024-10-01' },\n      { id: 1005, buyerName: 'Khalid Ahmed', productName: 'Versace Eros', productNameAr: 'فيرساتشي إيروس', amount: 95.00, status: 'confirmed', date: '2024-10-04' },\n      { id: 1006, buyerName: 'Layla Mahmoud', productName: 'Yves Saint Laurent Y', productNameAr: 'إيف سان لوران واي', amount: 110.00, status: 'pending', date: '2024-10-05' },\n      { id: 1007, buyerName: 'Hassan Karim', productName: 'Paco Rabanne Invictus', productNameAr: 'باكو رابان إنفيكتوس', amount: 75.00, status: 'shipped', date: '2024-10-02' },\n      { id: 1008, buyerName: 'Nour Said', productName: 'Giorgio Armani Code', productNameAr: 'جورجيو أرماني كود', amount: 85.00, status: 'completed', date: '2024-09-28' },\n    ];\n\n    setOrders(mockOrders);\n    setLoading(false);\n  };\n\n  const handleStatusUpdate = (orderId: number, newStatus: Order['status']) => {\n    setOrders(orders.map(o => o.id === orderId ? { ...o, status: newStatus } : o));\n  };\n\n  const filteredOrders = filter === 'all'\n    ? orders\n    : orders.filter(o => o.status === filter);\n\n  const getStatusColor = (status: Order['status']) => {\n    switch (status) {\n      case 'pending': return 'text-gold bg-gold bg-opacity-10';\n      case 'confirmed': return 'text-blue-600 bg-blue-100';\n      case 'shipped': return 'text-purple-600 bg-purple-100';\n      case 'completed': return 'text-green-600 bg-green-100';\n      case 'canceled': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('seller.orders')}</h1>\n          <div className=\"flex gap-2 flex-wrap\">\n            <button\n              onClick={() => setFilter('all')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'all' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.allOrders')}\n            </button>\n            <button\n              onClick={() => setFilter('pending')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'pending' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.pending')}\n            </button>\n            <button\n              onClick={() => setFilter('confirmed')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'confirmed' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.confirmed')}\n            </button>\n            <button\n              onClick={() => setFilter('shipped')}\n              className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n                filter === 'shipped' ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'\n              }`}\n            >\n              {t('seller.shipped')}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.orderId')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.buyer')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.product')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.amount')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.date')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredOrders.map((order) => (\n                <tr key={order.id} className=\"border-b border-gray-100 hover:bg-sand transition\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{order.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{order.buyerName}</td>\n                  <td className=\"px-4 py-4 text-charcoal\">\n                    {i18n.language === 'ar' ? order.productNameAr : order.productName}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">{formatPrice(order.amount, language)}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(order.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      month: 'short',\n                      day: 'numeric',\n                    })}\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(order.status)}`}>\n                      {t(`seller.${order.status}`)}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    {order.status === 'pending' && (\n                      <button\n                        onClick={() => handleStatusUpdate(order.id, 'confirmed')}\n                        className=\"text-blue-600 hover:text-blue-700 text-sm font-semibold\"\n                      >\n                        {t('seller.confirm')}\n                      </button>\n                    )}\n                    {order.status === 'confirmed' && (\n                      <button\n                        onClick={() => handleStatusUpdate(order.id, 'shipped')}\n                        className=\"text-purple-600 hover:text-purple-700 text-sm font-semibold\"\n                      >\n                        {t('seller.markShipped')}\n                      </button>\n                    )}\n                    {order.status === 'shipped' && (\n                      <button\n                        onClick={() => handleStatusUpdate(order.id, 'completed')}\n                        className=\"text-green-600 hover:text-green-700 text-sm font-semibold\"\n                      >\n                        {t('seller.complete')}\n                      </button>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredOrders.length === 0 && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-taupe\">{t('seller.noOrders')}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":8657},"frontend/src/components/common/Pagination.tsx":{"content":"import { useTranslation } from 'react-i18next';\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n}\n\nexport default function Pagination({ currentPage, totalPages, onPageChange }: PaginationProps) {\n  const { t } = useTranslation();\n\n  if (totalPages <= 1) return null;\n\n  const getPageNumbers = () => {\n    const pages: (number | string)[] = [];\n    \n    if (totalPages <= 7) {\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      if (currentPage <= 3) {\n        for (let i = 1; i <= 4; i++) pages.push(i);\n        pages.push('...');\n        pages.push(totalPages);\n      } else if (currentPage >= totalPages - 2) {\n        pages.push(1);\n        pages.push('...');\n        for (let i = totalPages - 3; i <= totalPages; i++) pages.push(i);\n      } else {\n        pages.push(1);\n        pages.push('...');\n        for (let i = currentPage - 1; i <= currentPage + 1; i++) pages.push(i);\n        pages.push('...');\n        pages.push(totalPages);\n      }\n    }\n    \n    return pages;\n  };\n\n  return (\n    <div className=\"flex items-center justify-center gap-2 mt-8\">\n      <button\n        onClick={() => onPageChange(currentPage - 1)}\n        disabled={currentPage === 1}\n        className=\"px-4 py-2 rounded-luxury bg-white text-charcoal border border-gray-300 hover:bg-ivory disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {t('catalog.previous')}\n      </button>\n\n      {getPageNumbers().map((page, index) => (\n        page === '...' ? (\n          <span key={`ellipsis-${index}`} className=\"px-2 text-taupe\">...</span>\n        ) : (\n          <button\n            key={page}\n            onClick={() => onPageChange(page as number)}\n            className={`px-4 py-2 rounded-luxury ${\n              currentPage === page\n                ? 'bg-gold text-charcoal font-semibold'\n                : 'bg-white text-charcoal border border-gray-300 hover:bg-ivory'\n            }`}\n          >\n            {page}\n          </button>\n        )\n      ))}\n\n      <button\n        onClick={() => onPageChange(currentPage + 1)}\n        disabled={currentPage === totalPages}\n        className=\"px-4 py-2 rounded-luxury bg-white text-charcoal border border-gray-300 hover:bg-ivory disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {t('catalog.next')}\n      </button>\n    </div>\n  );\n}\n","size_bytes":2404},"frontend/src/pages/AdminSettingsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface Settings {\n  commissionNew: number;\n  commissionUsed: number;\n  commissionAuction: number;\n  authenticityFee: number;\n  notificationsEnabled: boolean;\n  language: 'ar' | 'en';\n  theme: 'light' | 'dark';\n}\n\nexport default function AdminSettingsPage() {\n  const { t } = useTranslation();\n  const [settings, setSettings] = useState<Settings>({\n    commissionNew: 10,\n    commissionUsed: 5,\n    commissionAuction: 5,\n    authenticityFee: 25,\n    notificationsEnabled: true,\n    language: 'ar',\n    theme: 'light',\n  });\n  const [loading, setLoading] = useState(true);\n  const [saved, setSaved] = useState(false);\n\n  useEffect(() => {\n    fetchSettings();\n  }, []);\n\n  const fetchSettings = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setLoading(false);\n  };\n\n  const handleSave = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setSaved(true);\n    setTimeout(() => setSaved(false), 3000);\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('admin.settings')}</h1>\n          {saved && <span className=\"text-green-600 font-semibold\">✓ {t('admin.saved')}</span>}\n        </div>\n\n        <div className=\"space-y-6\">\n          <div>\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.commissionRates')}</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.newProducts')} (%)</label>\n                <input type=\"number\" value={settings.commissionNew} onChange={(e) => setSettings({ ...settings, commissionNew: parseFloat(e.target.value) })} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n              </div>\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.usedProducts')} (%)</label>\n                <input type=\"number\" value={settings.commissionUsed} onChange={(e) => setSettings({ ...settings, commissionUsed: parseFloat(e.target.value) })} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n              </div>\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.auctionProducts')} (%)</label>\n                <input type=\"number\" value={settings.commissionAuction} onChange={(e) => setSettings({ ...settings, commissionAuction: parseFloat(e.target.value) })} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.fees')}</h3>\n            <div>\n              <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.authenticityFee')} (ريال)</label>\n              <input type=\"number\" value={settings.authenticityFee} onChange={(e) => setSettings({ ...settings, authenticityFee: parseFloat(e.target.value) })} className=\"w-full md:w-1/3 px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.systemSettings')}</h3>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={settings.notificationsEnabled} onChange={(e) => setSettings({ ...settings, notificationsEnabled: e.target.checked })} />\n                <label className=\"text-charcoal font-semibold\">{t('admin.enableNotifications')}</label>\n              </div>\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.defaultLanguage')}</label>\n                <select value={settings.language} onChange={(e) => setSettings({ ...settings, language: e.target.value as 'ar' | 'en' })} className=\"px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\">\n                  <option value=\"ar\">{t('admin.arabic')}</option>\n                  <option value=\"en\">{t('admin.english')}</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.theme')}</label>\n                <select value={settings.theme} onChange={(e) => setSettings({ ...settings, theme: e.target.value as 'light' | 'dark' })} className=\"px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\">\n                  <option value=\"light\">{t('admin.light')}</option>\n                  <option value=\"dark\">{t('admin.dark')}</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.rbacMatrix')}</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border border-gray-200\">\n                <thead>\n                  <tr className=\"bg-sand\">\n                    <th className=\"text-right px-4 py-3 text-charcoal font-semibold border-b\">{t('admin.permission')}</th>\n                    <th className=\"text-center px-4 py-3 text-charcoal font-semibold border-b\">{t('admin.admin')}</th>\n                    <th className=\"text-center px-4 py-3 text-charcoal font-semibold border-b\">{t('admin.moderator')}</th>\n                    <th className=\"text-center px-4 py-3 text-charcoal font-semibold border-b\">{t('admin.seller')}</th>\n                    <th className=\"text-center px-4 py-3 text-charcoal font-semibold border-b\">{t('admin.buyer')}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b\">\n                    <td className=\"px-4 py-3 text-charcoal\">{t('admin.manageUsers')}</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                  </tr>\n                  <tr className=\"border-b\">\n                    <td className=\"px-4 py-3 text-charcoal\">{t('admin.moderateProducts')}</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                  </tr>\n                  <tr className=\"border-b\">\n                    <td className=\"px-4 py-3 text-charcoal\">{t('admin.manageOrders')}</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                  </tr>\n                  <tr className=\"border-b\">\n                    <td className=\"px-4 py-3 text-charcoal\">{t('admin.placeOrders')}</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                  </tr>\n                  <tr>\n                    <td className=\"px-4 py-3 text-charcoal\">{t('admin.viewReports')}</td>\n                    <td className=\"text-center px-4 py-3\">✓</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                    <td className=\"text-center px-4 py-3\">-</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <button onClick={handleSave} className=\"bg-gold text-charcoal px-8 py-3 rounded-luxury font-semibold hover:bg-gold-hover\">\n            {t('admin.saveSettings')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8588},"frontend/tailwind.config.js":{"content":"export default {\n  content: [\n    \"./index.html\",\n    \"./src/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        charcoal: {\n          DEFAULT: '#1A1A1A',\n          light: '#2A2A2A',\n          dark: '#0A0A0A'\n        },\n        gold: {\n          DEFAULT: '#C8A24A',\n          hover: '#B28E3E',\n          light: '#D4B566',\n          dark: '#9F7D32'\n        },\n        ivory: {\n          DEFAULT: '#F7F5F2',\n          light: '#FFFFFF',\n          dark: '#EAE4D9'\n        },\n        sand: '#EAE4D9',\n        taupe: '#B8A68C',\n        success: '#2E7D6F',\n        alert: '#E26D5A'\n      },\n      fontFamily: {\n        inter: ['Inter', 'sans-serif'],\n        cairo: ['Cairo', 'sans-serif']\n      },\n      fontSize: {\n        'h1': ['32px', { lineHeight: '1.2', fontWeight: '700' }],\n        'h2': ['24px', { lineHeight: '1.3', fontWeight: '600' }],\n        'body': ['16px', { lineHeight: '1.5', fontWeight: '400' }]\n      },\n      borderRadius: {\n        'luxury': '12px'\n      },\n      boxShadow: {\n        'soft': '0 2px 8px rgba(0, 0, 0, 0.08)',\n        'soft-lg': '0 4px 16px rgba(0, 0, 0, 0.12)'\n      },\n      spacing: {\n        '8': '8px',\n        '16': '16px',\n        '24': '24px',\n        '32': '32px'\n      }\n    },\n  },\n  plugins: [],\n}\n","size_bytes":1267},"frontend/src/pages/home/HomeSections/Newsletter.tsx":{"content":"import { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport default function Newsletter() {\n  const { t, i18n } = useTranslation();\n  const [email, setEmail] = useState('');\n  const [subscribed, setSubscribed] = useState(false);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (email) {\n      console.log('Newsletter subscription:', email);\n      setSubscribed(true);\n      setTimeout(() => {\n        setEmail('');\n        setSubscribed(false);\n      }, 3000);\n    }\n  };\n\n  return (\n    <section className=\"bg-charcoal py-12 md:py-16\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 text-center\">\n        <h2 className=\"text-3xl md:text-4xl font-bold text-ivory mb-4\">\n          {t('home.newsletterTitle')}\n        </h2>\n        <p className=\"text-sand mb-8 max-w-2xl mx-auto\">\n          {t('home.newsletterDescription')}\n        </p>\n\n        {subscribed ? (\n          <div className=\"bg-gold/20 text-gold px-6 py-4 rounded-lg inline-block\">\n            {t('home.newsletterSuccess')}\n          </div>\n        ) : (\n          <form onSubmit={handleSubmit} className=\"flex flex-col sm:flex-row gap-4 max-w-md mx-auto\">\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder={t('home.newsletterPlaceholder')}\n              className=\"flex-1 px-4 py-3 rounded-lg bg-charcoal-light text-ivory border border-charcoal-light focus:border-gold focus:outline-none\"\n              required\n              dir={i18n.language === 'ar' ? 'rtl' : 'ltr'}\n            />\n            <button\n              type=\"submit\"\n              className=\"bg-gold text-charcoal px-8 py-3 rounded-lg font-semibold hover:bg-gold-light transition-colors shadow-luxury\"\n            >\n              {t('home.newsletterCta')}\n            </button>\n          </form>\n        )}\n\n        <p className=\"text-xs text-taupe mt-4\">\n          {t('home.newsletterConsent')}\n        </p>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2067},"frontend/src/pages/AdminDashboardPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface ModerationItem {\n  id: number;\n  type: 'product' | 'auction' | 'dispute' | 'auth_request';\n  title: string;\n  titleAr: string;\n  date: string;\n  priority: 'low' | 'medium' | 'high';\n}\n\nexport default function AdminDashboardPage() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const [kpis, setKpis] = useState({ totalUsers: 0, pendingProducts: 0, activeAuctions: 0, openDisputes: 0, authRequests: 0, revenue: 0 });\n  const [queue, setQueue] = useState<ModerationItem[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchDashboard();\n  }, []);\n\n  const fetchDashboard = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    setKpis({\n      totalUsers: 1247,\n      pendingProducts: 8,\n      activeAuctions: 5,\n      openDisputes: 3,\n      authRequests: 12,\n      revenue: 45230.50\n    });\n\n    setQueue([\n      { id: 1, type: 'product', title: 'Tom Ford Oud Wood', titleAr: 'توم فورد أود وود', date: '2024-10-05', priority: 'high' },\n      { id: 2, type: 'auth_request', title: 'Seller verification - Ahmed', titleAr: 'توثيق بائع - أحمد', date: '2024-10-05', priority: 'high' },\n      { id: 3, type: 'dispute', title: 'Order 1023 dispute', titleAr: 'نزاع طلب 1023', date: '2024-10-04', priority: 'medium' },\n      { id: 4, type: 'auction', title: 'Creed Aventus auction', titleAr: 'مزاد كريد أفينتوس', date: '2024-10-04', priority: 'low' },\n    ]);\n    \n    setLoading(false);\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'text-red-600 bg-red-100';\n      case 'medium': return 'text-gold bg-gold bg-opacity-10';\n      case 'low': return 'text-gray-600 bg-gray-200';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h1 className=\"text-h2 text-charcoal mb-2\">{t('admin.dashboard')}</h1>\n        <p className=\"text-taupe\">{t('admin.systemOverview')}</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">👥</span>\n            <h3 className=\"text-sm text-taupe\">{t('admin.totalUsers')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-charcoal\">{kpis.totalUsers}</p>\n        </div>\n\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">🛍️</span>\n            <h3 className=\"text-sm text-taupe\">{t('admin.pendingProducts')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-gold\">{kpis.pendingProducts}</p>\n        </div>\n\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">🔨</span>\n            <h3 className=\"text-sm text-taupe\">{t('admin.activeAuctions')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-charcoal\">{kpis.activeAuctions}</p>\n        </div>\n\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">⚠️</span>\n            <h3 className=\"text-sm text-taupe\">{t('admin.openDisputes')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-red-600\">{kpis.openDisputes}</p>\n        </div>\n\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">✅</span>\n            <h3 className=\"text-sm text-taupe\">{t('admin.authRequests')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-gold\">{kpis.authRequests}</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-gold to-gold-hover rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">💰</span>\n            <h3 className=\"text-sm text-charcoal\">{t('admin.totalRevenue')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-charcoal\">{formatPrice(kpis.revenue, language)}</p>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h2 className=\"text-h3 text-charcoal mb-4\">{t('admin.moderationQueue')}</h2>\n        <div className=\"space-y-3\">\n          {queue.map((item) => (\n            <div key={item.id} className=\"flex items-center justify-between p-4 border border-gray-200 rounded-luxury hover:border-gold transition\">\n              <div className=\"flex items-center gap-4\">\n                <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getPriorityColor(item.priority)}`}>\n                  {t(`admin.${item.priority}`)}\n                </span>\n                <div>\n                  <p className=\"text-charcoal font-medium\">{i18n.language === 'ar' ? item.titleAr : item.title}</p>\n                  <p className=\"text-sm text-taupe\">{new Date(item.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}</p>\n                </div>\n              </div>\n              <Link to={`/admin/${item.type === 'auth_request' ? 'auth-requests' : item.type}s`} className=\"text-gold hover:text-gold-hover font-semibold\">\n                {t('admin.review')} →\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6047},"frontend/src/pages/home/HomeSections/BrandsCarousel.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Brand } from '../../../services/homeService';\n\ninterface BrandsCarouselProps {\n  brands: Brand[];\n}\n\nexport default function BrandsCarousel({ brands }: BrandsCarouselProps) {\n  const { t } = useTranslation();\n\n  if (!brands.length) return null;\n\n  return (\n    <section className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-8 md:py-12\">\n      <h2 className=\"text-2xl md:text-3xl font-bold text-charcoal mb-6 text-center\">\n        {t('home.topBrands')}\n      </h2>\n      \n      <div className=\"overflow-x-auto -mx-4 px-4 pb-4\">\n        <div className=\"flex gap-6 min-w-max md:grid md:grid-cols-4 lg:grid-cols-6 md:min-w-0\">\n          {brands.map((brand) => (\n            <Link\n              key={brand.id}\n              to={`/search?brand=${encodeURIComponent(brand.name)}`}\n              className=\"flex items-center justify-center bg-ivory rounded-lg p-6 hover:bg-sand transition-colors shadow-md hover:shadow-luxury w-40 h-24 md:w-auto flex-shrink-0\"\n            >\n              <img\n                src={brand.logo}\n                alt={brand.name}\n                className=\"max-w-full max-h-full object-contain opacity-70 hover:opacity-100 transition-opacity\"\n                loading=\"lazy\"\n              />\n            </Link>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":1403},"backend/app/__init__.py":{"content":"# Backend application\n","size_bytes":22},"frontend/src/pages/AdminOrdersPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface Order {\n  id: number;\n  buyer: string;\n  product: string;\n  productAr: string;\n  amount: number;\n  status: 'pending' | 'seller_confirmed' | 'shipped' | 'completed' | 'canceled' | 'dispute';\n  date: string;\n}\n\nexport default function AdminOrdersPage() {\n  const { t, i18n } = useTranslation();\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n\n  const fetchOrders = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setOrders([\n      { id: 1001, buyer: 'Ahmed M.', product: 'Chanel No 5', productAr: 'شانيل رقم 5', amount: 150, status: 'pending', date: '2024-10-05' },\n      { id: 1002, buyer: 'Fatima A.', product: 'Dior Sauvage', productAr: 'ديور سوفاج', amount: 120, status: 'seller_confirmed', date: '2024-10-04' },\n      { id: 1003, buyer: 'Omar H.', product: 'Tom Ford Oud', productAr: 'توم فورد أود وود', amount: 280, status: 'shipped', date: '2024-10-03' },\n      { id: 1004, buyer: 'Sara I.', product: 'Creed Aventus', productAr: 'كريد أفينتوس', amount: 350, status: 'completed', date: '2024-10-01' },\n      { id: 1005, buyer: 'Khalid A.', product: 'Versace Eros', productAr: 'فيرساتشي إيروس', amount: 95, status: 'dispute', date: '2024-10-04' },\n    ]);\n    setLoading(false);\n  };\n\n  const handleStatusChange = (id: number, newStatus: Order['status']) => {\n    setOrders(orders.map(o => o.id === id ? { ...o, status: newStatus } : o));\n  };\n\n  const handleExportCSV = () => {\n    const csv = [\n      ['Order ID', 'Buyer', 'Product', 'Amount', 'Status', 'Date'],\n      ...orders.map(o => [o.id, o.buyer, o.product, o.amount, o.status, o.date])\n    ].map(row => row.join(',')).join('\\n');\n    \n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'orders.csv';\n    a.click();\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'pending': return 'text-gold bg-gold bg-opacity-10';\n      case 'seller_confirmed': return 'text-blue-600 bg-blue-100';\n      case 'shipped': return 'text-purple-600 bg-purple-100';\n      case 'completed': return 'text-green-600 bg-green-100';\n      case 'canceled': return 'text-gray-600 bg-gray-200';\n      case 'dispute': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('admin.orders')}</h1>\n          <button onClick={handleExportCSV} className=\"bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover\">\n            📥 {t('admin.exportCSV')}\n          </button>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.orderId')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.buyer')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.product')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.amount')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.date')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.map((o) => (\n                <tr key={o.id} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{o.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{o.buyer}</td>\n                  <td className=\"px-4 py-4 text-charcoal\">{i18n.language === 'ar' ? o.productAr : o.product}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">{o.amount} ريال</td>\n                  <td className=\"px-4 py-4\">\n                    <select value={o.status} onChange={(e) => handleStatusChange(o.id, e.target.value as Order['status'])} className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(o.status)} border-none`}>\n                      <option value=\"pending\">{t('admin.pending')}</option>\n                      <option value=\"seller_confirmed\">{t('admin.sellerConfirmed')}</option>\n                      <option value=\"shipped\">{t('admin.shipped')}</option>\n                      <option value=\"completed\">{t('admin.completed')}</option>\n                      <option value=\"canceled\">{t('admin.canceled')}</option>\n                      <option value=\"dispute\">{t('admin.dispute')}</option>\n                    </select>\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{new Date(o.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5618},"backend/app/routers/orders.py":{"content":"from fastapi import APIRouter, Depends, HTTPException, status, Query\nfrom sqlalchemy.orm import Session\nfrom typing import List, Optional\nfrom ..core.database import get_db\nfrom ..core.dependencies import get_current_user, require_roles\nfrom ..models.user import User\nfrom ..models.order import Order\nfrom ..models.product import Product\nfrom ..schemas.order import OrderCreate, OrderUpdate, OrderResponse\n\nrouter = APIRouter(prefix=\"/orders\", tags=[\"orders\"])\n\n\n@router.post(\"\", response_model=OrderResponse)\ndef create_order(\n    order_data: OrderCreate,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    product = db.query(Product).filter(Product.id == order_data.product_id).first()\n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    if product.status != \"published\":\n        raise HTTPException(status_code=400, detail=\"Product is not available\")\n    \n    new_order = Order(\n        buyer_id=current_user.id,\n        product_id=order_data.product_id,\n        amount=product.price,\n        payment_method=order_data.payment_method,\n        shipping_address_json=order_data.shipping_address_json,\n        notes=order_data.notes,\n        status=\"pending\"\n    )\n    \n    product.status = \"sold\"\n    \n    db.add(new_order)\n    db.commit()\n    db.refresh(new_order)\n    \n    return new_order\n\n\n@router.get(\"/mine\", response_model=List[OrderResponse])\ndef get_my_orders(\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    orders = db.query(Order).filter(Order.buyer_id == current_user.id).all()\n    return orders\n\n\n@router.get(\"\", response_model=List[OrderResponse])\ndef get_all_orders(\n    status: Optional[str] = Query(None),\n    page: int = Query(1, ge=1),\n    page_size: int = Query(20, ge=1, le=100),\n    current_user: User = Depends(require_roles([\"admin\", \"super_admin\"])),\n    db: Session = Depends(get_db)\n):\n    query = db.query(Order)\n    \n    if status:\n        query = query.filter(Order.status == status)\n    \n    orders = query.offset((page - 1) * page_size).limit(page_size).all()\n    return orders\n\n\n@router.patch(\"/{order_id}/status\", response_model=OrderResponse)\ndef update_order_status(\n    order_id: int,\n    order_update: OrderUpdate,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    order = db.query(Order).filter(Order.id == order_id).first()\n    if not order:\n        raise HTTPException(status_code=404, detail=\"Order not found\")\n    \n    product = db.query(Product).filter(Product.id == order.product_id).first()\n    \n    user_roles = current_user.roles or []\n    is_admin = any(role in user_roles for role in [\"admin\", \"super_admin\"])\n    is_seller = product.seller_id == current_user.id and \"seller\" in user_roles\n    is_buyer = order.buyer_id == current_user.id\n    \n    if not (is_admin or is_seller or is_buyer):\n        raise HTTPException(status_code=403, detail=\"Not authorized to update this order\")\n    \n    if is_buyer and order_update.status not in [\"canceled\"]:\n        raise HTTPException(status_code=403, detail=\"Buyers can only cancel orders\")\n    \n    if is_seller and order_update.status not in [\"seller_confirmed\", \"shipped\", \"completed\"]:\n        raise HTTPException(status_code=403, detail=\"Invalid status for seller\")\n    \n    order.status = order_update.status\n    if order_update.internal_notes and is_admin:\n        order.internal_notes = order_update.internal_notes\n    if order_update.dispute_flag is not None and is_admin:\n        order.dispute_flag = order_update.dispute_flag\n    \n    db.commit()\n    db.refresh(order)\n    \n    return order\n","size_bytes":3677},"frontend/src/pages/OrdersPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface Order {\n  id: number;\n  productName: string;\n  productNameAr: string;\n  date: string;\n  amount: number;\n  status: 'pending' | 'shipped' | 'completed' | 'canceled';\n}\n\nexport default function OrdersPage() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [filter, setFilter] = useState<string>('all');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      const mockOrders: Order[] = [\n        {\n          id: 1001,\n          productName: 'Chanel No 5',\n          productNameAr: 'شانيل رقم 5',\n          date: '2024-10-01',\n          amount: 150.00,\n          status: 'completed',\n        },\n        {\n          id: 1002,\n          productName: 'Dior Sauvage',\n          productNameAr: 'ديور سوفاج',\n          date: '2024-10-03',\n          amount: 120.00,\n          status: 'shipped',\n        },\n        {\n          id: 1003,\n          productName: 'Tom Ford Oud Wood',\n          productNameAr: 'توم فورد أود وود',\n          date: '2024-10-04',\n          amount: 280.00,\n          status: 'pending',\n        },\n        {\n          id: 1004,\n          productName: 'Creed Aventus',\n          productNameAr: 'كريد أفينتوس',\n          date: '2024-09-28',\n          amount: 350.00,\n          status: 'completed',\n        },\n        {\n          id: 1005,\n          productName: 'Jo Malone Lime Basil',\n          productNameAr: 'جو مالون ليمون بايزل',\n          date: '2024-09-25',\n          amount: 95.00,\n          status: 'canceled',\n        },\n      ];\n\n      setOrders(mockOrders);\n      setLoading(false);\n    };\n\n    fetchOrders();\n  }, []);\n\n  const getStatusColor = (status: Order['status']) => {\n    switch (status) {\n      case 'pending':\n        return 'text-gold bg-gold bg-opacity-10';\n      case 'shipped':\n        return 'text-blue-600 bg-blue-100';\n      case 'completed':\n        return 'text-green-600 bg-green-100';\n      case 'canceled':\n        return 'text-red-600 bg-red-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const filteredOrders = filter === 'all'\n    ? orders\n    : orders.filter(order => order.status === filter);\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4\">\n        <h1 className=\"text-h2 text-charcoal\">{t('account.orders')}</h1>\n        \n        <div className=\"flex gap-2 flex-wrap\">\n          <button\n            onClick={() => setFilter('all')}\n            className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n              filter === 'all'\n                ? 'bg-gold text-charcoal'\n                : 'bg-sand text-charcoal-light hover:bg-gold hover:bg-opacity-30'\n            }`}\n          >\n            {t('account.allOrders')}\n          </button>\n          <button\n            onClick={() => setFilter('pending')}\n            className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n              filter === 'pending'\n                ? 'bg-gold text-charcoal'\n                : 'bg-sand text-charcoal-light hover:bg-gold hover:bg-opacity-30'\n            }`}\n          >\n            {t('orders.pending')}\n          </button>\n          <button\n            onClick={() => setFilter('shipped')}\n            className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n              filter === 'shipped'\n                ? 'bg-gold text-charcoal'\n                : 'bg-sand text-charcoal-light hover:bg-gold hover:bg-opacity-30'\n            }`}\n          >\n            {t('orders.shipped')}\n          </button>\n          <button\n            onClick={() => setFilter('completed')}\n            className={`px-4 py-2 rounded-luxury text-sm font-semibold transition ${\n              filter === 'completed'\n                ? 'bg-gold text-charcoal'\n                : 'bg-sand text-charcoal-light hover:bg-gold hover:bg-opacity-30'\n            }`}\n          >\n            {t('orders.completed')}\n          </button>\n        </div>\n      </div>\n\n      {filteredOrders.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-taupe\">{t('account.noOrders')}</p>\n        </div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('orders.orderId')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('orders.product')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('orders.date')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('orders.amount')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('orders.status')}\n                </th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">\n                  {t('orders.actions')}\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredOrders.map((order) => (\n                <tr key={order.id} className=\"border-b border-gray-100 hover:bg-sand transition\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{order.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">\n                    {i18n.language === 'ar' ? order.productNameAr : order.productName}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(order.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric'\n                    })}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">\n                    {formatPrice(order.amount, language)}\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <span\n                      className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(\n                        order.status\n                      )}`}\n                    >\n                      {t(`orders.${order.status}`)}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <div className=\"flex gap-2\">\n                      <Link\n                        to={`/account/orders/${order.id}`}\n                        className=\"text-gold hover:text-gold-hover text-sm font-semibold\"\n                      >\n                        {t('orders.view')}\n                      </Link>\n                      <button className=\"text-charcoal-light hover:text-charcoal text-sm font-semibold\">\n                        {t('orders.invoice')}\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":7888},"frontend/src/pages/Orders.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../lib/api';\nimport { Order } from '../types';\nimport { useUIStore } from '../store/uiStore';\nimport { useAuthStore } from '../store/authStore';\nimport { formatPrice } from '../utils/currency';\n\nexport default function Orders() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const { user, isAuthenticated } = useAuthStore();\n  const navigate = useNavigate();\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<string>('all');\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      setLoading(false);\n      return;\n    }\n    fetchOrders();\n  }, [filter, isAuthenticated]);\n\n  const fetchOrders = async () => {\n    try {\n      setLoading(true);\n      const params: any = {};\n      if (filter !== 'all') {\n        params.status = filter;\n      }\n      \n      const isSeller = user?.roles?.includes('seller');\n      const isAdmin = user?.roles?.some(role => ['admin', 'super_admin'].includes(role));\n      \n      const endpoint = isAdmin || isSeller ? '/orders' : '/orders/mine';\n      \n      const response = await api.get(endpoint, { params });\n      let fetchedOrders = response.data;\n      \n      if (isSeller && !isAdmin) {\n        fetchedOrders = fetchedOrders.filter((order: Order) => \n          order.product?.seller_id === user?.id\n        );\n      }\n      \n      setOrders(fetchedOrders);\n    } catch (error: any) {\n      if (error.response?.status === 403 || error.response?.status === 401) {\n        alert(t('orders.authRequired'));\n        navigate('/login');\n      } else {\n        console.error('Failed to fetch orders:', error);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    const colors: Record<string, string> = {\n      pending: 'bg-yellow-100 text-yellow-700',\n      seller_confirmed: 'bg-blue-100 text-blue-700',\n      shipped: 'bg-purple-100 text-purple-700',\n      completed: 'bg-green-100 text-green-700',\n      canceled: 'bg-red-100 text-red-700'\n    };\n    return colors[status] || 'bg-gray-100 text-gray-700';\n  };\n\n  const isSeller = user?.roles?.includes('seller');\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold text-charcoal\">{t('orders.title')}</h1>\n      </div>\n\n      <div className=\"bg-white rounded-luxury shadow-luxury p-4 mb-6\">\n        <div className=\"flex gap-2 overflow-x-auto\">\n          <button\n            onClick={() => setFilter('all')}\n            className={`px-4 py-2 rounded-luxury whitespace-nowrap transition ${\n              filter === 'all' ? 'bg-gold text-charcoal' : 'bg-gray-100 text-charcoal-light hover:bg-gray-200'\n            }`}\n          >\n            {t('orders.allOrders')}\n          </button>\n          <button\n            onClick={() => setFilter('pending')}\n            className={`px-4 py-2 rounded-luxury whitespace-nowrap transition ${\n              filter === 'pending' ? 'bg-gold text-charcoal' : 'bg-gray-100 text-charcoal-light hover:bg-gray-200'\n            }`}\n          >\n            {t('orders.statuses.pending')}\n          </button>\n          <button\n            onClick={() => setFilter('seller_confirmed')}\n            className={`px-4 py-2 rounded-luxury whitespace-nowrap transition ${\n              filter === 'seller_confirmed' ? 'bg-gold text-charcoal' : 'bg-gray-100 text-charcoal-light hover:bg-gray-200'\n            }`}\n          >\n            {t('orders.statuses.seller_confirmed')}\n          </button>\n          <button\n            onClick={() => setFilter('shipped')}\n            className={`px-4 py-2 rounded-luxury whitespace-nowrap transition ${\n              filter === 'shipped' ? 'bg-gold text-charcoal' : 'bg-gray-100 text-charcoal-light hover:bg-gray-200'\n            }`}\n          >\n            {t('orders.statuses.shipped')}\n          </button>\n          <button\n            onClick={() => setFilter('completed')}\n            className={`px-4 py-2 rounded-luxury whitespace-nowrap transition ${\n              filter === 'completed' ? 'bg-gold text-charcoal' : 'bg-gray-100 text-charcoal-light hover:bg-gray-200'\n            }`}\n          >\n            {t('orders.statuses.completed')}\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-charcoal-light\">{t('common.loading')}</p>\n        </div>\n      ) : !isAuthenticated ? (\n        <div className=\"bg-white p-12 rounded-luxury shadow-luxury text-center\">\n          <p className=\"text-charcoal-light mb-4\">{t('orders.authRequired')}</p>\n          <button\n            onClick={() => navigate('/login')}\n            className=\"bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-light transition\"\n          >\n            {t('common.login')}\n          </button>\n        </div>\n      ) : orders.length === 0 ? (\n        <div className=\"bg-white p-12 rounded-luxury shadow-luxury text-center\">\n          <p className=\"text-charcoal-light\">{t('orders.noOrders')}</p>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {orders.map(order => {\n            const product = order.product;\n            const productName = product ? (language === 'ar' ? product.name_ar : product.name_en) : t('products.unknownProduct');\n            const imageUrl = product?.image_urls?.[0] || '/placeholder-perfume.jpg';\n\n            return (\n              <div key={order.id} className=\"bg-white rounded-luxury shadow-luxury overflow-hidden\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-start gap-4\">\n                    <img\n                      src={imageUrl}\n                      alt={productName}\n                      className=\"w-20 h-20 object-cover rounded-luxury\"\n                      onError={(e) => {\n                        e.currentTarget.src = '/placeholder-perfume.jpg';\n                      }}\n                    />\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <div>\n                          <h3 className=\"text-lg font-semibold text-charcoal\">{productName}</h3>\n                          <p className=\"text-sm text-charcoal-light\">\n                            {t('orders.orderNumber')}: {order.id}\n                          </p>\n                        </div>\n                        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(order.status)}`}>\n                          {t(`orders.statuses.${order.status}`)}\n                        </span>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\">\n                        <div>\n                          <p className=\"text-xs text-charcoal-light\">{t('orders.quantity')}</p>\n                          <p className=\"font-semibold text-charcoal\">{order.quantity}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-charcoal-light\">{t('orders.total')}</p>\n                          <p className=\"font-semibold text-gold\">{formatPrice(order.total_amount, language)}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-charcoal-light\">{t('orders.paymentMethod')}</p>\n                          <p className=\"font-semibold text-charcoal\">{order.payment_method}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-charcoal-light\">{t('orders.date')}</p>\n                          <p className=\"font-semibold text-charcoal\">\n                            {new Date(order.created_at).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}\n                          </p>\n                        </div>\n                      </div>\n\n                      {isSeller && order.status === 'pending' && (\n                        <div className=\"mt-4 flex gap-2\">\n                          <button\n                            onClick={async () => {\n                              try {\n                                await api.patch(`/orders/${order.id}/status`, { status: 'seller_confirmed' });\n                                fetchOrders();\n                              } catch (error: any) {\n                                alert(error.response?.data?.detail || t('orders.confirmFailed'));\n                              }\n                            }}\n                            className=\"bg-gold text-charcoal px-4 py-2 rounded-luxury text-sm font-semibold hover:bg-gold-light transition\"\n                          >\n                            {t('orders.confirmOrder')}\n                          </button>\n                        </div>\n                      )}\n\n                      {isSeller && order.status === 'seller_confirmed' && (\n                        <div className=\"mt-4 flex gap-2\">\n                          <button\n                            onClick={async () => {\n                              try {\n                                await api.patch(`/orders/${order.id}/status`, { status: 'shipped' });\n                                fetchOrders();\n                              } catch (error: any) {\n                                alert(error.response?.data?.detail || t('orders.shipFailed'));\n                              }\n                            }}\n                            className=\"bg-gold text-charcoal px-4 py-2 rounded-luxury text-sm font-semibold hover:bg-gold-light transition\"\n                          >\n                            {t('orders.markAsShipped')}\n                          </button>\n                        </div>\n                      )}\n\n                      {isSeller && order.status === 'shipped' && (\n                        <div className=\"mt-4 flex gap-2\">\n                          <button\n                            onClick={async () => {\n                              try {\n                                await api.patch(`/orders/${order.id}/status`, { status: 'completed' });\n                                fetchOrders();\n                              } catch (error: any) {\n                                alert(error.response?.data?.detail || t('orders.completeFailed'));\n                              }\n                            }}\n                            className=\"bg-gold text-charcoal px-4 py-2 rounded-luxury text-sm font-semibold hover:bg-gold-light transition\"\n                          >\n                            {t('orders.markAsCompleted')}\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":11098},"frontend/src/store/authStore.ts":{"content":"import { create } from 'zustand';\nimport api from '../lib/api';\n\ninterface User {\n  id: number;\n  email: string;\n  full_name: string;\n  roles: string[];\n}\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  register: (data: { email: string; password: string; full_name: string; phone?: string }) => Promise<void>;\n  logout: () => void;\n  fetchUser: () => Promise<void>;\n}\n\nexport const useAuthStore = create<AuthState>((set) => ({\n  user: null,\n  token: localStorage.getItem('auth_token'),\n  isAuthenticated: !!localStorage.getItem('auth_token'),\n\n  login: async (email: string, password: string) => {\n    const formData = new FormData();\n    formData.append('username', email);\n    formData.append('password', password);\n\n    const response = await api.post('/auth/login', formData, {\n      headers: { 'Content-Type': 'multipart/form-data' }\n    });\n\n    const { access_token } = response.data;\n    localStorage.setItem('auth_token', access_token);\n    set({ token: access_token, isAuthenticated: true });\n\n    const userResponse = await api.get('/auth/me');\n    set({ user: userResponse.data });\n  },\n\n  register: async (data) => {\n    await api.post('/auth/register', data);\n  },\n\n  logout: () => {\n    localStorage.removeItem('auth_token');\n    set({ user: null, token: null, isAuthenticated: false });\n  },\n\n  fetchUser: async () => {\n    try {\n      const response = await api.get('/auth/me');\n      set({ user: response.data, isAuthenticated: true });\n    } catch (error) {\n      set({ user: null, token: null, isAuthenticated: false });\n      localStorage.removeItem('auth_token');\n    }\n  }\n}));\n","size_bytes":1712},"frontend/src/pages/Products.tsx":{"content":"// src/pages/Products.tsx\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocation } from \"react-router-dom\";\nimport api from \"../lib/api\";\nimport { Product } from \"../types\";\nimport ProductCard from \"../components/products/ProductCard\";\nimport ProductFilters from \"../components/products/ProductFilters\";\n\n// تحويل QueryString إلى بارامترات API\nfunction buildApiFilters(search: string) {\n  const qs = new URLSearchParams(search);\n  const params: Record<string, any> = { status: \"published\" };\n\n  const map: Record<string, string> = {\n    search: \"search\",\n    brand: \"brand\",\n    category: \"category\",\n    condition: \"condition\",\n    sort: \"sort\",\n    min: \"min_price\",\n    max: \"max_price\",\n    product_type: \"product_type\",\n  };\n\n  Object.entries(map).forEach(([q, p]) => {\n    const v = qs.get(q);\n    if (v) params[p] = q === \"min\" || q === \"max\" ? Number(v) : v;\n  });\n\n  return params;\n}\n\nfunction SkeletonCard() {\n  return (\n    <article className=\"bg-white rounded-2xl shadow-md overflow-hidden flex flex-col animate-pulse\">\n      <div className=\"bg-sand/60 aspect-[4/5] w-full\" />\n      <div className=\"p-4 flex flex-col flex-1 gap-2\">\n        <div className=\"h-3 w-20 bg-sand/60 rounded\" />\n        <div className=\"h-4 w-3/4 bg-sand/60 rounded\" />\n        <div className=\"h-4 w-28 bg-sand/60 rounded mt-1\" />\n        <div className=\"mt-auto h-10 bg-sand/60 rounded-xl\" />\n      </div>\n    </article>\n  );\n}\n\nexport default function Products() {\n  const { t, i18n } = useTranslation();\n  const dir = i18n.language === \"ar\" ? \"rtl\" : \"ltr\";\n  const location = useLocation();\n\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // الجلب عند تغيّر الفلاتر في URL\n  useEffect(() => {\n    let active = true;\n    (async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const params = buildApiFilters(location.search);\n        const res = await api.get(\"/products\", { params });\n        if (!active) return;\n        const data = Array.isArray(res.data) ? res.data : res.data?.data || [];\n        setProducts(data);\n      } catch (e) {\n        if (!active) return;\n        setError(\"تعذّر جلب المنتجات.\");\n      } finally {\n        if (!active) return;\n        setLoading(false);\n      }\n    })();\n    return () => {\n      active = false;\n    };\n  }, [location.search]);\n\n  const resultsText = useMemo(() => {\n    if (loading) return t(\"common.loading\");\n    const n = products.length;\n    return n === 0 ? (t(\"common.noResults\") || \"لا توجد نتائج\") : `${n} ${t(\"products.countSuffix\") || \"منتج\"}`;\n  }, [loading, products, t]);\n\n  return (\n    <div dir={dir} className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-6\">\n      {/* العنوان + زر التصفية */}\n      <div className=\"flex items-center justify-between gap-3 mb-4\">\n        <h1 className=\"text-2xl md:text-3xl font-extrabold text-charcoal\">\n          {t(\"products.title\") || \"المنتجات\"}\n        </h1>\n        <div className=\"flex items-center gap-2\">\n          <span className=\"hidden sm:inline text-sm text-taupe\">{resultsText}</span>\n          <ProductFilters /> {/* زر التصفية المنسدل */}\n        </div>\n      </div>\n\n      {/* شبكة المنتجات — بدون aside، تملأ العرض */}\n      <div className=\"grid [grid-template-columns:repeat(auto-fill,minmax(220px,1fr))] gap-4 md:gap-6\">\n        {loading &&\n          Array.from({ length: 8 }).map((_, i) => <SkeletonCard key={`sk-${i}`} />)}\n\n        {!loading && error && (\n          <div className=\"col-span-full bg-white rounded-xl p-6 text-center text-charcoal\">{error}</div>\n        )}\n\n        {!loading && !error && products.length === 0 && (\n          <div className=\"col-span-full bg-white rounded-xl p-6 text-center text-charcoal\">\n            {t(\"common.noResults\") || \"لا توجد نتائج مطابقة للفلاتر الحالية.\"}\n          </div>\n        )}\n\n        {!loading && !error &&\n          products.map((p) => <ProductCard key={p.id} product={p} />)}\n      </div>\n    </div>\n  );\n}\n","size_bytes":4272},"frontend/src/components/layout/SellerLayout.tsx":{"content":"import { useState } from 'react';\nimport { Outlet, Link, useLocation } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nexport default function SellerLayout() {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const menuItems = [\n    { path: '/seller/dashboard', label: t('seller.dashboard'), icon: '📊' },\n    { path: '/seller/products', label: t('seller.products'), icon: '🛍️' },\n    { path: '/seller/auctions', label: t('seller.auctions'), icon: '🔨' },\n    { path: '/seller/orders', label: t('seller.orders'), icon: '📦' },\n    { path: '/seller/earnings', label: t('seller.earnings'), icon: '💰' },\n    { path: '/seller/support', label: t('seller.support'), icon: '💬' },\n  ];\n\n  const isActive = (path: string) => location.pathname === path;\n\n  return (\n    <div className=\"min-h-screen bg-sand\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-4 sm:py-6 md:py-8\">\n        <div className=\"flex flex-col lg:flex-row gap-4 sm:gap-6\">\n          {/* Mobile Menu Button */}\n          <button\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            className=\"lg:hidden bg-gold text-charcoal px-4 py-3 rounded-luxury min-h-[44px] font-semibold flex items-center justify-center gap-2\"\n          >\n            <span>{sidebarOpen ? '✕' : '☰'}</span>\n            <span>{t('seller.sellerPanel')}</span>\n          </button>\n\n          {/* Sidebar */}\n          <aside\n            className={`${\n              sidebarOpen ? 'block' : 'hidden'\n            } lg:block w-full lg:w-64 flex-shrink-0`}\n          >\n            <div className=\"bg-white rounded-luxury p-4 sm:p-6 shadow-luxury\">\n              <h2 className=\"text-lg sm:text-xl font-semibold text-charcoal mb-4 sm:mb-6\">{t('seller.sellerPanel')}</h2>\n              <nav className=\"space-y-1 sm:space-y-2\">\n                {menuItems.map((item) => (\n                  <Link\n                    key={item.path}\n                    to={item.path}\n                    onClick={() => setSidebarOpen(false)}\n                    className={`flex items-center gap-3 px-3 sm:px-4 py-3 rounded-luxury transition min-h-[44px] ${\n                      isActive(item.path)\n                        ? 'bg-gold text-charcoal font-semibold'\n                        : 'text-charcoal-light hover:bg-sand hover:text-charcoal'\n                    }`}\n                  >\n                    <span className=\"text-lg sm:text-xl\">{item.icon}</span>\n                    <span className=\"text-sm sm:text-base\">{item.label}</span>\n                  </Link>\n                ))}\n              </nav>\n            </div>\n          </aside>\n\n          {/* Main Content */}\n          <main className=\"flex-1 min-w-0\">\n            <Outlet />\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2884},"frontend/src/pages/SellerEarningsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useUIStore } from '../store/uiStore';\nimport { formatPrice } from '../utils/currency';\n\ninterface EarningsRecord {\n  id: number;\n  date: string;\n  orderId: number;\n  productName: string;\n  productNameAr: string;\n  amount: number;\n  commission: number;\n  netEarnings: number;\n}\n\nexport default function SellerEarningsPage() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const [earnings, setEarnings] = useState<EarningsRecord[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [summary, setSummary] = useState({\n    totalEarnings: 0,\n    totalCommission: 0,\n    netEarnings: 0,\n    averageOrder: 0,\n  });\n\n  useEffect(() => {\n    fetchEarnings();\n  }, []);\n\n  const fetchEarnings = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const mockEarnings: EarningsRecord[] = [\n      { id: 1, date: '2024-10-05', orderId: 1001, productName: 'Chanel No 5', productNameAr: 'شانيل رقم 5', amount: 150.00, commission: 15.00, netEarnings: 135.00 },\n      { id: 2, date: '2024-10-04', orderId: 1002, productName: 'Dior Sauvage', productNameAr: 'ديور سوفاج', amount: 120.00, commission: 12.00, netEarnings: 108.00 },\n      { id: 3, date: '2024-10-03', orderId: 1003, productName: 'Tom Ford Oud Wood', productNameAr: 'توم فورد أود وود', amount: 280.00, commission: 28.00, netEarnings: 252.00 },\n      { id: 4, date: '2024-10-01', orderId: 1004, productName: 'Creed Aventus', productNameAr: 'كريد أفينتوس', amount: 350.00, commission: 35.00, netEarnings: 315.00 },\n      { id: 5, date: '2024-09-30', orderId: 1005, productName: 'Versace Eros', productNameAr: 'فيرساتشي إيروس', amount: 95.00, commission: 9.50, netEarnings: 85.50 },\n      { id: 6, date: '2024-09-28', orderId: 1006, productName: 'YSL Y', productNameAr: 'إيف سان لوران واي', amount: 110.00, commission: 11.00, netEarnings: 99.00 },\n      { id: 7, date: '2024-09-25', orderId: 1007, productName: 'Paco Rabanne Invictus', productNameAr: 'باكو رابان إنفيكتوس', amount: 75.00, commission: 7.50, netEarnings: 67.50 },\n      { id: 8, date: '2024-09-20', orderId: 1008, productName: 'Giorgio Armani Code', productNameAr: 'جورجيو أرماني كود', amount: 85.00, commission: 8.50, netEarnings: 76.50 },\n    ];\n\n    const totalEarnings = mockEarnings.reduce((sum, e) => sum + e.amount, 0);\n    const totalCommission = mockEarnings.reduce((sum, e) => sum + e.commission, 0);\n    const netEarnings = mockEarnings.reduce((sum, e) => sum + e.netEarnings, 0);\n    const averageOrder = totalEarnings / mockEarnings.length;\n\n    setEarnings(mockEarnings);\n    setSummary({ totalEarnings, totalCommission, netEarnings, averageOrder });\n    setLoading(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-taupe\">{t('common.loading')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">💰</span>\n            <h3 className=\"text-sm text-taupe\">{t('seller.totalEarnings')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-charcoal\">{formatPrice(summary.totalEarnings, language)}</p>\n        </div>\n\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">📊</span>\n            <h3 className=\"text-sm text-taupe\">{t('seller.commission')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-red-600\">{formatPrice(summary.totalCommission, language)}</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-gold to-gold-hover rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">✨</span>\n            <h3 className=\"text-sm text-charcoal\">{t('seller.netEarnings')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-charcoal\">{formatPrice(summary.netEarnings, language)}</p>\n        </div>\n\n        <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">📈</span>\n            <h3 className=\"text-sm text-taupe\">{t('seller.averageOrder')}</h3>\n          </div>\n          <p className=\"text-3xl font-bold text-charcoal\">{formatPrice(summary.averageOrder, language)}</p>\n        </div>\n      </div>\n\n      {/* Earnings Table */}\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h2 className=\"text-h3 text-charcoal mb-6\">{t('seller.earningsHistory')}</h2>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.date')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.orderId')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.product')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.saleAmount')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.commission')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('seller.netEarnings')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {earnings.map((record) => (\n                <tr key={record.id} className=\"border-b border-gray-100 hover:bg-sand transition\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(record.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric',\n                    })}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{record.orderId}</td>\n                  <td className=\"px-4 py-4 text-charcoal\">\n                    {i18n.language === 'ar' ? record.productNameAr : record.productName}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">{formatPrice(record.amount, language)}</td>\n                  <td className=\"px-4 py-4 text-red-600\">-{formatPrice(record.commission, language)}</td>\n                  <td className=\"px-4 py-4 text-green-600 font-bold\">{formatPrice(record.netEarnings, language)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Simple Chart Visualization */}\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h3 className=\"text-h3 text-charcoal mb-6\">{t('seller.earningsTrend')}</h3>\n        <div className=\"flex items-end gap-2 h-64\">\n          {earnings.slice(0, 7).reverse().map((record) => {\n            const maxEarning = Math.max(...earnings.map(e => e.netEarnings));\n            const heightPercent = (record.netEarnings / maxEarning) * 100;\n            \n            return (\n              <div key={record.id} className=\"flex-1 flex flex-col items-center gap-2\">\n                <div\n                  className=\"w-full bg-gradient-to-t from-gold to-gold-hover rounded-t-lg transition-all hover:opacity-80 cursor-pointer relative group\"\n                  style={{ height: `${heightPercent}%` }}\n                >\n                  <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-charcoal text-ivory text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap\">\n                    {formatPrice(record.netEarnings, language)}\n                  </div>\n                </div>\n                <span className=\"text-xs text-taupe\">\n                  {new Date(record.date).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                    month: 'short',\n                    day: 'numeric',\n                  })}\n                </span>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8545},"frontend/src/store/wishlistStore.ts":{"content":"import { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\nexport type WishItem = {\n  id: string;\n  name: string;\n  price: number;\n  image?: string | null;\n  brand?: string | null;\n};\n\ntype WishlistState = {\n  items: WishItem[];\n  add: (p: WishItem) => void;\n  remove: (id: string) => void;\n  has: (id: string) => boolean;\n  count: () => number;\n};\n\nexport const useWishlistStore = create<WishlistState>()(\n  persist(\n    (set, get) => ({\n      items: [],\n      add: (p) => {\n        if (!get().items.some((i) => i.id === p.id)) {\n          set({ items: [...get().items, p] });\n        }\n      },\n      remove: (id) => set({ items: get().items.filter((i) => i.id !== id) }),\n      has: (id) => get().items.some((i) => i.id === id),\n      count: () => get().items.length,\n    }),\n    { name: \"wishlist\" }\n  )\n);\n","size_bytes":833},"frontend/src/pages/AdminAdsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface Ad {\n  id: number;\n  title: string;\n  titleAr: string;\n  type: 'hero' | 'sidebar' | 'strip';\n  url: string;\n  active: boolean;\n  created: string;\n}\n\nexport default function AdminAdsPage() {\n  const { t, i18n } = useTranslation();\n  const [ads, setAds] = useState<Ad[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingAd, setEditingAd] = useState<Ad | null>(null);\n  const [formData, setFormData] = useState({ title: '', titleAr: '', type: 'hero' as Ad['type'], url: '', active: true });\n\n  useEffect(() => {\n    fetchAds();\n  }, []);\n\n  const fetchAds = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setAds([\n      { id: 1, title: 'Summer Sale', titleAr: 'تخفيضات الصيف', type: 'hero', url: '/sale', active: true, created: '2024-09-15' },\n      { id: 2, title: 'New Arrivals', titleAr: 'وصل حديثاً', type: 'sidebar', url: '/new', active: true, created: '2024-09-20' },\n      { id: 3, title: 'Premium Brands', titleAr: 'علامات تجارية فاخرة', type: 'strip', url: '/brands', active: false, created: '2024-08-10' },\n    ]);\n    setLoading(false);\n  };\n\n  const handleCreate = () => {\n    setEditingAd(null);\n    setFormData({ title: '', titleAr: '', type: 'hero', url: '', active: true });\n    setShowModal(true);\n  };\n\n  const handleEdit = (ad: Ad) => {\n    setEditingAd(ad);\n    setFormData({ title: ad.title, titleAr: ad.titleAr, type: ad.type, url: ad.url, active: ad.active });\n    setShowModal(true);\n  };\n\n  const handleDelete = (id: number) => {\n    if (window.confirm(t('admin.confirmDelete'))) {\n      setAds(ads.filter(a => a.id !== id));\n    }\n  };\n\n  const handleSubmit = () => {\n    if (editingAd) {\n      setAds(ads.map(a => a.id === editingAd.id ? { ...a, ...formData } : a));\n    } else {\n      const newAd: Ad = { id: Math.max(...ads.map(a => a.id)) + 1, ...formData, created: new Date().toISOString().split('T')[0] };\n      setAds([newAd, ...ads]);\n    }\n    setShowModal(false);\n  };\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'hero': return 'text-purple-600 bg-purple-100';\n      case 'sidebar': return 'text-blue-600 bg-blue-100';\n      case 'strip': return 'text-green-600 bg-green-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-h2 text-charcoal\">{t('admin.ads')}</h1>\n          <button onClick={handleCreate} className=\"bg-gold text-charcoal px-6 py-2 rounded-luxury font-semibold hover:bg-gold-hover\">\n            + {t('admin.createAd')}\n          </button>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.title')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.type')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.url')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.active')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.created')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {ads.map((ad) => (\n                <tr key={ad.id} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{ad.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{i18n.language === 'ar' ? ad.titleAr : ad.title}</td>\n                  <td className=\"px-4 py-4\"><span className={`px-3 py-1 rounded-full text-sm font-semibold ${getTypeColor(ad.type)}`}>{t(`admin.${ad.type}`)}</span></td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{ad.url}</td>\n                  <td className=\"px-4 py-4\">\n                    <span className={`px-3 py-1 rounded-full text-sm font-semibold ${ad.active ? 'text-green-600 bg-green-100' : 'text-gray-600 bg-gray-200'}`}>\n                      {ad.active ? t('admin.active') : t('admin.inactive')}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{new Date(ad.created).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}</td>\n                  <td className=\"px-4 py-4\">\n                    <div className=\"flex gap-2\">\n                      <button onClick={() => handleEdit(ad)} className=\"text-blue-600 hover:text-blue-700 text-sm font-semibold\">{t('admin.edit')}</button>\n                      <button onClick={() => handleDelete(ad.id)} className=\"text-red-600 hover:text-red-700 text-sm font-semibold\">{t('admin.delete')}</button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-luxury p-6 max-w-md w-full\">\n            <h3 className=\"text-h3 text-charcoal mb-4\">{editingAd ? t('admin.editAd') : t('admin.createAd')}</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.titleEn')}</label>\n                <input type=\"text\" value={formData.title} onChange={(e) => setFormData({ ...formData, title: e.target.value })} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n              </div>\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.titleAr')}</label>\n                <input type=\"text\" value={formData.titleAr} onChange={(e) => setFormData({ ...formData, titleAr: e.target.value })} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n              </div>\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.type')}</label>\n                <select value={formData.type} onChange={(e) => setFormData({ ...formData, type: e.target.value as Ad['type'] })} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\">\n                  <option value=\"hero\">{t('admin.hero')}</option>\n                  <option value=\"sidebar\">{t('admin.sidebar')}</option>\n                  <option value=\"strip\">{t('admin.strip')}</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-charcoal font-semibold mb-2\">{t('admin.url')}</label>\n                <input type=\"text\" value={formData.url} onChange={(e) => setFormData({ ...formData, url: e.target.value })} className=\"w-full px-4 py-3 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={formData.active} onChange={(e) => setFormData({ ...formData, active: e.target.checked })} />\n                <label className=\"text-charcoal font-semibold\">{t('admin.active')}</label>\n              </div>\n            </div>\n            <div className=\"flex gap-3 mt-6\">\n              <button onClick={handleSubmit} className=\"flex-1 bg-gold text-charcoal px-6 py-3 rounded-luxury font-semibold hover:bg-gold-hover\">{t('admin.save')}</button>\n              <button onClick={() => setShowModal(false)} className=\"flex-1 bg-sand text-charcoal px-6 py-3 rounded-luxury font-semibold\">{t('common.cancel')}</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":8485},"frontend/src/pages/AdminProductsPage.tsx":{"content":"import { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\ntype AdminStatus = \"all\" | \"pending\" | \"approved\" | \"rejected\" | \"hidden\";\n\ninterface ProductRow {\n  id: number;\n  title: string;\n  seller: string;\n  price: number;\n  status: Exclude<AdminStatus, \"all\">;\n}\n\nconst STATUS_META: Record<\n  Exclude<AdminStatus, \"all\">,\n  { dotClass: string; labelKey: string }\n> = {\n  pending:  { dotClass: \"bg-amber-500\",  labelKey: \"admin.pending\"  },\n  approved: { dotClass: \"bg-emerald-600\",labelKey: \"admin.approved\" },\n  rejected: { dotClass: \"bg-rose-500\",   labelKey: \"admin.rejected\" },\n  hidden:   { dotClass: \"bg-slate-400\",  labelKey: \"admin.hidden\"   },\n};\n\nfunction StatusDot({ s }: { s: Exclude<AdminStatus, \"all\"> }) {\n  return <span className={`inline-block w-2 h-2 rounded-full ${STATUS_META[s].dotClass}`} />;\n}\n\nconst MOCK_ROWS: ProductRow[] = [\n  { id: 1, title: \"توم فورد عود وود\", seller: \"Ahmed Store\",        price: 1280, status: \"approved\" },\n  { id: 2, title: \"بلو دي شانيل أو دو تواليت 100 مل\", seller: \"Luxury Perfumes\", price: 980,  status: \"pending\"  },\n  { id: 3, title: \"ديور سوفاج\", seller: \"Dior Outlet\",              price: 1150, status: \"hidden\"   },\n  { id: 4, title: \"Ex Nihilo Fleur Narcotique EDP\", seller: \"Paris Hub\",        price: 1490, status: \"rejected\" },\n];\n\nexport default function AdminProductsPage() {\n  const { t, i18n } = useTranslation();\n  const [active, setActive] = useState<AdminStatus>(\"all\");\n  const [q, setQ] = useState(\"\");\n\n  const rows = MOCK_ROWS;\n\n  const counts = useMemo(() => {\n    const c = { all: rows.length, pending: 0, approved: 0, rejected: 0, hidden: 0 };\n    rows.forEach(r => { (c as any)[r.status] += 1; });\n    return c;\n  }, [rows]);\n\n  const filtered = useMemo(() => {\n    let list = rows;\n    if (active !== \"all\") list = list.filter(r => r.status === active);\n    if (q.trim()) {\n      const k = q.trim().toLowerCase();\n      list = list.filter(\n        r =>\n          r.title.toLowerCase().includes(k) ||\n          r.seller.toLowerCase().includes(k) ||\n          String(r.id).includes(k)\n      );\n    }\n    return list;\n  }, [rows, active, q]);\n\n  const locale = i18n.language === \"ar\" ? \"ar-SA\" : \"en-US\";\n  const nf = new Intl.NumberFormat(locale);\n\n  return (\n    <div className=\"space-y-3\">\n      {/* العنوان + البحث */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">\n        <h1 className=\"text-lg sm:text-xl font-extrabold text-charcoal\">\n          {t(\"admin.products\")}\n        </h1>\n\n        <div className=\"relative w-full sm:w-72\">\n          <input\n            value={q}\n            onChange={(e) => setQ(e.target.value)}\n            placeholder={t(\"seller.searchProducts\") || \"\"}\n            className=\"w-full rounded-md border border-sand/60 bg-white px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-gold\"\n          />\n          <span className=\"absolute inset-y-0 end-2 flex items-center text-taupe\">⌕</span>\n        </div>\n      </div>\n\n      {/* تبويبات الحالة */}\n      <div className=\"flex flex-wrap items-center gap-1.5\">\n        {([\n          { id: \"all\", label: t(\"admin.all\"), count: counts.all },\n          { id: \"pending\", label: t(\"admin.pending\"), count: counts.pending },\n          { id: \"approved\", label: t(\"admin.approved\"), count: counts.approved },\n          { id: \"rejected\", label: t(\"admin.rejected\"), count: counts.rejected },\n          { id: \"hidden\", label: t(\"admin.hidden\"), count: counts.hidden },\n        ] as { id: AdminStatus; label: string; count: number }[]).map((tab) => (\n          <button\n            key={tab.id}\n            onClick={() => setActive(tab.id)}\n            className={`px-3 py-1.5 rounded-lg text-xs sm:text-sm font-semibold transition\n              ${active === tab.id ? \"bg-gold text-charcoal\" : \"bg-sand text-charcoal hover:bg-sand/80\"}`}\n          >\n            {tab.label}\n            <span className=\"ms-1 text-[10px] sm:text-xs opacity-70\">({tab.count})</span>\n          </button>\n        ))}\n      </div>\n\n      {/* جدول مضغوط بدون تمرير أفقي */}\n      <div className=\"rounded-lg border border-sand/60 bg-white\">\n        <table className=\"w-full table-auto text-xs sm:text-sm\">\n          <thead className=\"bg-sand/60 text-charcoal\">\n            <tr className=\"h-9 sm:h-10\">\n              <th className=\"px-2 py-2 text-start align-top\">{t(\"seller.id\")}</th>\n              <th className=\"px-2 py-2 text-start align-top\">{t(\"seller.title\")}</th>\n              <th className=\"px-2 py-2 text-start align-top\">{t(\"admin.seller\")}</th>\n              <th className=\"px-2 py-2 text-start align-top\">{t(\"seller.price\")}</th>\n              <th className=\"px-2 py-2 text-start align-top\">{t(\"seller.status\")}</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {filtered.map((r) => (\n              <tr key={r.id} className=\"border-t border-sand/40\">\n                {/* رقم: يبقى في سطر واحد لسهولة القراءة */}\n                <td className=\"px-2 py-2 align-top whitespace-nowrap text-taupe\">#{r.id}</td>\n\n                {/* العنوان: يسمح باللفّ ويكسر الكلمات الطويلة */}\n                <td className=\"px-2 py-2 align-top whitespace-normal break-words break-keep leading-5\">\n                  {r.title}\n                </td>\n\n                {/* البائع: أيضًا يسمح باللفّ */}\n                <td className=\"px-2 py-2 align-top whitespace-normal break-words break-keep text-taupe leading-5\">\n                  {r.seller}\n                </td>\n\n                {/* السعر: بسطر واحد */}\n                <td className=\"px-2 py-2 align-top whitespace-nowrap font-bold\">\n                  {nf.format(r.price)}\n                </td>\n\n                {/* الحالة: نقطة + نص صغير */}\n                <td className=\"px-2 py-2 align-top whitespace-nowrap\">\n                  <span className=\"inline-flex items-center gap-1.5\">\n                    <StatusDot s={r.status} />\n                    <span className=\"text-[11px] sm:text-xs text-taupe\">\n                      {t(STATUS_META[r.status].labelKey)}\n                    </span>\n                  </span>\n                </td>\n              </tr>\n            ))}\n\n            {filtered.length === 0 && (\n              <tr>\n                <td colSpan={5} className=\"px-3 py-6 text-center text-taupe\">\n                  {t(\"seller.noProducts\")}\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* تلميح صغير لتحسين القراءة على الشاشات الصغيرة */}\n      <p className=\"text-[11px] sm:text-xs text-taupe/80\">\n        {i18n.language === \"ar\"\n          ? \"تم تصغير النص والسماح بلفّه كي ترى كل المحتوى بدون تمرير أفقي.\"\n          : \"Text is compact and wrapped so you can see everything without horizontal scrolling.\"}\n      </p>\n    </div>\n  );\n}\n","size_bytes":7102},"frontend/src/App.tsx":{"content":"import { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport { useEffect } from 'react';\n\nimport Layout from './components/layout/Layout';\nimport AccountLayout from './components/layout/AccountLayout';\nimport SellerLayout from './components/layout/SellerLayout';\n\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Products from './pages/Products';\nimport ProductDetail from './pages/ProductDetail';\nimport ProductDetailPage from './pages/ProductDetailPage';\nimport NewPerfumes from './pages/NewPerfumes';\nimport UsedPerfumes from './pages/UsedPerfumes';\nimport AuctionsPerfumes from './pages/AuctionsPerfumes';\nimport AuctionDetail from './pages/AuctionDetail';\nimport AuctionDetailPage from './pages/AuctionDetailPage';\nimport Orders from './pages/Orders';\n\nimport AccountOverviewPage from './pages/AccountOverviewPage';\nimport OrdersPage from './pages/OrdersPage';\nimport BidsPage from './pages/BidsPage';\nimport FavoritesPage from './pages/FavoritesPage';\nimport SupportPage from './pages/SupportPage';\n\nimport SellerDashboardPage from './pages/SellerDashboardPage';\nimport SellerProductsPage from './pages/SellerProductsPage';\nimport SellerAuctionsPage from './pages/SellerAuctionsPage';\nimport SellerOrdersPage from './pages/SellerOrdersPage';\nimport SellerEarningsPage from './pages/SellerEarningsPage';\nimport SellerSupportPage from './pages/SellerSupportPage';\n\nimport AdminLayout from './pages/admin/layout/AdminLayout';\nimport AdminDashboardPage from './pages/AdminDashboardPage';\nimport AdminProductsPage from './pages/AdminProductsPage';\nimport AdminAuctionsPage from './pages/AdminAuctionsPage';\nimport AdminOrdersPage from './pages/AdminOrdersPage';\nimport AdminUsersPage from './pages/AdminUsersPage';\nimport AdminAuthRequestsPage from './pages/AdminAuthRequestsPage';\nimport AdminAdsPage from './pages/AdminAdsPage';\nimport AdminSupportPage from './pages/AdminSupportPage';\nimport AdminReportsPage from './pages/AdminReportsPage';\nimport AdminSettingsPage from './pages/AdminSettingsPage';\nimport AdminAuditPage from './pages/AdminAuditPage';\n\n// ✅ صفحات الفوتر الثابتة (صفحة واحدة تُستخدم لكل المسارات)\nimport InfoPage from './pages/static/InfoPage';\n\nimport CartPage from './pages/CartPage';\nimport WishlistPage from './pages/WishlistPage';\nimport CheckoutPage from './pages/CheckoutPage';\nimport OrderSuccessPage from './pages/OrderSuccessPage';\n\nimport BlogIndex from './pages/blog/BlogIndex';\nimport BlogPost from './pages/blog/BlogPost';\nimport CategoryPage from './pages/blog/CategoryPage';\nimport TagPage from './pages/blog/TagPage';\nimport AuthorPage from './pages/blog/AuthorPage';\n\n// ✅ إدارة المدونة داخل لوحة الإدارة\nimport AdminBlogList from './pages/admin/blog/AdminBlogList';\nimport AdminBlogEdit from './pages/admin/blog/AdminBlogEdit';\n\nimport { useAuthStore } from './store/authStore';\nimport { useUIStore } from './store/uiStore';\n\nfunction App() {\n  const { isAuthenticated, fetchUser } = useAuthStore();\n  const { language } = useUIStore();\n\n  useEffect(() => {\n    if (isAuthenticated) fetchUser();\n  }, [isAuthenticated, fetchUser]);\n\n  useEffect(() => {\n    document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';\n    document.documentElement.lang = language;\n  }, [language]);\n\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/\" element={<Layout />}>\n          {/* Public */}\n          <Route index element={<Home />} />\n          <Route path=\"login\" element={<Login />} />\n          <Route path=\"register\" element={<Register />} />\n\n          <Route path=\"new\" element={<NewPerfumes />} />\n          <Route path=\"used\" element={<UsedPerfumes />} />\n          <Route path=\"auctions\" element={<AuctionsPerfumes />} />\n\n          <Route path=\"products\" element={<Products />} />\n          <Route path=\"products/:id\" element={<ProductDetail />} />\n          <Route path=\"p/:id\" element={<ProductDetailPage />} />\n\n          <Route path=\"auctions/:id\" element={<AuctionDetail />} />\n          <Route path=\"auction/:id\" element={<AuctionDetailPage />} />\n\n          <Route path=\"orders\" element={<Orders />} />\n\n          <Route path=\"cart\" element={<CartPage />} />\n          <Route path=\"wishlist\" element={<WishlistPage />} />\n          <Route path=\"checkout\" element={<CheckoutPage />} />\n          <Route path=\"order/success\" element={<OrderSuccessPage />} />\n\n          {/* Blog (public) */}\n          <Route path=\"blog\" element={<BlogIndex />} />\n          <Route path=\"blog/:slug\" element={<BlogPost />} />\n          <Route path=\"blog/category/:category\" element={<CategoryPage />} />\n          <Route path=\"blog/tag/:tag\" element={<TagPage />} />\n          <Route path=\"blog/author/:name\" element={<AuthorPage />} />\n\n          {/* Static pages used by footer links */}\n          <Route path=\"about\" element={<InfoPage />} />\n          <Route path=\"authenticity\" element={<InfoPage />} />\n          <Route path=\"how-it-works\" element={<InfoPage />} />\n          <Route path=\"help\" element={<InfoPage />} />\n          <Route path=\"shipping\" element={<InfoPage />} />\n          <Route path=\"returns\" element={<InfoPage />} />\n          <Route path=\"privacy\" element={<InfoPage />} />\n          <Route path=\"terms\" element={<InfoPage />} />\n          <Route path=\"contact\" element={<InfoPage />} />\n\n          {/* Account */}\n          <Route path=\"account\" element={<AccountLayout />}>\n            <Route index element={<AccountOverviewPage />} />\n            <Route path=\"orders\" element={<OrdersPage />} />\n            <Route path=\"bids\" element={<BidsPage />} />\n            <Route path=\"favorites\" element={<FavoritesPage />} />\n            <Route path=\"support\" element={<SupportPage />} />\n          </Route>\n\n          {/* Seller */}\n          <Route path=\"seller\" element={<SellerLayout />}>\n            <Route path=\"dashboard\" element={<SellerDashboardPage />} />\n            <Route path=\"products\" element={<SellerProductsPage />} />\n            <Route path=\"auctions\" element={<SellerAuctionsPage />} />\n            <Route path=\"orders\" element={<SellerOrdersPage />} />\n            <Route path=\"earnings\" element={<SellerEarningsPage />} />\n            <Route path=\"support\" element={<SellerSupportPage />} />\n          </Route>\n\n          {/* Admin */}\n          <Route path=\"admin\" element={<AdminLayout />}>\n            <Route path=\"dashboard\" element={<AdminDashboardPage />} />\n            <Route path=\"products\" element={<AdminProductsPage />} />\n            <Route path=\"auctions\" element={<AdminAuctionsPage />} />\n            <Route path=\"orders\" element={<AdminOrdersPage />} />\n            <Route path=\"users\" element={<AdminUsersPage />} />\n            <Route path=\"auth-requests\" element={<AdminAuthRequestsPage />} />\n\n            {/* Blog (Admin) */}\n            <Route path=\"blog\" element={<AdminBlogList />} />\n            <Route path=\"blog/new\" element={<AdminBlogEdit mode=\"create\" />} />\n            <Route path=\"blog/:id\" element={<AdminBlogEdit mode=\"edit\" />} />\n\n            <Route path=\"ads\" element={<AdminAdsPage />} />\n            <Route path=\"support\" element={<AdminSupportPage />} />\n            <Route path=\"reports\" element={<AdminReportsPage />} />\n            <Route path=\"settings\" element={<AdminSettingsPage />} />\n            <Route path=\"audit\" element={<AdminAuditPage />} />\n          </Route>\n        </Route>\n      </Routes>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","size_bytes":7556},"frontend/src/pages/Auctions.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport api from '../lib/api';\nimport { Auction } from '../types';\nimport AuctionCard from '../components/auctions/AuctionCard';\n\nexport default function Auctions() {\n  const { t } = useTranslation();\n  const [auctions, setAuctions] = useState<Auction[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchAuctions();\n  }, []);\n\n  const fetchAuctions = async () => {\n    try {\n      const response = await api.get('/auctions', {\n        params: { status: 'running' }\n      });\n      setAuctions(response.data);\n    } catch (error) {\n      console.error('Failed to fetch auctions:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <h1 className=\"text-3xl font-bold text-charcoal mb-6\">{t('auctions.title')}</h1>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-charcoal-light\">{t('common.loading')}</p>\n        </div>\n      ) : auctions.length === 0 ? (\n        <div className=\"bg-white p-12 rounded-luxury shadow-luxury text-center\">\n          <p className=\"text-charcoal-light\">No active auctions at the moment</p>\n        </div>\n      ) : (\n        <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          {auctions.map(auction => (\n            <AuctionCard key={auction.id} auction={auction} />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":1489},"frontend/src/pages/home/HomeSections/Editorial.tsx":{"content":"import { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nconst guides = [\n  {\n    id: 'preowned',\n    title: { ar: 'دليل شراء العطور المستعملة', en: 'How to Buy Pre-Owned Safely' },\n    description: { ar: 'تعرف على أفضل الممارسات لشراء العطور المستعملة بأمان', en: 'Learn best practices for buying pre-owned perfumes safely' },\n    image: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=800&q=80',\n    link: '/help/buying-preowned'\n  },\n  {\n    id: 'bidding',\n    title: { ar: 'دليل المزايدة في المزادات', en: 'Guide to Bidding in Auctions' },\n    description: { ar: 'استراتيجيات وإرشادات للفوز في المزادات الحية', en: 'Strategies and tips for winning live auctions' },\n    image: 'https://images.unsplash.com/photo-1523293182086-7651a899d37f?w=800&q=80',\n    link: '/help/bidding-guide'\n  }\n];\n\nexport default function Editorial() {\n  const { i18n } = useTranslation();\n  const lang = i18n.language as 'ar' | 'en';\n\n  return (\n    <section className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-8 md:py-12\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {guides.map((guide) => (\n          <Link\n            key={guide.id}\n            to={guide.link}\n            className=\"group relative overflow-hidden rounded-lg shadow-luxury hover:shadow-gold transition-all\"\n          >\n            <div className=\"aspect-[16/9] overflow-hidden\">\n              <img\n                src={guide.image}\n                alt={guide.title[lang]}\n                className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"\n                loading=\"lazy\"\n              />\n            </div>\n            <div className=\"absolute inset-0 bg-gradient-to-t from-charcoal via-charcoal/60 to-transparent\" />\n            <div className=\"absolute bottom-0 left-0 right-0 p-6\">\n              <h3 className=\"text-xl md:text-2xl font-bold text-ivory mb-2\">\n                {guide.title[lang]}\n              </h3>\n              <p className=\"text-sm text-sand\">\n                {guide.description[lang]}\n              </p>\n            </div>\n          </Link>\n        ))}\n      </div>\n    </section>\n  );\n}\n","size_bytes":2320},"frontend/src/i18n/config.ts":{"content":"import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport en from './locales/en.json';\nimport ar from './locales/ar.json';\n\ni18n\n  .use(initReactI18next)\n  .init({\n    resources: {\n      en: { translation: en },\n      ar: { translation: ar }\n    },\n    lng: 'ar',\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false\n    }\n  });\n\nexport default i18n;\n","size_bytes":394},"frontend/src/pages/AdminAuctionsPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface Auction {\n  id: number;\n  product: string;\n  productAr: string;\n  endDate: string;\n  currentBid: number;\n  totalBids: number;\n  status: 'running' | 'scheduled' | 'ended';\n}\n\ninterface Bid {\n  id: number;\n  bidder: string;\n  amount: number;\n  time: string;\n}\n\nexport default function AdminAuctionsPage() {\n  const { t, i18n } = useTranslation();\n  const [auctions, setAuctions] = useState<Auction[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [showBidLog, setShowBidLog] = useState(false);\n  const [selectedAuction, setSelectedAuction] = useState<Auction | null>(null);\n  const [bidLog, setBidLog] = useState<Bid[]>([]);\n\n  useEffect(() => {\n    fetchAuctions();\n  }, []);\n\n  const fetchAuctions = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setAuctions([\n      { id: 1, product: 'Tom Ford Oud Wood', productAr: 'توم فورد أود وود', endDate: '2024-10-10T22:00:00Z', currentBid: 385, totalBids: 24, status: 'running' },\n      { id: 2, product: 'Creed Royal Oud', productAr: 'كريد رويال عود', endDate: '2024-10-15T18:00:00Z', currentBid: 0, totalBids: 0, status: 'scheduled' },\n      { id: 3, product: 'Dior Sauvage Elixir', productAr: 'ديور سوفاج إليكسير', endDate: '2024-09-30T20:00:00Z', currentBid: 520, totalBids: 38, status: 'ended' },\n    ]);\n    setLoading(false);\n  };\n\n  const handleViewBids = async (auction: Auction) => {\n    setSelectedAuction(auction);\n    await new Promise(resolve => setTimeout(resolve, 300));\n    setBidLog([\n      { id: 1, bidder: 'Ahmed M.', amount: 385, time: '2024-10-05T10:30:00Z' },\n      { id: 2, bidder: 'Fatima A.', amount: 370, time: '2024-10-05T09:15:00Z' },\n      { id: 3, bidder: 'Omar H.', amount: 350, time: '2024-10-04T22:45:00Z' },\n    ]);\n    setShowBidLog(true);\n  };\n\n  const handleExtend = (id: number) => {\n    if (window.confirm(t('admin.confirmExtend'))) {\n      setAuctions(auctions.map(a => a.id === id ? { ...a, endDate: new Date(new Date(a.endDate).getTime() + 24*60*60*1000).toISOString() } : a));\n    }\n  };\n\n  const handleEnd = (id: number) => {\n    if (window.confirm(t('admin.confirmEnd'))) {\n      setAuctions(auctions.map(a => a.id === id ? { ...a, status: 'ended' as const } : a));\n    }\n  };\n\n  const filtered = filter === 'all' ? auctions : auctions.filter(a => a.status === filter);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'running': return 'text-green-600 bg-green-100';\n      case 'scheduled': return 'text-blue-600 bg-blue-100';\n      case 'ended': return 'text-gray-600 bg-gray-200';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h1 className=\"text-h2 text-charcoal mb-6\">{t('admin.auctions')}</h1>\n\n        <div className=\"flex gap-2 mb-6\">\n          {['all', 'running', 'scheduled', 'ended'].map(s => (\n            <button key={s} onClick={() => setFilter(s)} className={`px-4 py-2 rounded-luxury text-sm font-semibold ${filter === s ? 'bg-gold text-charcoal' : 'bg-sand text-charcoal-light'}`}>\n              {t(`admin.${s}`)}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.product')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.endDate')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.currentBid')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.totalBids')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.status')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.actions')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filtered.map((a) => (\n                <tr key={a.id} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{a.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{i18n.language === 'ar' ? a.productAr : a.product}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{new Date(a.endDate).toLocaleDateString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-semibold\">{a.currentBid > 0 ? `${a.currentBid} ريال` : '-'}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{a.totalBids}</td>\n                  <td className=\"px-4 py-4\"><span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(a.status)}`}>{t(`admin.${a.status}`)}</span></td>\n                  <td className=\"px-4 py-4\">\n                    <div className=\"flex gap-2\">\n                      <button onClick={() => handleViewBids(a)} className=\"text-blue-600 hover:text-blue-700 text-sm font-semibold\">{t('admin.viewBids')}</button>\n                      {a.status === 'running' && (\n                        <>\n                          <button onClick={() => handleExtend(a.id)} className=\"text-gold hover:text-gold-hover text-sm font-semibold\">{t('admin.extend')}</button>\n                          <button onClick={() => handleEnd(a.id)} className=\"text-red-600 hover:text-red-700 text-sm font-semibold\">{t('admin.end')}</button>\n                        </>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {showBidLog && selectedAuction && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-luxury p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\n            <h3 className=\"text-h3 text-charcoal mb-4\">{t('admin.bidLog')} - {i18n.language === 'ar' ? selectedAuction.productAr : selectedAuction.product}</h3>\n            <div className=\"space-y-3\">\n              {bidLog.map((bid) => (\n                <div key={bid.id} className=\"flex justify-between items-center p-4 border border-gray-200 rounded-luxury\">\n                  <div>\n                    <p className=\"text-charcoal font-medium\">{bid.bidder}</p>\n                    <p className=\"text-sm text-taupe\">{new Date(bid.time).toLocaleString(i18n.language === 'ar' ? 'ar-EG' : 'en-US')}</p>\n                  </div>\n                  <p className=\"text-xl font-bold text-gold\">{bid.amount} ريال</p>\n                </div>\n              ))}\n            </div>\n            <button onClick={() => setShowBidLog(false)} className=\"mt-4 w-full bg-sand text-charcoal px-6 py-3 rounded-luxury font-semibold\">{t('common.close')}</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":7448},"backend/app/models/product.py":{"content":"from sqlalchemy import Column, Integer, String, Float, DateTime, Boolean, ForeignKey, Text, Enum as SQLEnum\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nimport enum\nfrom ..core.database import Base\n\n\nclass ProductCondition(str, enum.Enum):\n    new = \"new\"\n    used = \"used\"\n\n\nclass ProductType(str, enum.Enum):\n    listing = \"listing\"\n    auction = \"auction\"\n\n\nclass ProductStatus(str, enum.Enum):\n    pending = \"pending\"\n    published = \"published\"\n    sold = \"sold\"\n    hidden = \"hidden\"\n    ended = \"ended\"\n\n\nclass Product(Base):\n    __tablename__ = \"products\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    seller_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    title = Column(String, nullable=False)\n    brand = Column(String, index=True)\n    category = Column(String, index=True)\n    size_ml = Column(Integer)\n    concentration = Column(String)\n    condition = Column(SQLEnum(ProductCondition), nullable=False)\n    description = Column(Text)\n    type = Column(SQLEnum(ProductType), default=ProductType.listing)\n    price = Column(Float)\n    status = Column(SQLEnum(ProductStatus), default=ProductStatus.pending, index=True)\n    status_reason = Column(Text)\n    allow_auth_check = Column(Boolean, default=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    seller = relationship(\"User\", back_populates=\"products\", foreign_keys=[seller_id])\n    images = relationship(\"ProductImage\", back_populates=\"product\", cascade=\"all, delete-orphan\")\n    auction = relationship(\"Auction\", back_populates=\"product\", uselist=False)\n    orders = relationship(\"Order\", back_populates=\"product\")\n    auth_requests = relationship(\"AuthRequest\", back_populates=\"product\")\n\n\nclass ProductImage(Base):\n    __tablename__ = \"product_images\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    product_id = Column(Integer, ForeignKey(\"products.id\", ondelete=\"CASCADE\"), nullable=False)\n    url = Column(String, nullable=False)\n    sort_order = Column(Integer, default=0)\n    \n    product = relationship(\"Product\", back_populates=\"images\")\n","size_bytes":2155},"backend/app/schemas/auction.py":{"content":"from pydantic import BaseModel\nfrom typing import Optional\nfrom datetime import datetime\n\n\nclass BidCreate(BaseModel):\n    amount: float\n\n\nclass BidResponse(BaseModel):\n    id: int\n    auction_id: int\n    user_id: int\n    amount: float\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\n\nclass AuctionCreate(BaseModel):\n    product_id: int\n    start_price: float\n    min_increment: float\n    start_at: datetime\n    end_at: datetime\n\n\nclass AuctionResponse(BaseModel):\n    id: int\n    product_id: int\n    start_price: float\n    min_increment: float\n    start_at: datetime\n    end_at: datetime\n    current_price: float\n    status: str\n    end_extended_count: int\n\n    class Config:\n        from_attributes = True\n\n\nclass AuctionWithBids(AuctionResponse):\n    bids: list[BidResponse] = []\n","size_bytes":811},"frontend/src/pages/Login.tsx":{"content":"import { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuthStore } from '../store/authStore';\nimport { useState } from 'react';\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6)\n});\n\ntype LoginForm = z.infer<typeof loginSchema>;\n\nexport default function Login() {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { login } = useAuthStore();\n  const [error, setError] = useState('');\n\n  const { register, handleSubmit, formState: { errors, isSubmitting } } = useForm<LoginForm>({\n    resolver: zodResolver(loginSchema)\n  });\n\n  const onSubmit = async (data: LoginForm) => {\n    try {\n      setError('');\n      await login(data.email, data.password);\n      navigate('/');\n    } catch (err: any) {\n      const detail = err.response?.data?.detail;\n      if (Array.isArray(detail)) {\n        setError(detail.map((e: any) => e.msg).join(', '));\n      } else if (typeof detail === 'string') {\n        setError(detail);\n      } else {\n        setError(t('common.error'));\n      }\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto mt-16\">\n      <div className=\"bg-white p-8 rounded-luxury shadow-luxury-lg\">\n        <h2 className=\"text-3xl font-bold text-charcoal mb-6 text-center\">\n          {t('auth.loginTitle')}\n        </h2>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-luxury mb-4\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-charcoal font-medium mb-2\">\n              {t('auth.email')}\n            </label>\n            <input\n              {...register('email')}\n              type=\"email\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-luxury focus:ring-2 focus:ring-gold focus:border-transparent\"\n            />\n            {errors.email && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.email.message}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-charcoal font-medium mb-2\">\n              {t('auth.password')}\n            </label>\n            <input\n              {...register('password')}\n              type=\"password\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-luxury focus:ring-2 focus:ring-gold focus:border-transparent\"\n            />\n            {errors.password && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.password.message}</p>\n            )}\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"w-full bg-gold text-charcoal font-semibold py-3 rounded-luxury hover:bg-gold-light transition disabled:opacity-50\"\n          >\n            {isSubmitting ? t('common.loading') : t('common.login')}\n          </button>\n        </form>\n\n        <p className=\"text-center mt-6 text-charcoal-light\">\n          {t('auth.noAccount')}{' '}\n          <Link to=\"/register\" className=\"text-gold hover:underline\">\n            {t('common.register')}\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3375},"frontend/src/pages/AdminAuditPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface AuditLog {\n  id: number;\n  user: string;\n  action: string;\n  actionAr: string;\n  entity: string;\n  entityId: number;\n  timestamp: string;\n  ipAddress: string;\n}\n\nexport default function AdminAuditPage() {\n  const { t, i18n } = useTranslation();\n  const [logs, setLogs] = useState<AuditLog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filterAction, setFilterAction] = useState('all');\n  const [filterUser, setFilterUser] = useState('');\n\n  useEffect(() => {\n    fetchLogs();\n  }, []);\n\n  const fetchLogs = async () => {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    setLogs([\n      { id: 1, user: 'Admin Sarah', action: 'Approved product', actionAr: 'تمت الموافقة على المنتج', entity: 'Product', entityId: 123, timestamp: '2024-10-05T14:30:00Z', ipAddress: '192.168.1.100' },\n      { id: 2, user: 'Admin John', action: 'Suspended user', actionAr: 'تم إيقاف المستخدم', entity: 'User', entityId: 456, timestamp: '2024-10-05T13:15:00Z', ipAddress: '192.168.1.101' },\n      { id: 3, user: 'Moderator Ali', action: 'Rejected product', actionAr: 'تم رفض المنتج', entity: 'Product', entityId: 789, timestamp: '2024-10-05T12:00:00Z', ipAddress: '192.168.1.102' },\n      { id: 4, user: 'Admin Sarah', action: 'Changed settings', actionAr: 'تم تغيير الإعدادات', entity: 'Settings', entityId: 1, timestamp: '2024-10-05T11:30:00Z', ipAddress: '192.168.1.100' },\n      { id: 5, user: 'Admin John', action: 'Ended auction', actionAr: 'تم إنهاء المزاد', entity: 'Auction', entityId: 12, timestamp: '2024-10-05T10:45:00Z', ipAddress: '192.168.1.101' },\n      { id: 6, user: 'Admin Sarah', action: 'Deleted ad', actionAr: 'تم حذف الإعلان', entity: 'Ad', entityId: 34, timestamp: '2024-10-04T16:20:00Z', ipAddress: '192.168.1.100' },\n      { id: 7, user: 'Moderator Fatima', action: 'Closed support ticket', actionAr: 'تم إغلاق تذكرة الدعم', entity: 'Ticket', entityId: 567, timestamp: '2024-10-04T15:00:00Z', ipAddress: '192.168.1.103' },\n    ]);\n    setLoading(false);\n  };\n\n  const filteredLogs = logs.filter(log => {\n    const matchesAction = filterAction === 'all' || log.action.toLowerCase().includes(filterAction.toLowerCase());\n    const matchesUser = !filterUser || log.user.toLowerCase().includes(filterUser.toLowerCase());\n    return matchesAction && matchesUser;\n  });\n\n  if (loading) {\n    return <div className=\"text-center py-12\"><p className=\"text-taupe\">{t('common.loading')}</p></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-luxury p-6 shadow-luxury\">\n        <h1 className=\"text-h2 text-charcoal mb-6\">{t('admin.auditLog')}</h1>\n\n        <div className=\"flex gap-4 mb-6\">\n          <select value={filterAction} onChange={(e) => setFilterAction(e.target.value)} className=\"px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\">\n            <option value=\"all\">{t('admin.allActions')}</option>\n            <option value=\"approved\">{t('admin.approvals')}</option>\n            <option value=\"rejected\">{t('admin.rejections')}</option>\n            <option value=\"suspended\">{t('admin.suspensions')}</option>\n            <option value=\"deleted\">{t('admin.deletions')}</option>\n          </select>\n          <input type=\"text\" value={filterUser} onChange={(e) => setFilterUser(e.target.value)} placeholder={t('admin.filterByUser')} className=\"flex-1 px-4 py-2 rounded-luxury border border-gray-300 focus:border-gold focus:outline-none\" />\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.id')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.user')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.action')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.entity')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.entityId')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.timestamp')}</th>\n                <th className=\"text-right px-4 py-3 text-charcoal font-semibold\">{t('admin.ipAddress')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredLogs.map((log) => (\n                <tr key={log.id} className=\"border-b border-gray-100 hover:bg-sand\">\n                  <td className=\"px-4 py-4 text-charcoal-light\">{log.id}</td>\n                  <td className=\"px-4 py-4 text-charcoal font-medium\">{log.user}</td>\n                  <td className=\"px-4 py-4 text-charcoal\">{i18n.language === 'ar' ? log.actionAr : log.action}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{log.entity}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">{log.entityId}</td>\n                  <td className=\"px-4 py-4 text-charcoal-light\">\n                    {new Date(log.timestamp).toLocaleString(i18n.language === 'ar' ? 'ar-EG' : 'en-US', {\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit',\n                    })}\n                  </td>\n                  <td className=\"px-4 py-4 text-charcoal-light font-mono text-sm\">{log.ipAddress}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredLogs.length === 0 && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-taupe\">{t('admin.noLogsFound')}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":6033},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"alembic>=1.16.5\",\n    \"bcrypt>=5.0.0\",\n    \"fastapi>=0.118.0\",\n    \"pillow>=11.3.0\",\n    \"psycopg2-binary>=2.9.10\",\n    \"pydantic-settings>=2.11.0\",\n    \"pydantic[email]>=2.11.10\",\n    \"pyjwt>=2.10.1\",\n    \"pytest>=8.4.2\",\n    \"python-dotenv>=1.1.1\",\n    \"python-multipart>=0.0.20\",\n    \"sqlalchemy>=2.0.43\",\n    \"uvicorn[standard]>=0.37.0\",\n    \"websockets>=15.0.1\",\n]\n","size_bytes":517},"backend/app/models/notification.py":{"content":"from sqlalchemy import Column, Integer, String, DateTime, ForeignKey, Boolean, Text\nfrom sqlalchemy.sql import func\nfrom sqlalchemy.orm import relationship\nfrom ..core.database import Base\n\n\nclass Notification(Base):\n    __tablename__ = \"notifications\"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    title = Column(String, nullable=False)\n    body = Column(Text, nullable=False)\n    is_read = Column(Boolean, default=False, index=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)\n    \n    user = relationship(\"User\", back_populates=\"notifications\")\n","size_bytes":692},"frontend/src/hooks/useCountdown.ts":{"content":"import { useState, useEffect } from 'react';\n\nexport type CountdownStatus = 'scheduled' | 'running' | 'ended';\n\ninterface CountdownResult {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n  status: CountdownStatus;\n  totalSeconds: number;\n}\n\ninterface UseCountdownProps {\n  startAt?: string | number;\n  endAt: string | number;\n}\n\nexport function useCountdown({ startAt, endAt }: UseCountdownProps): CountdownResult {\n  const [countdown, setCountdown] = useState<CountdownResult>({\n    days: 0,\n    hours: 0,\n    minutes: 0,\n    seconds: 0,\n    status: 'running',\n    totalSeconds: 0\n  });\n\n  useEffect(() => {\n    const calculateCountdown = () => {\n      const now = Date.now();\n      const endTime = typeof endAt === 'string' ? new Date(endAt).getTime() : endAt;\n      const startTime = startAt ? (typeof startAt === 'string' ? new Date(startAt).getTime() : startAt) : 0;\n\n      let status: CountdownStatus = 'running';\n      let diff = 0;\n\n      if (startTime && now < startTime) {\n        status = 'scheduled';\n        diff = startTime - now;\n      } else if (now >= endTime) {\n        status = 'ended';\n        diff = 0;\n      } else {\n        status = 'running';\n        diff = endTime - now;\n      }\n\n      const totalSeconds = Math.floor(diff / 1000);\n      const days = Math.floor(totalSeconds / (24 * 3600));\n      const hours = Math.floor((totalSeconds % (24 * 3600)) / 3600);\n      const minutes = Math.floor((totalSeconds % 3600) / 60);\n      const seconds = totalSeconds % 60;\n\n      setCountdown({\n        days,\n        hours,\n        minutes,\n        seconds,\n        status,\n        totalSeconds\n      });\n    };\n\n    calculateCountdown();\n    const interval = setInterval(calculateCountdown, 1000);\n\n    return () => clearInterval(interval);\n  }, [startAt, endAt]);\n\n  return countdown;\n}\n","size_bytes":1829},"frontend/src/pages/blog/BlogPost.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Helmet } from 'react-helmet-async';\nimport { useUIStore } from '../../store/uiStore';\nimport { getPostBySlug, getRelated, extractToc, type BlogPost as BlogPostType } from '../../services/blogService';\n\nexport default function BlogPost() {\n  const { slug } = useParams<{ slug: string }>();\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n  const navigate = useNavigate();\n  const [post, setPost] = useState<BlogPostType | null>(null);\n  const [relatedPosts, setRelatedPosts] = useState<BlogPostType[]>([]);\n  const [toc, setToc] = useState<{ id: string; text: string; level: number }[]>([]);\n  const [copySuccess, setCopySuccess] = useState(false);\n\n  useEffect(() => {\n    if (!slug) return;\n\n    const foundPost = getPostBySlug(slug, language);\n    if (!foundPost) {\n      navigate('/blog');\n      return;\n    }\n\n    setPost(foundPost);\n    setRelatedPosts(getRelated(slug, language, 3));\n    setToc(extractToc(foundPost.html));\n  }, [slug, language, navigate]);\n\n  if (!post) {\n    return (\n      <div className=\"min-h-screen bg-sand flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-charcoal mb-4\">{t('blog.notFound')}</h2>\n          <Link to=\"/blog\" className=\"text-gold hover:underline\">\n            {t('blog.back')}\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const pageTitle = post.title;\n  const pageDesc = post.description;\n  const canonicalUrl = `${window.location.origin}/blog/${post.slug}`;\n  const imageUrl = post.cover.startsWith('http') ? post.cover : `${window.location.origin}${post.cover}`;\n  const alternateLang = language === 'ar' ? 'en' : 'ar';\n  const alternateUrl = `${window.location.origin}/blog/${post.slug}?lang=${alternateLang}`;\n\n  const articleSchema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"Article\",\n    \"headline\": post.title,\n    \"description\": post.description,\n    \"image\": imageUrl,\n    \"author\": {\n      \"@type\": \"Person\",\n      \"name\": post.author\n    },\n    \"publisher\": {\n      \"@type\": \"Organization\",\n      \"name\": t('common.siteName'),\n      \"logo\": {\n        \"@type\": \"ImageObject\",\n        \"url\": `${window.location.origin}/logo.png`\n      }\n    },\n    \"datePublished\": post.date,\n    \"dateModified\": post.date,\n    \"mainEntityOfPage\": {\n      \"@type\": \"WebPage\",\n      \"@id\": canonicalUrl\n    }\n  };\n\n  const breadcrumbSchema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"BreadcrumbList\",\n    \"itemListElement\": [\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 1,\n        \"name\": t('nav.home'),\n        \"item\": window.location.origin\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 2,\n        \"name\": t('blog.title'),\n        \"item\": `${window.location.origin}/blog`\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 3,\n        \"name\": post.title,\n        \"item\": canonicalUrl\n      }\n    ]\n  };\n\n  const handleShare = (platform: string) => {\n    const url = encodeURIComponent(canonicalUrl);\n    const text = encodeURIComponent(post.title);\n\n    switch (platform) {\n      case 'whatsapp':\n        window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');\n        break;\n      case 'twitter':\n        window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');\n        break;\n      case 'copy':\n        navigator.clipboard.writeText(canonicalUrl);\n        setCopySuccess(true);\n        setTimeout(() => setCopySuccess(false), 2000);\n        break;\n    }\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>{pageTitle} | {t('common.siteName')}</title>\n        <meta name=\"description\" content={pageDesc} />\n        <link rel=\"canonical\" href={canonicalUrl} />\n        <link rel=\"alternate\" hrefLang=\"ar\" href={`${window.location.origin}/blog/${post.slug}?lang=ar`} />\n        <link rel=\"alternate\" hrefLang=\"en\" href={`${window.location.origin}/blog/${post.slug}?lang=en`} />\n        <link rel=\"alternate\" hrefLang=\"x-default\" href={`${window.location.origin}/blog/${post.slug}`} />\n        \n        {/* Open Graph */}\n        <meta property=\"og:title\" content={pageTitle} />\n        <meta property=\"og:description\" content={pageDesc} />\n        <meta property=\"og:url\" content={canonicalUrl} />\n        <meta property=\"og:type\" content=\"article\" />\n        <meta property=\"og:image\" content={imageUrl} />\n        <meta property=\"article:published_time\" content={post.date} />\n        <meta property=\"article:author\" content={post.author} />\n        <meta property=\"article:section\" content={post.category} />\n        {post.tags.map(tag => (\n          <meta key={tag} property=\"article:tag\" content={tag} />\n        ))}\n\n        {/* Twitter Card */}\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content={pageTitle} />\n        <meta name=\"twitter:description\" content={pageDesc} />\n        <meta name=\"twitter:image\" content={imageUrl} />\n\n        {/* JSON-LD */}\n        <script type=\"application/ld+json\">\n          {JSON.stringify(articleSchema)}\n        </script>\n        <script type=\"application/ld+json\">\n          {JSON.stringify(breadcrumbSchema)}\n        </script>\n      </Helmet>\n\n      <div className=\"min-h-screen bg-sand py-16\">\n        <div className=\"container mx-auto px-4\">\n          {/* Breadcrumbs */}\n          <nav className=\"text-sm text-taupe mb-8 flex items-center gap-2\">\n            <Link to=\"/\" className=\"hover:text-gold\">{t('nav.home')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <Link to=\"/blog\" className=\"hover:text-gold\">{t('blog.title')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <span className=\"text-charcoal\">{post.title}</span>\n          </nav>\n\n          <div className=\"grid lg:grid-cols-12 gap-8\">\n            {/* Main Content */}\n            <article className=\"lg:col-span-8\">\n              {/* Header */}\n              <header className=\"mb-8\">\n                <div className=\"flex flex-wrap items-center gap-2 text-sm text-taupe mb-4\">\n                  <span className=\"bg-gold text-charcoal px-3 py-1 rounded-full font-semibold\">\n                    {post.category}\n                  </span>\n                  <span>{new Date(post.date).toLocaleDateString(\n                    i18n.language === 'ar' ? 'ar-SA' : 'en-US',\n                    { year: 'numeric', month: 'long', day: 'numeric' }\n                  )}</span>\n                  <span>•</span>\n                  <span>{post.readingTime} {t('blog.minRead')}</span>\n                </div>\n\n                <h1 className=\"text-4xl md:text-5xl font-bold text-charcoal mb-4\">\n                  {post.title}\n                </h1>\n\n                <p className=\"text-xl text-taupe mb-6\">\n                  {post.description}\n                </p>\n\n                <div className=\"flex items-center gap-4 text-sm\">\n                  <span className=\"text-taupe\">{t('blog.by')} {post.author}</span>\n                </div>\n              </header>\n\n              {/* Cover Image */}\n              <div className=\"aspect-video rounded-luxury overflow-hidden mb-8 bg-ivory\">\n                <img\n                  src={post.cover}\n                  alt={post.title}\n                  loading=\"lazy\"\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.src = '/images/blog/placeholder.jpg';\n                  }}\n                />\n              </div>\n\n              {/* Content */}\n              <div\n                className={`prose prose-lg max-w-none mb-12 ${i18n.language === 'ar' ? 'prose-rtl' : ''}`}\n                dangerouslySetInnerHTML={{ __html: post.html }}\n                style={{\n                  direction: i18n.language === 'ar' ? 'rtl' : 'ltr',\n                }}\n              />\n\n              {/* Tags */}\n              {post.tags.length > 0 && (\n                <div className=\"flex flex-wrap items-center gap-2 mb-8\">\n                  <span className=\"text-taupe font-semibold\">{t('blog.tags')}:</span>\n                  {post.tags.map(tag => (\n                    <Link\n                      key={tag}\n                      to={`/blog/tag/${tag}`}\n                      className=\"px-3 py-1 bg-ivory text-taupe rounded-full text-sm hover:bg-gold hover:text-charcoal transition\"\n                    >\n                      #{tag}\n                    </Link>\n                  ))}\n                </div>\n              )}\n\n              {/* Share Buttons */}\n              <div className=\"border-t border-charcoal-light pt-8\">\n                <p className=\"text-taupe font-semibold mb-4\">{t('blog.share')}:</p>\n                <div className=\"flex gap-4\">\n                  <button\n                    onClick={() => handleShare('copy')}\n                    className=\"px-6 py-3 bg-ivory hover:bg-charcoal-light transition rounded-lg flex items-center gap-2\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                    </svg>\n                    {copySuccess ? t('blog.copied') : t('blog.copyLink')}\n                  </button>\n\n                  <button\n                    onClick={() => handleShare('whatsapp')}\n                    className=\"px-6 py-3 bg-green-500 hover:bg-green-600 text-white transition rounded-lg\"\n                  >\n                    WhatsApp\n                  </button>\n\n                  <button\n                    onClick={() => handleShare('twitter')}\n                    className=\"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white transition rounded-lg\"\n                  >\n                    Twitter\n                  </button>\n                </div>\n              </div>\n            </article>\n\n            {/* Sidebar */}\n            <aside className=\"lg:col-span-4\">\n              {/* TOC */}\n              {toc.length > 0 && (\n                <div className=\"bg-ivory rounded-luxury p-6 mb-8 sticky top-24\">\n                  <h3 className=\"text-xl font-bold text-charcoal mb-4\">\n                    {t('blog.toc')}\n                  </h3>\n                  <nav>\n                    <ul className=\"space-y-2\">\n                      {toc.map(item => (\n                        <li\n                          key={item.id}\n                          className={item.level === 3 ? 'ms-4' : ''}\n                        >\n                          <a\n                            href={`#${item.id}`}\n                            className=\"text-taupe hover:text-gold transition block py-1\"\n                          >\n                            {item.text}\n                          </a>\n                        </li>\n                      ))}\n                    </ul>\n                  </nav>\n                </div>\n              )}\n            </aside>\n          </div>\n\n          {/* Related Posts */}\n          {relatedPosts.length > 0 && (\n            <section className=\"mt-16\">\n              <h2 className=\"text-3xl font-bold text-charcoal mb-8\">\n                {t('blog.related')}\n              </h2>\n              <div className=\"grid md:grid-cols-3 gap-8\">\n                {relatedPosts.map(related => (\n                  <Link\n                    key={related.slug}\n                    to={`/blog/${related.slug}`}\n                    className=\"group bg-ivory rounded-luxury overflow-hidden shadow-sm hover:shadow-luxury transition\"\n                  >\n                    <div className=\"aspect-video overflow-hidden bg-sand\">\n                      <img\n                        src={related.cover}\n                        alt={related.title}\n                        loading=\"lazy\"\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                        onError={(e) => {\n                          e.currentTarget.src = '/images/blog/placeholder.jpg';\n                        }}\n                      />\n                    </div>\n                    <div className=\"p-4\">\n                      <h3 className=\"font-bold text-charcoal mb-2 group-hover:text-gold transition line-clamp-2\">\n                        {related.title}\n                      </h3>\n                      <p className=\"text-sm text-taupe line-clamp-2\">\n                        {related.description}\n                      </p>\n                    </div>\n                  </Link>\n                ))}\n              </div>\n            </section>\n          )}\n\n          {/* Back to Blog */}\n          <div className=\"mt-12 text-center\">\n            <Link\n              to=\"/blog\"\n              className=\"inline-flex items-center gap-2 px-8 py-4 bg-gold text-charcoal rounded-luxury hover:bg-gold-hover transition font-semibold\"\n            >\n              <span>{i18n.language === 'ar' ? '→' : '←'}</span>\n              {t('blog.back')}\n            </Link>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":13371},"frontend/src/content/blog/2025-01-05-seasonal-fragrances.ar.md":{"content":"---\nslug: seasonal-fragrances\ntitle: دليل اختيار العطور حسب الفصول\ndescription: اكتشف كيف تختار العطر المثالي لكل موسم وتتألق طوال العام\ncover: /images/blog/seasonal-perfumes.jpg\nauthor: عالم العطور\ncategory: guides\ntags: [\"عطور موسمية\", \"نصائح\", \"اختيار العطر\"]\ndate: 2025-01-05\nlang: ar\nstatus: published\n---\n\n## لماذا نغير العطور حسب الفصول؟\n\nدرجة الحرارة والرطوبة تؤثر بشكل كبير على كيفية تطور العطر على البشرة. اختيار العطر المناسب للموسم يضمن أفضل أداء وثبات.\n\n## عطور الصيف\n\n### الخصائص المثالية\n\n- خفيفة ومنعشة\n- حمضيات وفواكه\n- نوتات مائية\n- تركيز منخفض (EDT, EDC)\n\n### أفضل الاختيارات\n\n1. **Acqua di Gio** - Giorgio Armani\n2. **Light Blue** - Dolce & Gabbana\n3. **Neroli Portofino** - Tom Ford\n\n## عطور الشتاء\n\n### الخصائص المثالية\n\n- دافئة وغنية\n- توابل وخشب\n- عنبر وفانيليا\n- تركيز عالٍ (EDP, Parfum)\n\n### أفضل الاختيارات\n\n1. **Oud Wood** - Tom Ford\n2. **Interlude Man** - Amouage\n3. **La Nuit de L'Homme** - YSL\n\n## عطور الربيع\n\n### الخصائص المثالية\n\n- زهرية طازجة\n- خضراء وعشبية\n- متوازنة وخفيفة\n- نوتات الأزهار البيضاء\n\n### أفضل الاختيارات\n\n1. **Flowerbomb** - Viktor & Rolf\n2. **Mon Guerlain** - Guerlain\n3. **J'adore** - Dior\n\n## عطور الخريف\n\n### الخصائص المثالية\n\n- دافئة معتدلة\n- توابل خفيفة\n- خشب وجلد\n- نوتات الفواكه المجففة\n\n### أفضل الاختيارات\n\n1. **Spicebomb** - Viktor & Rolf\n2. **1 Million** - Paco Rabanne\n3. **Tobacco Vanille** - Tom Ford\n\n## نصائح عامة\n\n1. **طبقات العطر**: استخدم عطر أخف في النهار وأقوى في المساء\n2. **المناسبات**: عطور العمل تختلف عن المناسبات الاجتماعية\n3. **الثبات**: العطور الشتوية تدوم أطول من الصيفية\n4. **التجديد**: جدد عطرك كل 4-6 ساعات في الصيف\n\nتذكر: لا توجد قواعد صارمة، الأهم أن تشعر بالراحة والثقة مع عطرك!\n","size_bytes":2447},"frontend/src/content/blog/2025-01-10-intro-to-niche-perfumes.en.md":{"content":"---\nslug: intro-to-niche-perfumes\ntitle: Your Complete Guide to Niche Perfumes\ndescription: Discover the world of luxury niche fragrances and learn how to choose the perfect scent that matches your unique personality and style\ncover: /images/blog/niche-perfumes.jpg\nauthor: Aalam Al-Otoor\ncategory: guides\ntags: [\"luxury perfumes\", \"tips\", \"buying guide\"]\ndate: 2025-01-10\nlang: en\nstatus: published\n---\n\n## What Are Niche Perfumes?\n\nNiche perfumes are luxury fragrances produced in limited quantities by independent perfume houses. Unlike commercial perfumes, niche fragrances focus on quality and uniqueness rather than mass production.\n\n### Why Choose Niche Perfumes?\n\n1. **Uniqueness**: Get a distinctive scent that's not worn by everyone\n2. **High Quality**: Premium natural ingredients and complex compositions\n3. **Long-lasting**: High concentration that lasts for hours\n4. **Artistic Story**: Each fragrance has its own story and identity\n\n## How to Choose the Right Perfume?\n\n### 1. Identify Your Preferred Fragrance Family\n\n- **Oriental Scents**: Oud, amber, musk, incense\n- **Floral Scents**: Jasmine, rose, lily\n- **Citrus Scents**: Orange, lemon, grapefruit\n- **Woody Scents**: Sandalwood, cedar, patchouli\n\n### 2. Test the Perfume Properly\n\n- Spray on pulse points (wrist, neck)\n- Wait 30 minutes for middle notes to develop\n- Continue evaluation for 6-8 hours\n\n### 3. Invest in Quality\n\nNiche perfumes may be pricier, but they're a long-lasting investment due to their longevity and superior quality.\n\n## Top Niche Perfume Houses\n\n- **Creed**: Established in 1760\n- **Maison Francis Kurkdjian**: Modern perfume artistry\n- **Byredo**: Scandinavian minimalism\n- **Amouage**: Omani luxury\n\n## Tips for Preserving Your Perfume\n\n1. Store in a cool, dark place\n2. Avoid heat or direct sunlight exposure\n3. Close the bottle tightly after use\n4. Use within 2-3 years of opening\n\n---\n\nReady to start your journey into the world of niche perfumes? Browse our [exclusive collection](/new) and discover your perfect scent today!\n","size_bytes":2032},"frontend/src/pages/blog/BlogIndex.tsx":{"content":"import { useState, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Helmet } from 'react-helmet-async';\nimport { useUIStore } from '../../store/uiStore';\nimport { getPostsByLang, getAllCategories, getAllTags } from '../../services/blogService';\n\nconst POSTS_PER_PAGE = 12;\n\n/** خرائط سلاجز معروفة -> مفاتيح ترجمة تحت blog.* */\nconst KNOWN_MAP: Record<string, string> = {\n  guides: 'guides',\n  tips: 'tips',\n  care: 'care',\n  seasonal: 'seasonal',\n  storage: 'storage',\n  luxury: 'luxuryPerfume',\n  luxury_perfume: 'luxuryPerfume',\n  buying_guide: 'buyingGuide',\n  buyingguide: 'buyingGuide',\n};\n\nfunction normalizeSlug(s: string) {\n  return (s || '').replace(/-/g, '_').toLowerCase();\n}\n\n/** ترجمة slug إلى نص قابل للعرض */\nfunction translateBlogKey(t: (k: string, o?: any) => string, slug?: string) {\n  if (!slug) return '';\n  const norm = normalizeSlug(slug);\n  const key = KNOWN_MAP[norm];\n  if (key) return t(`blog.${key}`);\n  // فالباك جميل لو ما كان له مفتاح ترجمة:\n  return slug\n    .replace(/[-_]/g, ' ')\n    .replace(/\\b\\w/g, (m) => m.toUpperCase());\n}\n\nexport default function BlogIndex() {\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectedCategory, setSelectedCategory] = useState<string>('');\n  const [selectedTag, setSelectedTag] = useState<string>('');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const allPosts = getPostsByLang(language, 'published');\n  const categories = getAllCategories(language); // تُرجع سلاجز\n  const tags = getAllTags(language);             // تُرجع سلاجز\n\n  const filteredPosts = useMemo(() => {\n    let filtered = allPosts;\n\n    if (selectedCategory) {\n      filtered = filtered.filter((p) => normalizeSlug(p.category) === normalizeSlug(selectedCategory));\n    }\n\n    if (selectedTag) {\n      filtered = filtered.filter((p) => (p.tags || []).some((tg: string) => normalizeSlug(tg) === normalizeSlug(selectedTag)));\n    }\n\n    if (searchQuery.trim()) {\n      const q = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (p) =>\n          p.title.toLowerCase().includes(q) ||\n          p.description.toLowerCase().includes(q)\n      );\n    }\n\n    return filtered;\n  }, [allPosts, selectedCategory, selectedTag, searchQuery]);\n\n  const totalPages = Math.ceil(filteredPosts.length / POSTS_PER_PAGE);\n  const paginatedPosts = filteredPosts.slice(\n    (currentPage - 1) * POSTS_PER_PAGE,\n    currentPage * POSTS_PER_PAGE\n  );\n\n  const pageTitle = t('blog.title');\n  const pageDesc = t('blog.desc');\n  const canonicalUrl = `${window.location.origin}/blog`;\n\n  const blogSchema = {\n    '@context': 'https://schema.org',\n    '@type': 'Blog',\n    name: pageTitle,\n    description: pageDesc,\n    url: canonicalUrl,\n    publisher: {\n      '@type': 'Organization',\n      name: t('common.siteName'),\n      logo: {\n        '@type': 'ImageObject',\n        url: `${window.location.origin}/logo.png`,\n      },\n    },\n    blogPost: allPosts.slice(0, 10).map((post) => ({\n      '@type': 'BlogPosting',\n      headline: post.title,\n      description: post.description,\n      url: `${window.location.origin}/blog/${post.slug}`,\n      datePublished: post.date,\n      author: {\n        '@type': 'Person',\n        name: post.author,\n      },\n    })),\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>\n          {pageTitle} | {t('common.siteName')}\n        </title>\n        <meta name=\"description\" content={pageDesc} />\n        <link rel=\"canonical\" href={canonicalUrl} />\n        <link\n          rel=\"alternate\"\n          hrefLang=\"ar\"\n          href={`${window.location.origin}/blog?lang=ar`}\n        />\n        <link\n          rel=\"alternate\"\n          hrefLang=\"en\"\n          href={`${window.location.origin}/blog?lang=en`}\n        />\n        <link\n          rel=\"alternate\"\n          hrefLang=\"x-default\"\n          href={`${window.location.origin}/blog`}\n        />\n\n        <meta property=\"og:title\" content={pageTitle} />\n        <meta property=\"og:description\" content={pageDesc} />\n        <meta property=\"og:url\" content={canonicalUrl} />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content={pageTitle} />\n        <meta name=\"twitter:description\" content={pageDesc} />\n\n        <script type=\"application/ld+json\">{JSON.stringify(blogSchema)}</script>\n      </Helmet>\n\n      <div className=\"min-h-screen bg-sand py-16\">\n        <div className=\"container mx-auto px-4\">\n          {/* Header */}\n          <div className=\"text-center mb-12\">\n            <h1 className=\"text-4xl md:text-5xl font-bold text-charcoal mb-4\">\n              {t('blog.title')}\n            </h1>\n            <p className=\"text-lg text-taupe max-w-2xl mx-auto\">{t('blog.desc')}</p>\n          </div>\n\n          {/* Filters */}\n          <div className=\"mb-8 space-y-4\">\n            <div className=\"flex flex-col md:flex-row gap-4\">\n              {/* Search */}\n              <input\n                type=\"text\"\n                placeholder={t('blog.search')}\n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                  setCurrentPage(1);\n                }}\n                className=\"flex-1 px-4 py-3 border border-charcoal-light rounded-luxury focus:outline-none focus:border-gold\"\n              />\n\n              {/* Category Filter (مُترجم للعرض) */}\n              <select\n                value={selectedCategory}\n                onChange={(e) => {\n                  setSelectedCategory(e.target.value);\n                  setCurrentPage(1);\n                }}\n                className=\"px-4 py-3 border border-charcoal-light rounded-luxury focus:outline-none focus:border-gold bg-white\"\n              >\n                <option value=\"\">{t('blog.allCategories')}</option>\n                {categories.map((cat) => (\n                  <option key={cat} value={cat}>\n                    {translateBlogKey(t, cat)}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Tag Filter (مُترجم للعرض) */}\n            {tags.length > 0 && (\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  onClick={() => {\n                    setSelectedTag('');\n                    setCurrentPage(1);\n                  }}\n                  className={`px-4 py-2 rounded-full text-sm transition ${\n                    !selectedTag\n                      ? 'bg-gold text-charcoal'\n                      : 'bg-ivory text-taupe hover:bg-charcoal-light'\n                  }`}\n                >\n                  {t('blog.allTags')}\n                </button>\n                {tags.map((tag) => (\n                  <button\n                    key={tag}\n                    onClick={() => {\n                      setSelectedTag(tag);\n                      setCurrentPage(1);\n                    }}\n                    className={`px-4 py-2 rounded-full text-sm transition ${\n                      normalizeSlug(selectedTag) === normalizeSlug(tag)\n                        ? 'bg-gold text-charcoal'\n                        : 'bg-ivory text-taupe hover:bg-charcoal-light'\n                    }`}\n                  >\n                    {translateBlogKey(t, tag)}\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Results Count */}\n          <p className=\"text-taupe mb-6\">\n            {t('blog.showingResults', { count: filteredPosts.length })}\n          </p>\n\n          {/* Posts Grid */}\n          {paginatedPosts.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <p className=\"text-xl text-taupe\">{t('blog.noPosts')}</p>\n            </div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12\">\n              {paginatedPosts.map((post) => (\n                <Link\n                  key={`${post.slug}-${(post as any).lang || language}`}\n                  to={`/blog/${post.slug}`}\n                  className=\"group bg-ivory rounded-luxury overflow-hidden shadow-sm hover:shadow-luxury transition-all duration-300\"\n                >\n                  {/* Cover Image */}\n                  <div className=\"aspect-[16/9] overflow-hidden bg-sand\">\n                    <img\n                      src={post.cover}\n                      alt={post.title}\n                      loading=\"lazy\"\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                      onError={(e) => {\n                        (e.currentTarget as HTMLImageElement).src =\n                          '/images/blog/placeholder.jpg';\n                      }}\n                    />\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"p-6\">\n                    <div className=\"flex items-center gap-2 text-sm text-taupe mb-3\">\n                      <span>\n                        {new Date(post.date).toLocaleDateString(\n                          i18n.language === 'ar' ? 'ar-SA' : 'en-US',\n                          { year: 'numeric', month: 'long', day: 'numeric' }\n                        )}\n                      </span>\n                      <span>•</span>\n                      <span>\n                        {(post.readingTime as number) || 2}{' '}\n                        {t('blog.minRead_other', {\n                          count: (post.readingTime as number) || 2,\n                        })}\n                      </span>\n                    </div>\n\n                    <h3 className=\"text-xl font-bold text-charcoal mb-2 group-hover:text-gold transition line-clamp-2\">\n                      {post.title}\n                    </h3>\n\n                    <p className=\"text-taupe line-clamp-3 mb-4\">{post.description}</p>\n\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gold font-semibold\">\n                        {translateBlogKey(t, post.category)}\n                      </span>\n                      <span className=\"text-gold group-hover:translate-x-1 transition-transform inline-block\">\n                        {i18n.language === 'ar' ? '←' : '→'}\n                      </span>\n                    </div>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          )}\n\n          {/* Pagination */}\n          {totalPages > 1 && (\n            <div className=\"flex justify-center items-center gap-2\">\n              <button\n                onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\n                disabled={currentPage === 1}\n                className=\"px-4 py-2 border border-charcoal-light rounded-lg hover:bg-charcoal-light transition disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {i18n.language === 'ar' ? '→' : '←'}\n              </button>\n\n              {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n                <button\n                  key={page}\n                  onClick={() => setCurrentPage(page)}\n                  className={`px-4 py-2 rounded-lg transition ${\n                    currentPage === page\n                      ? 'bg-gold text-charcoal'\n                      : 'border border-charcoal-light hover:bg-charcoal-light'\n                  }`}\n                >\n                  {page}\n                </button>\n              ))}\n\n              <button\n                onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}\n                disabled={currentPage === totalPages}\n                className=\"px-4 py-2 border border-charcoal-light rounded-lg hover:bg-charcoal-light transition disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {i18n.language === 'ar' ? '←' : '→'}\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":12241},"frontend/src/services/blogService.ts":{"content":"import matter from 'gray-matter';\nimport { marked } from 'marked';\nimport DOMPurify from 'dompurify';\nimport { Buffer } from 'buffer';\n\n// Make Buffer available globally for gray-matter\nif (typeof window !== 'undefined') {\n  (window as any).Buffer = Buffer;\n}\n\nexport interface BlogPost {\n  slug: string;\n  title: string;\n  description: string;\n  cover: string;\n  author: string;\n  category: string;\n  tags: string[];\n  date: string;\n  lang: 'ar' | 'en';\n  status: 'published' | 'draft';\n  content: string;\n  html: string;\n  readingTime: number;\n}\n\ninterface TOCItem {\n  id: string;\n  text: string;\n  level: number;\n}\n\n// Load all markdown files\nconst modules = import.meta.glob('/src/content/blog/*.md', { \n  query: '?raw',\n  import: 'default',\n  eager: true \n});\n\n// Parse all posts\nconst allPosts: BlogPost[] = Object.entries(modules).map(([_, raw]) => {\n  const { data, content } = matter(raw as string);\n  const html = DOMPurify.sanitize(marked(content) as string);\n  \n  return {\n    slug: data.slug,\n    title: data.title,\n    description: data.description,\n    cover: data.cover || '/images/blog/placeholder.jpg',\n    author: data.author,\n    category: data.category,\n    tags: data.tags || [],\n    date: data.date,\n    lang: data.lang,\n    status: data.status || 'draft',\n    content,\n    html,\n    readingTime: estimateReadingTime(content),\n  };\n});\n\n/**\n * Get all published posts, sorted by date (DESC)\n */\nexport function getAllPosts(includeStatus?: 'published' | 'draft' | 'all'): BlogPost[] {\n  const status = includeStatus || 'published';\n  \n  let filtered = allPosts;\n  if (status !== 'all') {\n    filtered = allPosts.filter(p => p.status === status);\n  }\n  \n  return filtered.sort((a, b) => \n    new Date(b.date).getTime() - new Date(a.date).getTime()\n  );\n}\n\n/**\n * Get posts by language\n */\nexport function getPostsByLang(lang: 'ar' | 'en', includeStatus?: 'published' | 'draft' | 'all'): BlogPost[] {\n  return getAllPosts(includeStatus).filter(p => p.lang === lang);\n}\n\n/**\n * Get a single post by slug and language\n */\nexport function getPostBySlug(slug: string, lang: 'ar' | 'en'): BlogPost | null {\n  const post = allPosts.find(p => p.slug === slug && p.lang === lang);\n  return post || null;\n}\n\n/**\n * Get posts by category\n */\nexport function getPostsByCategory(category: string, lang: 'ar' | 'en'): BlogPost[] {\n  return getPostsByLang(lang, 'published').filter(p => p.category === category);\n}\n\n/**\n * Get posts by tag\n */\nexport function getPostsByTag(tag: string, lang: 'ar' | 'en'): BlogPost[] {\n  return getPostsByLang(lang, 'published').filter(p => p.tags.includes(tag));\n}\n\n/**\n * Get posts by author\n */\nexport function getPostsByAuthor(author: string, lang: 'ar' | 'en'): BlogPost[] {\n  return getPostsByLang(lang, 'published').filter(p => p.author === author);\n}\n\n/**\n * Get related posts (same category or tags, excluding current post)\n */\nexport function getRelated(slug: string, lang: 'ar' | 'en', limit = 3): BlogPost[] {\n  const current = getPostBySlug(slug, lang);\n  if (!current) return [];\n  \n  const posts = getPostsByLang(lang, 'published').filter(p => p.slug !== slug);\n  \n  // Score posts by relevance\n  const scored = posts.map(p => {\n    let score = 0;\n    if (p.category === current.category) score += 3;\n    score += p.tags.filter(t => current.tags.includes(t)).length;\n    return { post: p, score };\n  });\n  \n  // Sort by score DESC, then date DESC\n  scored.sort((a, b) => {\n    if (b.score !== a.score) return b.score - a.score;\n    return new Date(b.post.date).getTime() - new Date(a.post.date).getTime();\n  });\n  \n  return scored.slice(0, limit).map(s => s.post);\n}\n\n/**\n * Search posts by text (title, description, content)\n */\nexport function searchPosts(query: string, lang: 'ar' | 'en'): BlogPost[] {\n  if (!query.trim()) return getPostsByLang(lang, 'published');\n  \n  const q = query.toLowerCase();\n  return getPostsByLang(lang, 'published').filter(p => \n    p.title.toLowerCase().includes(q) ||\n    p.description.toLowerCase().includes(q) ||\n    p.content.toLowerCase().includes(q)\n  );\n}\n\n/**\n * Estimate reading time (words per minute)\n */\nexport function estimateReadingTime(text: string): number {\n  const wordsPerMinute = 200;\n  const words = text.trim().split(/\\s+/).length;\n  return Math.ceil(words / wordsPerMinute);\n}\n\n/**\n * Extract Table of Contents from HTML (H2 and H3 tags)\n */\nexport function extractToc(html: string): TOCItem[] {\n  const parser = new DOMParser();\n  const doc = parser.parseFromString(html, 'text/html');\n  const headings = doc.querySelectorAll('h2, h3');\n  \n  const toc: TOCItem[] = [];\n  headings.forEach((heading, index) => {\n    const text = heading.textContent || '';\n    const id = `heading-${index}`;\n    heading.id = id;\n    \n    toc.push({\n      id,\n      text,\n      level: heading.tagName === 'H2' ? 2 : 3,\n    });\n  });\n  \n  return toc;\n}\n\n/**\n * Get all unique categories\n */\nexport function getAllCategories(lang: 'ar' | 'en'): string[] {\n  const posts = getPostsByLang(lang, 'published');\n  return Array.from(new Set(posts.map(p => p.category)));\n}\n\n/**\n * Get all unique tags\n */\nexport function getAllTags(lang: 'ar' | 'en'): string[] {\n  const posts = getPostsByLang(lang, 'published');\n  const tags = posts.flatMap(p => p.tags);\n  return Array.from(new Set(tags));\n}\n\n/**\n * Get all unique authors\n */\nexport function getAllAuthors(lang: 'ar' | 'en'): string[] {\n  const posts = getPostsByLang(lang, 'published');\n  return Array.from(new Set(posts.map(p => p.author)));\n}\n","size_bytes":5485},"frontend/src/pages/blog/TagPage.tsx":{"content":"import { useParams, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Helmet } from 'react-helmet-async';\nimport { useUIStore } from '../../store/uiStore';\nimport { getPostsByTag } from '../../services/blogService';\n\nexport default function TagPage() {\n  const { tag } = useParams<{ tag: string }>();\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n\n  const posts = tag ? getPostsByTag(tag, language) : [];\n  \n  const pageTitle = `${t('blog.tag')}: #${tag}`;\n  const canonicalUrl = `${window.location.origin}/blog/tag/${tag}`;\n\n  const breadcrumbSchema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"BreadcrumbList\",\n    \"itemListElement\": [\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 1,\n        \"name\": t('nav.home'),\n        \"item\": window.location.origin\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 2,\n        \"name\": t('blog.title'),\n        \"item\": `${window.location.origin}/blog`\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 3,\n        \"name\": `#${tag}`,\n        \"item\": canonicalUrl\n      }\n    ]\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>{pageTitle} | {t('common.siteName')}</title>\n        <meta name=\"description\" content={`${t('blog.browsing')} #${tag}`} />\n        <link rel=\"canonical\" href={canonicalUrl} />\n        <link rel=\"alternate\" hrefLang=\"ar\" href={`${window.location.origin}/blog/tag/${tag}?lang=ar`} />\n        <link rel=\"alternate\" hrefLang=\"en\" href={`${window.location.origin}/blog/tag/${tag}?lang=en`} />\n        <link rel=\"alternate\" hrefLang=\"x-default\" href={`${window.location.origin}/blog/tag/${tag}`} />\n        \n        <script type=\"application/ld+json\">\n          {JSON.stringify(breadcrumbSchema)}\n        </script>\n      </Helmet>\n\n      <div className=\"min-h-screen bg-sand py-16\">\n        <div className=\"container mx-auto px-4\">\n          {/* Breadcrumbs */}\n          <nav className=\"text-sm text-taupe mb-8 flex items-center gap-2\">\n            <Link to=\"/\" className=\"hover:text-gold\">{t('nav.home')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <Link to=\"/blog\" className=\"hover:text-gold\">{t('blog.title')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <span className=\"text-charcoal\">#{tag}</span>\n          </nav>\n\n          <div className=\"text-center mb-12\">\n            <h1 className=\"text-4xl font-bold text-charcoal mb-4\">\n              {t('blog.tag')}: #{tag}\n            </h1>\n            <p className=\"text-lg text-taupe\">\n              {posts.length} {t('blog.articlesFound')}\n            </p>\n          </div>\n\n          {posts.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <p className=\"text-xl text-taupe mb-6\">{t('blog.noPosts')}</p>\n              <Link to=\"/blog\" className=\"text-gold hover:underline\">\n                {t('blog.back')}\n              </Link>\n            </div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {posts.map(post => (\n                <Link\n                  key={post.slug}\n                  to={`/blog/${post.slug}`}\n                  className=\"group bg-ivory rounded-luxury overflow-hidden shadow-sm hover:shadow-luxury transition\"\n                >\n                  <div className=\"aspect-video overflow-hidden bg-sand\">\n                    <img\n                      src={post.cover}\n                      alt={post.title}\n                      loading=\"lazy\"\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                      onError={(e) => {\n                        e.currentTarget.src = '/images/blog/placeholder.jpg';\n                      }}\n                    />\n                  </div>\n                  <div className=\"p-6\">\n                    <div className=\"flex items-center gap-2 text-sm text-taupe mb-3\">\n                      <span>{new Date(post.date).toLocaleDateString(\n                        i18n.language === 'ar' ? 'ar-SA' : 'en-US',\n                        { year: 'numeric', month: 'long', day: 'numeric' }\n                      )}</span>\n                      <span>•</span>\n                      <span>{post.readingTime} {t('blog.minRead')}</span>\n                    </div>\n                    <h3 className=\"text-xl font-bold text-charcoal mb-2 group-hover:text-gold transition line-clamp-2\">\n                      {post.title}\n                    </h3>\n                    <p className=\"text-taupe line-clamp-3\">\n                      {post.description}\n                    </p>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":4837},"frontend/src/content/blog/2025-01-08-perfume-care-tips.en.md":{"content":"---\nslug: perfume-care-tips\ntitle: How to Make Your Perfume Last Longer\ndescription: Practical tips for maintaining your perfume's quality and extending its lifespan\ncover: /images/blog/perfume-care.jpg\nauthor: Aalam Al-Otoor\ncategory: tips\ntags: [\"tips\", \"perfume care\", \"storage\"]\ndate: 2025-01-08\nlang: en\nstatus: published\n---\n\n## Importance of Proper Storage\n\nPerfumes are sensitive to environmental factors like heat, light, and humidity. Improper storage can alter the fragrance and diminish its quality.\n\n### Best Storage Locations\n\n1. **Closed Cabinet**: Away from light and heat\n2. **Bedroom**: Moderate and stable temperature\n3. **Storage Box**: Extra protection from light\n\n### Avoid These Places\n\n- Bathroom (high humidity)\n- Window sill (direct sunlight)\n- Car (fluctuating temperatures)\n\n## Signs of Perfume Deterioration\n\nWatch for these indicators of declining perfume quality:\n\n1. **Color Change**: Liquid has darkened\n2. **Different Scent**: Sour or strongly alcoholic\n3. **Changed Texture**: Became sticky or cloudy\n\n## Daily Usage Tips\n\n### Proper Spraying Technique\n\n- Spray on pulse points (wrist, behind ears, neck)\n- Don't rub the perfume after spraying\n- Spray from 15-20 cm distance\n\n### Right Amount\n\n- 2-3 sprays for concentrated perfumes (Parfum)\n- 4-5 sprays for lighter fragrances (EDT)\n- One spray on clothes (test first!)\n\n## Extending Perfume Life\n\n1. **Close Bottle Immediately**: Prevent alcohol evaporation\n2. **Avoid Excess Air**: Don't leave cap open\n3. **Use Regularly**: Perfumes are for wearing, not displaying\n4. **Keep Original Box**: Extra protection when not in use\n\n## When to Replace Your Perfume?\n\nMost perfumes last 3-5 years when stored properly:\n\n- **Citrus fragrances**: 1-2 years\n- **Floral scents**: 3-4 years\n- **Woody and Oriental**: 5+ years\n\nRemember: Your perfume is a precious investment, take care of it!\n","size_bytes":1868},"frontend/src/pages/blog/AuthorPage.tsx":{"content":"import { useParams, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Helmet } from 'react-helmet-async';\nimport { useUIStore } from '../../store/uiStore';\nimport { getPostsByAuthor } from '../../services/blogService';\n\nexport default function AuthorPage() {\n  const { name } = useParams<{ name: string }>();\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n\n  const posts = name ? getPostsByAuthor(name, language) : [];\n  \n  const pageTitle = `${t('blog.author')}: ${name}`;\n  const canonicalUrl = `${window.location.origin}/blog/author/${name}`;\n\n  const breadcrumbSchema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"BreadcrumbList\",\n    \"itemListElement\": [\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 1,\n        \"name\": t('nav.home'),\n        \"item\": window.location.origin\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 2,\n        \"name\": t('blog.title'),\n        \"item\": `${window.location.origin}/blog`\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 3,\n        \"name\": name,\n        \"item\": canonicalUrl\n      }\n    ]\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>{pageTitle} | {t('common.siteName')}</title>\n        <meta name=\"description\" content={`${t('blog.articlesBy')} ${name}`} />\n        <link rel=\"canonical\" href={canonicalUrl} />\n        <link rel=\"alternate\" hrefLang=\"ar\" href={`${window.location.origin}/blog/author/${name}?lang=ar`} />\n        <link rel=\"alternate\" hrefLang=\"en\" href={`${window.location.origin}/blog/author/${name}?lang=en`} />\n        <link rel=\"alternate\" hrefLang=\"x-default\" href={`${window.location.origin}/blog/author/${name}`} />\n        \n        <script type=\"application/ld+json\">\n          {JSON.stringify(breadcrumbSchema)}\n        </script>\n      </Helmet>\n\n      <div className=\"min-h-screen bg-sand py-16\">\n        <div className=\"container mx-auto px-4\">\n          {/* Breadcrumbs */}\n          <nav className=\"text-sm text-taupe mb-8 flex items-center gap-2\">\n            <Link to=\"/\" className=\"hover:text-gold\">{t('nav.home')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <Link to=\"/blog\" className=\"hover:text-gold\">{t('blog.title')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <span className=\"text-charcoal\">{name}</span>\n          </nav>\n\n          <div className=\"text-center mb-12\">\n            <h1 className=\"text-4xl font-bold text-charcoal mb-4\">\n              {t('blog.author')}: {name}\n            </h1>\n            <p className=\"text-lg text-taupe\">\n              {posts.length} {t('blog.articlesFound')}\n            </p>\n          </div>\n\n          {posts.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <p className=\"text-xl text-taupe mb-6\">{t('blog.noPosts')}</p>\n              <Link to=\"/blog\" className=\"text-gold hover:underline\">\n                {t('blog.back')}\n              </Link>\n            </div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {posts.map(post => (\n                <Link\n                  key={post.slug}\n                  to={`/blog/${post.slug}`}\n                  className=\"group bg-ivory rounded-luxury overflow-hidden shadow-sm hover:shadow-luxury transition\"\n                >\n                  <div className=\"aspect-video overflow-hidden bg-sand\">\n                    <img\n                      src={post.cover}\n                      alt={post.title}\n                      loading=\"lazy\"\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                      onError={(e) => {\n                        e.currentTarget.src = '/images/blog/placeholder.jpg';\n                      }}\n                    />\n                  </div>\n                  <div className=\"p-6\">\n                    <div className=\"flex items-center gap-2 text-sm text-taupe mb-3\">\n                      <span>{new Date(post.date).toLocaleDateString(\n                        i18n.language === 'ar' ? 'ar-SA' : 'en-US',\n                        { year: 'numeric', month: 'long', day: 'numeric' }\n                      )}</span>\n                      <span>•</span>\n                      <span>{post.readingTime} {t('blog.minRead')}</span>\n                    </div>\n                    <h3 className=\"text-xl font-bold text-charcoal mb-2 group-hover:text-gold transition line-clamp-2\">\n                      {post.title}\n                    </h3>\n                    <p className=\"text-taupe line-clamp-3\">\n                      {post.description}\n                    </p>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":4869},"frontend/src/content/blog/2025-01-10-intro-to-niche-perfumes.ar.md":{"content":"---\nslug: intro-to-niche-perfumes\ntitle: دليلك الشامل للعطور الفاخرة المتخصصة\ndescription: اكتشف عالم العطور المتخصصة الفاخرة وتعرف على كيفية اختيار العطر المثالي الذي يناسب شخصيتك وأسلوبك الفريد\ncover: /images/blog/niche-perfumes.jpg\nauthor: عالم العطور\ncategory: guides\ntags: [\"عطور فاخرة\", \"نصائح\", \"دليل شراء\"]\ndate: 2025-01-10\nlang: ar\nstatus: published\n---\n\n## ما هي العطور المتخصصة؟\n\nالعطور المتخصصة أو النيش (Niche) هي عطور فاخرة يتم إنتاجها بكميات محدودة من قبل دور عطور مستقلة. على عكس العطور التجارية، تركز العطور المتخصصة على الجودة والفرادة بدلاً من الإنتاج الضخم.\n\n### لماذا تختار العطور المتخصصة؟\n\n1. **التفرد والتميز**: احصل على عطر فريد لا يرتديه الجميع\n2. **جودة عالية**: مكونات طبيعية فاخرة وتركيبات معقدة\n3. **ثبات طويل**: تركيز عالٍ يدوم لساعات طويلة\n4. **قصة فنية**: كل عطر له قصة وهوية خاصة\n\n## كيف تختار العطر المناسب؟\n\n### 1. حدد عائلتك العطرية المفضلة\n\n- **العطور الشرقية**: عود، عنبر، مسك، بخور\n- **العطور الزهرية**: ياسمين، ورد، زنبق\n- **العطور الحمضية**: برتقال، ليمون، جريب فروت\n- **العطور الخشبية**: صندل، أرز، باتشولي\n\n### 2. اختبر العطر بشكل صحيح\n\n- رش العطر على نقاط النبض (المعصم، العنق)\n- انتظر 30 دقيقة لتظهر الطبقات الوسطى\n- استمر في التقييم لمدة 6-8 ساعات\n\n### 3. استثمر في الجودة\n\nالعطور المتخصصة قد تكون أغلى سعراً، لكنها استثمار يدوم طويلاً بفضل ثباتها وجودتها العالية.\n\n## أشهر دور العطور المتخصصة\n\n- **عطور كريد (Creed)**: تأسست عام 1760\n- **مايسون فرانسيس كوركدجيان**: الفن العطري الحديث\n- **بايريدو (Byredo)**: البساطة الإسكندنافية\n- **أمواج (Amouage)**: الفخامة العمانية\n\n## نصائح للحفاظ على عطرك\n\n1. احفظ العطر في مكان بارد ومظلم\n2. تجنب تعريضه للحرارة أو أشعة الشمس المباشرة\n3. أغلق الزجاجة جيداً بعد الاستخدام\n4. استخدم العطر خلال 2-3 سنوات من فتح الزجاجة\n\n---\n\nهل أنت مستعد لبدء رحلتك في عالم العطور المتخصصة؟ تصفح [مجموعتنا الحصرية](/new) واكتشف عطرك المثالي اليوم!\n","size_bytes":2995},"frontend/src/pages/blog/CategoryPage.tsx":{"content":"import { useParams, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Helmet } from 'react-helmet-async';\nimport { useUIStore } from '../../store/uiStore';\nimport { getPostsByCategory } from '../../services/blogService';\n\nexport default function CategoryPage() {\n  const { category } = useParams<{ category: string }>();\n  const { t, i18n } = useTranslation();\n  const { language } = useUIStore();\n\n  const posts = category ? getPostsByCategory(category, language) : [];\n  \n  const pageTitle = `${t('blog.category')}: ${category}`;\n  const canonicalUrl = `${window.location.origin}/blog/category/${category}`;\n\n  const breadcrumbSchema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"BreadcrumbList\",\n    \"itemListElement\": [\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 1,\n        \"name\": t('nav.home'),\n        \"item\": window.location.origin\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 2,\n        \"name\": t('blog.title'),\n        \"item\": `${window.location.origin}/blog`\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 3,\n        \"name\": category,\n        \"item\": canonicalUrl\n      }\n    ]\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>{pageTitle} | {t('common.siteName')}</title>\n        <meta name=\"description\" content={`${t('blog.browsing')} ${category}`} />\n        <link rel=\"canonical\" href={canonicalUrl} />\n        <link rel=\"alternate\" hrefLang=\"ar\" href={`${window.location.origin}/blog/category/${category}?lang=ar`} />\n        <link rel=\"alternate\" hrefLang=\"en\" href={`${window.location.origin}/blog/category/${category}?lang=en`} />\n        <link rel=\"alternate\" hrefLang=\"x-default\" href={`${window.location.origin}/blog/category/${category}`} />\n        \n        <script type=\"application/ld+json\">\n          {JSON.stringify(breadcrumbSchema)}\n        </script>\n      </Helmet>\n\n      <div className=\"min-h-screen bg-sand py-16\">\n        <div className=\"container mx-auto px-4\">\n          {/* Breadcrumbs */}\n          <nav className=\"text-sm text-taupe mb-8 flex items-center gap-2\">\n            <Link to=\"/\" className=\"hover:text-gold\">{t('nav.home')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <Link to=\"/blog\" className=\"hover:text-gold\">{t('blog.title')}</Link>\n            <span>{i18n.language === 'ar' ? '←' : '→'}</span>\n            <span className=\"text-charcoal\">{category}</span>\n          </nav>\n\n          <div className=\"text-center mb-12\">\n            <h1 className=\"text-4xl font-bold text-charcoal mb-4\">\n              {t('blog.category')}: {category}\n            </h1>\n            <p className=\"text-lg text-taupe\">\n              {posts.length} {t('blog.articlesFound')}\n            </p>\n          </div>\n\n          {posts.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <p className=\"text-xl text-taupe mb-6\">{t('blog.noPosts')}</p>\n              <Link to=\"/blog\" className=\"text-gold hover:underline\">\n                {t('blog.back')}\n              </Link>\n            </div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {posts.map(post => (\n                <Link\n                  key={post.slug}\n                  to={`/blog/${post.slug}`}\n                  className=\"group bg-ivory rounded-luxury overflow-hidden shadow-sm hover:shadow-luxury transition\"\n                >\n                  <div className=\"aspect-video overflow-hidden bg-sand\">\n                    <img\n                      src={post.cover}\n                      alt={post.title}\n                      loading=\"lazy\"\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                      onError={(e) => {\n                        e.currentTarget.src = '/images/blog/placeholder.jpg';\n                      }}\n                    />\n                  </div>\n                  <div className=\"p-6\">\n                    <div className=\"flex items-center gap-2 text-sm text-taupe mb-3\">\n                      <span>{new Date(post.date).toLocaleDateString(\n                        i18n.language === 'ar' ? 'ar-SA' : 'en-US',\n                        { year: 'numeric', month: 'long', day: 'numeric' }\n                      )}</span>\n                      <span>•</span>\n                      <span>{post.readingTime} {t('blog.minRead')}</span>\n                    </div>\n                    <h3 className=\"text-xl font-bold text-charcoal mb-2 group-hover:text-gold transition line-clamp-2\">\n                      {post.title}\n                    </h3>\n                    <p className=\"text-taupe line-clamp-3\">\n                      {post.description}\n                    </p>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":4937},"frontend/src/content/blog/2025-01-05-seasonal-fragrances.en.md":{"content":"---\nslug: seasonal-fragrances\ntitle: Guide to Choosing Perfumes by Season\ndescription: Discover how to select the perfect fragrance for each season and shine all year round\ncover: /images/blog/seasonal-perfumes.jpg\nauthor: Aalam Al-Otoor\ncategory: guides\ntags: [\"seasonal perfumes\", \"tips\", \"fragrance selection\"]\ndate: 2025-01-05\nlang: en\nstatus: published\n---\n\n## Why Change Perfumes by Season?\n\nTemperature and humidity significantly affect how a fragrance develops on skin. Choosing the right scent for the season ensures optimal performance and longevity.\n\n## Summer Fragrances\n\n### Ideal Characteristics\n\n- Light and refreshing\n- Citrus and fruits\n- Aquatic notes\n- Low concentration (EDT, EDC)\n\n### Top Choices\n\n1. **Acqua di Gio** - Giorgio Armani\n2. **Light Blue** - Dolce & Gabbana\n3. **Neroli Portofino** - Tom Ford\n\n## Winter Fragrances\n\n### Ideal Characteristics\n\n- Warm and rich\n- Spices and woods\n- Amber and vanilla\n- High concentration (EDP, Parfum)\n\n### Top Choices\n\n1. **Oud Wood** - Tom Ford\n2. **Interlude Man** - Amouage\n3. **La Nuit de L'Homme** - YSL\n\n## Spring Fragrances\n\n### Ideal Characteristics\n\n- Fresh florals\n- Green and herbaceous\n- Balanced and light\n- White flower notes\n\n### Top Choices\n\n1. **Flowerbomb** - Viktor & Rolf\n2. **Mon Guerlain** - Guerlain\n3. **J'adore** - Dior\n\n## Fall Fragrances\n\n### Ideal Characteristics\n\n- Moderately warm\n- Light spices\n- Wood and leather\n- Dried fruit notes\n\n### Top Choices\n\n1. **Spicebomb** - Viktor & Rolf\n2. **1 Million** - Paco Rabanne\n3. **Tobacco Vanille** - Tom Ford\n\n## General Tips\n\n1. **Layering**: Use lighter scents during day, stronger at night\n2. **Occasions**: Work fragrances differ from social events\n3. **Longevity**: Winter perfumes last longer than summer ones\n4. **Refresh**: Reapply every 4-6 hours in summer\n\nRemember: There are no strict rules - the most important thing is feeling comfortable and confident with your fragrance!\n","size_bytes":1927},"frontend/src/content/blog/2025-01-08-perfume-care-tips.ar.md":{"content":"---\nslug: perfume-care-tips\ntitle: كيف تحافظ على عطرك لأطول فترة ممكنة\ndescription: نصائح عملية للحفاظ على جودة عطرك وإطالة عمره الافتراضي\ncover: /images/blog/perfume-care.jpg\nauthor: عالم العطور\ncategory: tips\ntags: [\"نصائح\", \"العناية بالعطور\", \"تخزين\"]\ndate: 2025-01-08\nlang: ar\nstatus: published\n---\n\n## أهمية التخزين الصحيح\n\nالعطور حساسة للعوامل البيئية مثل الحرارة والضوء والرطوبة. التخزين الخاطئ يمكن أن يؤدي إلى تغير رائحة العطر وفقدان جودته.\n\n### أفضل أماكن التخزين\n\n1. **الخزانة المغلقة**: بعيداً عن الضوء والحرارة\n2. **غرفة النوم**: درجة حرارة معتدلة ومستقرة\n3. **صندوق التخزين**: حماية إضافية من الضوء\n\n### تجنب هذه الأماكن\n\n- الحمام (رطوبة عالية)\n- النافذة (أشعة شمس مباشرة)\n- السيارة (درجات حرارة متقلبة)\n\n## علامات تلف العطر\n\nراقب هذه العلامات التي تدل على تدهور جودة العطر:\n\n1. **تغير اللون**: السائل أصبح أغمق\n2. **رائحة مختلفة**: حامضة أو كحولية قوية\n3. **قوام متغير**: أصبح لزجاً أو عكراً\n\n## نصائح الاستخدام اليومي\n\n### طريقة الرش الصحيحة\n\n- رش على نقاط النبض (المعصم، خلف الأذن، العنق)\n- لا تفرك العطر بعد الرش\n- رش من مسافة 15-20 سم\n\n### الكمية المناسبة\n\n- 2-3 رشات للعطور المركزة (Parfum)\n- 4-5 رشات للعطور الخفيفة (EDT)\n- رشة واحدة على الملابس (اختبر أولاً!)\n\n## إطالة عمر العطر\n\n1. **أغلق الزجاجة فوراً**: منع تبخر الكحول\n2. **تجنب الهواء الزائد**: لا تترك الغطاء مفتوحاً\n3. **استخدم بانتظام**: العطور للاستعمال وليس للعرض\n4. **احتفظ بالعلبة**: حماية إضافية عند عدم الاستخدام\n\n## متى تستبدل العطر؟\n\nمعظم العطور تدوم 3-5 سنوات إذا تم تخزينها بشكل صحيح:\n\n- **عطور الحمضيات**: 1-2 سنة\n- **عطور زهرية**: 3-4 سنوات\n- **عطور خشبية وشرقية**: 5+ سنوات\n\nتذكر: عطرك استثمار ثمين، احرص على العناية به!\n","size_bytes":2623},"frontend/src/pages/static/InfoPage.tsx":{"content":"import { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport { useTranslation } from 'react-i18next';\n\ntype PageKey =\n  | 'about'\n  | 'authenticity'\n  | 'how-it-works'\n  | 'help'\n  | 'shipping'\n  | 'returns'\n  | 'privacy'\n  | 'terms'\n  | 'contact';\n\nexport default function InfoPage() {\n  const { t, i18n } = useTranslation();\n  const loc = useLocation();\n\n  // نستخرج الـ slug من المسار: /about → \"about\"\n  const slug = useMemo<PageKey>(() => {\n    const s = loc.pathname.replace(/^\\/+/, ''); // remove leading /\n    // لو فيه path فرعي مثل /help/faq نأخذ أول جزء فقط\n    const first = s.split('/')[0] as PageKey;\n    return ([\n      'about','authenticity','how-it-works','help',\n      'shipping','returns','privacy','terms','contact'\n    ] as PageKey[]).includes(first) ? first : 'help';\n  }, [loc.pathname]);\n\n  // عناوين وأوصاف SEO من الترجمة\n  const title = t(`pages.${slug}.title`);\n  const desc  = t(`pages.${slug}.desc`);\n\n  return (\n    <div dir={i18n.language === 'ar' ? 'rtl' : 'ltr'} className=\"min-h-screen bg-sand py-12\">\n      <Helmet>\n        <title>{title} | {t('common.siteName')}</title>\n        <meta name=\"description\" content={desc} />\n        <link rel=\"canonical\" href={`${window.location.origin}/${slug}`} />\n      </Helmet>\n\n      <div className=\"max-w-3xl mx-auto px-4 sm:px-6 md:px-8 lg:px-12\">\n        <h1 className=\"text-3xl md:text-4xl font-extrabold text-charcoal mb-4\">{title}</h1>\n        <p className=\"text-taupe mb-8\">{desc}</p>\n\n        {/* محتوى بسيط قابل للتخصيص لاحقًا */}\n        <div className=\"bg-ivory rounded-luxury shadow-sm p-5 md:p-6 leading-8 text-charcoal\">\n          {/* يمكنك لاحقًا استبدال هذا المحتوى بـ CMS أو مكوّنات أغنى */}\n          <div className=\"prose prose-invert max-w-none\">\n            <p>{t(`pages.${slug}.body.p1`)}</p>\n            <p>{t(`pages.${slug}.body.p2`)}</p>\n            <ul className=\"list-disc pe-6 my-4\">\n              <li>{t(`pages.${slug}.body.l1`)}</li>\n              <li>{t(`pages.${slug}.body.l2`)}</li>\n              <li>{t(`pages.${slug}.body.l3`)}</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2328},"frontend/src/pages/admin/blog/AdminBlogList.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\ntype AdminBlogPost = {\n  id: string;\n  title: string;\n  lang: \"ar\" | \"en\";\n  status: \"draft\" | \"published\";\n  date: string;\n  author?: string;\n};\n\nexport default function AdminBlogList() {\n  const { t, i18n } = useTranslation();\n  const [loading, setLoading] = useState(true);\n  const [rows, setRows] = useState<AdminBlogPost[]>([]);\n  const [q, setQ] = useState(\"\");\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      // TODO: استبدل لاحقًا بنداء GET /api/admin/blog\n      setRows([\n        { id: \"1\", title: \"مقدّمة في العطور النيش\", lang: \"ar\", status: \"published\", date: \"2025-01-10\", author: \"AO\" },\n        { id: \"2\", title: \"Intro to Niche Perfumes\", lang: \"en\", status: \"draft\", date: \"2025-01-08\", author: \"AO\" },\n      ]);\n      setLoading(false);\n    })();\n  }, []);\n\n  const filtered = rows.filter(r => r.title.toLowerCase().includes(q.toLowerCase()));\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h1 className=\"text-2xl font-bold\">{t(\"admin.blogList\", \"مقالات المدونة\")}</h1>\n        <Link to=\"/admin/blog/new\" className=\"bg-gold text-charcoal px-4 py-2 rounded-lg font-semibold hover:bg-gold-hover\">\n          {t(\"admin.newPost\", \"مقال جديد\")}\n        </Link>\n      </div>\n\n      <input\n        value={q}\n        onChange={(e) => setQ(e.target.value)}\n        placeholder={t(\"common.search\", \"بحث\") as string}\n        className=\"w-full max-w-md bg-white border border-sand rounded-lg px-3 py-2 mb-3\"\n      />\n\n      <div className=\"bg-ivory rounded-xl shadow-sm overflow-hidden\">\n        <table className=\"w-full text-sm\">\n          <thead className=\"bg-charcoal-light text-charcoal\">\n            <tr>\n              <th className=\"p-3 text-start\">{t(\"common.title\", \"العنوان\")}</th>\n              <th className=\"p-3 text-start\">{t(\"common.language\", \"اللغة\")}</th>\n              <th className=\"p-3 text-start\">{t(\"common.status\", \"الحالة\")}</th>\n              <th className=\"p-3 text-start\">{t(\"common.date\", \"التاريخ\")}</th>\n              <th className=\"p-3 text-start\">{t(\"common.actions\", \"الإجراءات\")}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {loading ? (\n              <tr><td className=\"p-4\" colSpan={5}>{t(\"common.loading\", \"جاري التحميل\")}…</td></tr>\n            ) : filtered.length === 0 ? (\n              <tr><td className=\"p-4\" colSpan={5}>{t(\"common.noResults\", \"لا توجد نتائج\")}.</td></tr>\n            ) : (\n              filtered.map((row) => (\n                <tr key={row.id} className=\"border-t border-sand\">\n                  <td className=\"p-3\">{row.title}</td>\n                  <td className=\"p-3\">{row.lang.toUpperCase()}</td>\n                  <td className=\"p-3\">\n                    <span className={`px-2 py-1 rounded text-xs ${\n                      row.status === \"published\" ? \"bg-green-100 text-green-700\" : \"bg-yellow-100 text-yellow-700\"\n                    }`}>\n                      {row.status === \"published\" ? t(\"common.published\",\"منشور\") : t(\"common.draft\",\"مسودة\")}\n                    </span>\n                  </td>\n                  <td className=\"p-3\">\n                    {new Date(row.date).toLocaleDateString(i18n.language === \"ar\" ? \"ar-SA\" : \"en-US\")}\n                  </td>\n                  <td className=\"p-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <Link to={`/admin/blog/${row.id}`} className=\"text-gold hover:text-gold-dark\">\n                        {t(\"common.edit\",\"تعديل\")}\n                      </Link>\n                      <button className=\"text-red-500 hover:text-red-700\" onClick={() => alert(\"TODO: delete\")}>\n                        {t(\"common.delete\",\"حذف\")}\n                      </button>\n                      <a href={`/blog/${encodeURIComponent(row.id)}?preview=1`} target=\"_blank\" rel=\"noreferrer\"\n                         className=\"text-charcoal hover:text-gold\">\n                        {t(\"common.preview\",\"معاينة\")}\n                      </a>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4445},"frontend/src/pages/admin/layout/AdminLayout.tsx":{"content":"import { useState } from 'react';\nimport { Link, Outlet, useLocation } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n// إذا كان مسار ملف الـ store مختلفًا عندك غيّره هنا\n// import { useAuthStore } from '../store/authStore';\n\nexport default function AdminLayout() {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  // ملاحظة: استخدم startsWith بدل مساواة كاملة ليشمل المسارات الفرعية\n  const isActive = (path: string) =>\n    location.pathname === path || location.pathname.startsWith(path + '/');\n\n  // إن احتجت تقييد عنصر \"المدونة\" على أدوار معيّنة، فعّل السطرين التاليين وفلتر العناصر بناءً على الدور:\n  // const { user } = useAuthStore();\n  // const canManageBlog = user?.roles?.includes('admin') || user?.roles?.includes('super_admin');\n\n  const menuItems = [\n    { path: '/admin/dashboard', label: t('admin.dashboard'), icon: '📊' },\n    { path: '/admin/products',  label: t('admin.products'),  icon: '🛍️' },\n    { path: '/admin/auctions',  label: t('admin.auctions'),  icon: '🔨' },\n    { path: '/admin/orders',    label: t('admin.orders'),    icon: '📦' },\n    { path: '/admin/users',     label: t('admin.users'),     icon: '👥' },\n    { path: '/admin/auth-requests', label: t('admin.authRequests'), icon: '✅' },\n\n    // ✅ العنصر الجديد: المدونة\n    // إن أردت تقييده على أدوار: أضِف شرط canManageBlog هنا\n    { path: '/admin/blog',      label: t('admin.blog', 'المدونة'), icon: '📝' },\n\n    { path: '/admin/ads',       label: t('admin.ads'),       icon: '📢' },\n    { path: '/admin/support',   label: t('admin.support'),   icon: '💬' },\n    { path: '/admin/reports',   label: t('admin.reports'),   icon: '📈' },\n    { path: '/admin/settings',  label: t('admin.settings'),  icon: '⚙️' },\n    { path: '/admin/audit',     label: t('admin.audit'),     icon: '🔍' },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-sand\">\n      <div className=\"flex flex-col md:flex-row\">\n        {/* Mobile Overlay */}\n        {sidebarOpen && (\n          <div\n            className=\"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden\"\n            onClick={() => setSidebarOpen(false)}\n          />\n        )}\n\n        {/* Sidebar */}\n        <aside\n          className={`fixed md:static inset-y-0 left-0 z-50 w-72 md:w-64 bg-charcoal text-ivory transform transition-transform duration-300 overflow-y-auto ${\n            sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'\n          }`}\n        >\n          <div className=\"p-4 sm:p-6\">\n            <h2 className=\"text-xl sm:text-2xl font-bold text-gold mb-2\">\n              {t('admin.adminPanel')}\n            </h2>\n            <p className=\"text-xs sm:text-sm text-ivory opacity-70\">\n              {t('admin.manageSystem')}\n            </p>\n          </div>\n\n          <nav className=\"px-2 sm:px-3 pb-4\">\n            {menuItems.map((item) => (\n              <Link\n                key={item.path}\n                to={item.path}\n                onClick={() => setSidebarOpen(false)}\n                className={`flex items-center gap-3 px-3 sm:px-4 py-3 mb-1 rounded-luxury transition min-h-[44px] text-sm sm:text-base ${\n                  isActive(item.path)\n                    ? 'bg-gold text-charcoal font-semibold'\n                    : 'text-ivory hover:bg-charcoal-light'\n                }`}\n              >\n                <span className=\"text-lg sm:text-xl\">{item.icon}</span>\n                <span>{item.label}</span>\n              </Link>\n            ))}\n          </nav>\n        </aside>\n\n        {/* Main Content */}\n        <main className=\"flex-1 p-4 sm:p-6 md:p-8\">\n          {/* Mobile Menu Button */}\n          <button\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            className=\"md:hidden mb-4 bg-charcoal text-ivory px-4 py-3 rounded-luxury min-h-[44px] font-semibold flex items-center gap-2\"\n          >\n            <span>☰</span>\n            <span>{t('admin.menu')}</span>\n          </button>\n\n          <Outlet />\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4318},"frontend/src/pages/admin/blog/AdminBlogEdit.tsx":{"content":"import { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport slugify from \"slugify\";\nimport { marked } from \"marked\";\n\ntype Mode = \"create\" | \"edit\";\ntype Form = {\n  title: string; slug: string; description: string; cover?: string;\n  author?: string; category?: string; tags: string;\n  lang: \"ar\"|\"en\"; date: string; status: \"draft\"|\"published\";\n  content: string;\n};\n\nexport default function AdminBlogEdit({ mode }: { mode: Mode }) {\n  const { t } = useTranslation();\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [saving, setSaving] = useState(false);\n  const [form, setForm] = useState<Form>({\n    title:\"\", slug:\"\", description:\"\", cover:\"\", author:\"\", category:\"\",\n    tags:\"\", lang:\"ar\", date:new Date().toISOString().slice(0,10),\n    status:\"draft\", content:\"\"\n  });\n\n  useEffect(() => {\n    if (mode === \"edit\" && id) {\n      (async () => {\n        // TODO: GET /api/admin/blog/:id\n        setForm({\n          title:\"Example title\", slug:\"example-title\", description:\"Short desc\",\n          cover:\"\", author:\"AO\", category:\"guides\", tags:\"perfume, niche\",\n          lang:\"ar\", date:\"2025-01-10\", status:\"draft\", content:\"## Heading\\n\\nContent…\"\n        });\n      })();\n    }\n  }, [mode, id]);\n\n  const on = (k: keyof Form, v:any)=> setForm(s=>({...s,[k]:v}));\n  const html = useMemo(()=> marked.parse(form.content||\"\"), [form.content]);\n  const autoSlug = ()=> form.title && on(\"slug\", slugify(form.title,{lower:true,strict:true}));\n\n  const save = async ()=>{\n    setSaving(true);\n    try{\n      const payload = { ...form, tags: form.tags.split(\",\").map(x=>x.trim()).filter(Boolean) };\n      // TODO: POST /api/admin/blog  أو  PUT /api/admin/blog/:id\n      navigate(\"/admin/blog\");\n    }catch(e){ console.error(e); alert(t(\"common.error\",\"حدث خطأ\")); }\n    finally{ setSaving(false); }\n  };\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h1 className=\"text-2xl font-bold\">\n          {mode===\"create\" ? t(\"admin.newPost\",\"مقال جديد\") : t(\"common.edit\",\"تعديل\")}\n        </h1>\n        <button\n          onClick={save}\n          disabled={saving}\n          className=\"bg-gold text-charcoal px-4 py-2 rounded-lg font-semibold hover:bg-gold-hover disabled:opacity-60\"\n        >\n          {saving ? t(\"common.loading\",\"جاري الحفظ\") : t(\"common.save\",\"حفظ\")}\n        </button>\n      </div>\n\n      <div className=\"grid lg:grid-cols-2 gap-6\">\n        <div className=\"bg-ivory rounded-xl shadow-sm p-4 space-y-4\">\n          <div className=\"grid sm:grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block mb-1\">{t(\"common.title\",\"العنوان\")}</label>\n              <input value={form.title} onChange={e=>on(\"title\",e.target.value)} onBlur={autoSlug}\n                     className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\" />\n            </div>\n            <div>\n              <label className=\"block mb-1\">Slug</label>\n              <input value={form.slug} onChange={e=>on(\"slug\",e.target.value)}\n                     className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\" />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block mb-1\">{t(\"common.description\",\"الوصف\")}</label>\n            <textarea value={form.description} onChange={e=>on(\"description\",e.target.value)}\n                      className=\"w-full bg-white border border-sand rounded-lg px-3 py-2 min-h-[80px]\" />\n          </div>\n\n          <div className=\"grid sm:grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block mb-1\">{t(\"common.cover\",\"صورة الغلاف\")}</label>\n              <input value={form.cover} onChange={e=>on(\"cover\",e.target.value)}\n                     placeholder=\"/images/blog/cover.webp\"\n                     className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\" />\n            </div>\n            <div>\n              <label className=\"block mb-1\">{t(\"common.author\",\"المؤلف\")}</label>\n              <input value={form.author} onChange={e=>on(\"author\",e.target.value)}\n                     className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\" />\n            </div>\n          </div>\n\n          <div className=\"grid sm:grid-cols-3 gap-3\">\n            <div>\n              <label className=\"block mb-1\">{t(\"common.category\",\"التصنيف\")}</label>\n              <input value={form.category} onChange={e=>on(\"category\",e.target.value)}\n                     className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\" />\n            </div>\n            <div>\n              <label className=\"block mb-1\">{t(\"common.tags\",\"الوسوم\")}</label>\n              <input value={form.tags} onChange={e=>on(\"tags\",e.target.value)} placeholder=\"tag1, tag2\"\n                     className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\" />\n            </div>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <label className=\"block mb-1\">{t(\"common.language\",\"اللغة\")}</label>\n                <select value={form.lang} onChange={e=>on(\"lang\",e.target.value as \"ar\"|\"en\")}\n                        className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\">\n                  <option value=\"ar\">العربية</option>\n                  <option value=\"en\">English</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block mb-1\">{t(\"common.status\",\"الحالة\")}</label>\n                <select value={form.status} onChange={e=>on(\"status\",e.target.value as \"draft\"|\"published\")}\n                        className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\">\n                  <option value=\"draft\">{t(\"common.draft\",\"مسودة\")}</option>\n                  <option value=\"published\">{t(\"common.published\",\"منشور\")}</option>\n                </select>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block mb-1\">{t(\"common.date\",\"التاريخ\")}</label>\n              <input type=\"date\" value={form.date} onChange={e=>on(\"date\",e.target.value)}\n                     className=\"w-full bg-white border border-sand rounded-lg px-3 py-2\" />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block mb-1\">{t(\"common.content\",\"المحتوى (Markdown)\")}</label>\n            <textarea value={form.content} onChange={e=>on(\"content\",e.target.value)}\n                      className=\"w-full bg-white border border-sand rounded-lg px-3 py-2 min-h-[260px] font-mono\"\n                      placeholder={`## عنوان فرعي\\n\\nنص…`} />\n          </div>\n        </div>\n\n        <div className=\"bg-ivory rounded-xl shadow-sm p-4\">\n          <h2 className=\"text-lg font-semibold mb-3\">{t(\"common.preview\",\"معاينة\")}</h2>\n          <article className=\"prose max-w-none\" dangerouslySetInnerHTML={{ __html: html }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7148},"frontend/src/pages/admin/AdminRoutes.tsx":{"content":"import { Routes, Route, Navigate } from \"react-router-dom\";\nimport AdminLayout from \"./layout/AdminLayout\";\nimport AdminBlogList from \"./blog/AdminBlogList\";\nimport AdminBlogEdit from \"./blog/AdminBlogEdit\";\n\nexport default function AdminRoutes() {\n  return (\n    <Routes>\n      <Route element={<AdminLayout />}>\n        {/* ضع هنا بقية مسارات الأدمن لو وجدت (dashboard, products, ...). */}\n\n        {/* Blog */}\n        <Route path=\"blog\" element={<AdminBlogList />} />\n        <Route path=\"blog/new\" element={<AdminBlogEdit mode=\"create\" />} />\n        <Route path=\"blog/:id\" element={<AdminBlogEdit mode=\"edit\" />} />\n      </Route>\n\n      {/* افتراضيًا انتقل لقائمة المدونة */}\n      <Route path=\"*\" element={<Navigate to=\"/admin/blog\" replace />} />\n    </Routes>\n  );\n}\n","size_bytes":830}},"version":2}