# Aalam Al-Otoor - عالم العطور

## Overview
Aalam Al-Otoor is a production-ready, bilingual (Arabic/English) perfume marketplace and auction platform. It features real-time bidding, authenticity verification, multi-role user management, and a luxury brand aesthetic. The platform aims to provide a comprehensive solution for buying and selling perfumes, with a strong focus on user experience and security.

## User Preferences
- Language: Bilingual (Arabic primary, English secondary)
- Design: Luxury aesthetic with premium feel
- UX: Smooth transitions, intuitive navigation
- Accessibility: RTL support for Arabic users

## System Architecture
**UI/UX Decisions:** The platform adopts a luxury brand theme with a Charcoal, Gold, and Ivory color palette. Typography uses Cairo for Arabic and Inter for English, with automatic RTL support. UI components feature a `12px` border-radius for a "rounded-luxury" feel and gold-tinted luxury shadows. A mobile-first design approach is implemented using Tailwind breakpoints.

**Technical Implementations:**
*   **Backend:** Developed with FastAPI (Python 3.11), SQLAlchemy, and PostgreSQL. It includes a robust security module with JWT authentication and bcrypt password hashing, and a role-based access control (RBAC) system supporting six distinct user roles (super_admin, admin, moderator, support, seller, buyer). Real-time auction bidding is handled via WebSockets.
*   **Frontend:** Built using React 18, TypeScript, Vite, and Tailwind CSS. State management is handled by Zustand, and internationalization is managed with `react-i18next` for seamless Arabic and English language switching, including RTL layout support.
*   **Feature Specifications:**
    *   **Authentication & Authorization:** JWT-based authentication, bcrypt hashing, and RBAC with token interceptors.
    *   **Product Management:** CRUD operations for products with role-based access for sellers and administrators.
    *   **Live Auctions:** Real-time bidding interface with countdown timers, current bid display, bid validation, and bid history. Utilizes WebSockets for live updates with a polling fallback.
    *   **Order Management:** Role-based order status workflows for buyers, sellers, and administrators.
    *   **Buyer Dashboard:** Complete account management with AccountLayout (collapsible sidebar), AccountOverviewPage (profile stats), OrdersPage (order history with filtering), BidsPage (bid history), FavoritesPage (saved products grid), and SupportPage (ticket creation and list). All pages feature bilingual support with locale-sensitive date formatting.
    *   **Seller Dashboard:** Complete seller management with SellerLayout (collapsible sidebar), SellerDashboardPage (KPI cards and earnings summary), SellerProductsPage (DataTable with search/filter, inline editing, CRUD operations, Add Product modal with image upload, CSV import), SellerAuctionsPage (auction list with filtering), SellerOrdersPage (order management with status updates), SellerEarningsPage (earnings table and chart visualization), and SellerSupportPage (ticket management). All pages feature bilingual support with locale-sensitive formatting.
    *   **Admin Dashboard:** Complete admin management with AdminLayout (sidebar navigation), AdminDashboardPage (KPI cards and moderation queue), AdminProductsPage (product moderation with approve/reject/hide and bulk actions), AdminAuctionsPage (auction management with extend/end actions and bid logs), AdminOrdersPage (order status management with CSV export), AdminUsersPage (user management with role assignment and verified seller marking), AdminAuthRequestsPage (seller verification workflow with validator assignment), AdminAdsPage (ad banner CRUD for hero/sidebar/strip placements), AdminSupportPage (ticket management with canned replies), AdminReportsPage (sales/commission/auction reports with charts and CSV export), AdminSettingsPage (commission rates, fees, notifications, RBAC matrix), and AdminAuditPage (sensitive actions log with filters). All pages feature bilingual support with locale-sensitive formatting.
    *   **Internationalization:** Full bilingual support with Arabic as default (RTL) and a language toggle in the navigation bar. All UI strings are externalized into translation keys. All account, seller, and admin pages properly switch between Arabic and English with locale-sensitive date formatting.
    *   **Currency Display:** All prices display in Saudi Riyal (SAR) with automatic conversion from USD using a 3.75 exchange rate. The `formatPrice()` utility uses "﷼" symbol for Arabic and "SAR" for English. Admin and seller dashboard pages use explicit "ريال" text for enhanced clarity. All dollar symbols ($) have been removed from user-facing displays across all pages including AdminReportsPage, AdminSettingsPage, AdminAuctionsPage, AdminOrdersPage, and SellerAuctionsPage.
    *   **Brand Identity:** Professional logo system with BrandLogo component supporting multiple variants (monogram, wordmark-en, wordmark-ar, lockup-bilingual) and automatic language-based selection. Navbar uses responsive logo sizing (wordmark on mobile, lockup on desktop). Footer displays language-aware wordmark with quick links to /new, /used, /auctions. PWA-ready with favicon set (32, 180, 192, 512px) and manifest configuration with theme color #C8A24A. Dark mode support via .brand-on-dark CSS utility.
    *   **Image Uploads:** Secure image upload and optimization.
    *   **Home Page:** Premium content-rich landing page with 10 sections: Hero carousel (3 slides with autoplay, pause on hover, dots navigation), Promo tiles (3 clickable tiles for New/Used/Auctions), Featured New Products grid (8 items), Live Auctions strip (horizontal carousel with countdown timers), Featured Pre-Owned grid (8 items with discount display), Categories chips (scrollable), Trust badges (4 icons with text), Top Brands carousel (logo slider), Editorial guides (2 cards), Newsletter signup. All sections use mock data from HomeService, feature bilingual support, RTL-safe CSS, loading states, and error handling. Mobile-optimized with 1-column grids and swipeable carousels.
    *   **Shopping Cart & Checkout:** Complete e-commerce flow with Zustand state management and localStorage persistence. CartStore and WishlistStore handle add/remove/update operations with real-time badge counts. Navbar includes CartIconButton and WishlistIconButton with item counts in both mobile and desktop views. MiniCartDrawer provides quick cart preview with subtotal, total, and checkout CTA. Full pages include: CartPage (quantity controls, item removal, order summary), WishlistPage (product grid with add-to-cart), CheckoutPage (delivery form validation, shipping method selection [standard free/express 35 SAR], payment methods [COD active, card/mada coming soon], coupon system with mock validation [SAVE10/WELCOME20/VIP30], order summary with totals), OrderSuccessPage (order confirmation with next steps). All cart/wishlist features use SAR currency with custom SARIcon component, full RTL support, and complete AR/EN translations. Cart clears on successful checkout.
    *   **Product Cards UX:** Professional product card design with wishlist heart button (top-left, RTL-safe positioning), clickable image and product name (navigate to detail page), single "Add to Cart" CTA button, SAR currency icon display using SVG asset (no text). ProductCard component integrates with useCartStore and useWishlistStore for real-time functionality. Cards feature 4:5 aspect ratio images with hover scale effect, white background with rounded-2xl corners, shadow transitions, and full RTL/LTR support. Applied globally across FeaturedGrid (home), Products, CatalogPage, and FavoritesPage. Currency formatting uses formatSAR() utility for locale-aware display (ar-SA/en-US) with proper decimal formatting.
    *   **Blog Module:** Professional multilingual blog system (AR/EN) with markdown-based content management. Features include: BlogIndex (pagination 12/page, category/tag filters, text search), BlogPost (full post view with TOC, reading time, breadcrumbs, related posts, share buttons), CategoryPage, TagPage, and AuthorPage. Content stored as markdown files with front-matter metadata. Blog service (blogService.ts) handles parsing with gray-matter, markdown-to-HTML conversion with marked, and HTML sanitization with DOMPurify. Full SEO implementation with react-helmet-async (meta tags, OG/Twitter cards, canonical URLs, hreflang, JSON-LD Article/BreadcrumbList schemas). Navigation integrated in navbar (desktop/mobile) and footer. RTL-aware prose rendering for Arabic content. Buffer polyfill configured in Vite for gray-matter compatibility. Sample blog posts created covering niche perfumes, perfume care, and seasonal fragrances.
    *   **Auction Countdown Timer:** Real-time countdown timer displayed on auction product cards. Shows time remaining in format "6d 23:59:59" for days/hours/minutes/seconds or "HH:MM:SS" when less than 24 hours remain. Features gradient charcoal/gold design, monospace font for readability, automatic expiry detection, and full bilingual support (AR: "ينتهي خلال" / EN: "Ends in"). Implemented in CountdownTimer component with 1-second interval updates. Timer displays "انتهى المزاد" / "Auction Ended" when time expires.

**System Design Choices:** The architecture separates backend and frontend into distinct services, communicating via RESTful APIs and WebSockets. Database migrations are managed with Alembic. The frontend uses Vite's proxy capabilities to simplify development and API interaction.

## External Dependencies
*   **Database:** PostgreSQL (for persistent data storage)
*   **ORM:** SQLAlchemy (Python ORM for database interaction)
*   **Database Migrations:** Alembic
*   **Real-time Communication:** WebSocket protocol
*   **Internationalization:** `react-i18next` library
*   **Styling Framework:** Tailwind CSS
*   **State Management:** Zustand
*   **HTTP Client:** Axios (for frontend API calls)
*   **Authentication Tokens:** JSON Web Tokens (JWT)
*   **Password Hashing:** Bcrypt